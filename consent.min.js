/* eslint-disable @microsoft/sdl/no-cookies */

!function(){"use strict";var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var u=function(){return(u=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function r(e,s,c,u){return new(c=c||Promise)(function(n,t){function o(e){try{i(u.next(e))}catch(e){t(e)}}function r(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(o,r)}i((u=u.apply(e,s||[])).next())})}function c(n,o){var r,i,s,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,i=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(!(s=0<(s=c.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){c=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){c.label=t[1];break}if(6===t[0]&&c.label<s[1]){c.label=s[1],s=t;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(t);break}s[2]&&c.ops.pop(),c.trys.pop();continue}t=o.call(n,c)}catch(e){t=[6,e],i=0}finally{r=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)s.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s}function l(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||((o=o||Array.prototype.slice.call(t,0,r))[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var t=(f.flatten=function(e){var t={};return f.flattenRecursively(e,t,""),t},f.isObject=function(e){return e&&"object"==typeof e&&!Array.isArray(e)},f.mergeDeep=function(e){for(var t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(!n.length)return e;var r=n.shift();if(this.isObject(e)&&this.isObject(r))for(var i in r)this.isObject(r[i])?(e[i]||Object.assign(e,((t={})[i]={},t)),this.mergeDeep(e[i],r[i])):Object.assign(e,((t={})[i]=r[i],t));return this.mergeDeep.apply(this,l([e],a(n),!1))},f.flattenRecursively=function(e,t,n){if(void 0===n&&(n=""),"string"==typeof e)t[n]=e;else if(Array.isArray(e))for(var o=0;o<e.length;o++){var r=e[o],i=n;f.flattenRecursively(r,t,i+="["+o+"]")}else if("object"==typeof e)for(o=0;o<Object.keys(e).length;o++){var s=Object.keys(e)[o];""!==(i=n).trim()&&(i+="."),i+=s,f.flattenRecursively(e[s],t,i)}},f);function f(){}var n,i=function(e){this.state=e||{config:{},debug:{logs:[],events:[]},custom:{}}},s=(e(d,n=i),Object.defineProperty(d.prototype,"debugInfo",{get:function(){return this.state.debug},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"config",{get:function(){return this.state.config},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"userConsent",{get:function(){return this.state.custom.userConsent},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"isHeadless",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"isPreviewMode",{get:function(){var e;return(null===(e=this.state.config.initConfig)||void 0===e?void 0:e.preview)||!1},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"isLivePreviewMode",{get:function(){return!1},enumerable:!1,configurable:!0}),d);function d(e){return n.call(this,e)||this}var p,g=(e(v,p=i),v.prototype.saveDebugInfo=function(e){var t=e.event,e=e.log;t&&this.state.debug.events.push(t),e&&this.state.debug.logs.push(e)},v.prototype.setUserConsent=function(e){this.state.custom.userConsent=e},v.prototype.setInitConfig=function(e){this.state.config.initConfig=e},v);function v(e){return p.call(this,e)||this}var h,_=(new i).state,S={getters:new s(_),reducers:new g(_),addReducers:function(e){this.reducers=t.mergeDeep(this.reducers,e)},addGetters:function(e){Object.defineProperties(this.getters,Object.getOwnPropertyDescriptors(e.prototype))}};(G=h=h||{})[G.INFO=0]="INFO",G[G.WARN=1]="WARN",G[G.ERROR=2]="ERROR";var w=(m.log=function(e,t){switch(e){case h.WARN:console.warn(t);break;case h.ERROR:console.error(t)}},m);function m(){}var y,C=(b.info=function(e,t){b.log(h.INFO,e,t)},b.warn=function(e,t){b.log(h.WARN,e,t)},b.error=function(e,t){b.log(h.ERROR,e,t)},b.log=function(e,t,n){n=b.formatLogMessage(e,t,n);S.reducers.saveDebugInfo({log:n}),w.log(e,n)},b.formatLogMessage=function(e,t,n){n=n?"| "+JSON.stringify(n):"";return"["+h[e]+"] "+t+" "+n},b);function b(){}function M(){this.strategy=y.REPLAY_ALL}(W=y=y||{})[W.REPLAY_ALL=0]="REPLAY_ALL",W[W.REPLAY_LATEST=1]="REPLAY_LATEST",W[W.SKIP=2]="SKIP";i=new(M.prototype.execute=function(t,e){e.forEach(function(e){return t(e)})},M);function T(){this.strategy=y.REPLAY_LATEST}s=new(T.prototype.execute=function(e,t){t.length&&e(t[t.length-1].payload)},T);function E(){this.strategy=y.SKIP}var g=new(E.prototype.execute=function(){},E),D=((_={})[y.REPLAY_ALL]=i,_[y.REPLAY_LATEST]=s,_[y.SKIP]=g,_),F=(O.record=function(e,t){this.eventsLogs[e]=this.eventsLogs[e]||[],this.eventsLogs[e].push({payload:t})},O.replay=function(e,t,n){void 0===n&&(n=this.DEFAULT_STRATEGY),D[n].execute(t,this.eventsLogs[e]||[])},O.eventsLogs={},O.DEFAULT_STRATEGY=y.REPLAY_LATEST,O);function O(){}function A(){this.events={},this.eventIdCounter=0}var P,K,I,N,j,R,L,k,x,U=new(A.getDefaultEventDetails=function(){return{executionCount:0,callbacks:[]}},A.prototype.on=function(e,t,n){var o=void 0===n?{}:n,n=o.sync,n=void 0!==n&&n,o=o.replayStrategy;this.eventIdCounter+=this.eventIdCounter;n={id:this.eventIdCounter,fn:t,sync:n};return this.events[e]=this.events[e]||A.getDefaultEventDetails(),this.events[e].callbacks.push(n),F.replay(e,t,o),this.eventIdCounter},A.prototype.trigger=function(e,n){var o=this;void 0===n&&(n={});var t=(null===(t=this.events[e])||void 0===t?void 0:t.callbacks)||[];C.info("Started executing '"+t.length+"' callbacks for event '"+e+"'",n),S.reducers.saveDebugInfo({event:e}),t.forEach(function(t){return r(o,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return t.sync?[3,2]:[4,Promise.resolve()];case 1:e.sent(),e.label=2;case 2:return t.fn(n),[2]}})})}),F.record(e,n),C.info("Completed executing '"+t.length+"' callbacks for event '"+e+"'",n),this.events[e]&&this.events[e].executionCount++},A.prototype.off=function(e,t){var n=null===(n=this.events[e])||void 0===n?void 0:n.callbacks.findIndex(function(e){return e.id!==t&&e.fn!==t});"number"==typeof n&&~n?(C.info("Removing event listener '"+this.events[e].callbacks[n].id+"' of '"+e+"' event"),this.events[e].callbacks.splice(n,1)):C.error("Unable to remove event listener for event '"+e+"'. No matching event id or callback found.")},A);(G=P=P||{}).SoftOptIn="Soft Opt-in",G.Explicit="Explicit",G.Implicit="Implicit",(W=K=K||{}).ConsentChanged="ConsentChanged",W.ShowChangeSettingsModal="ShowChangeSettingsModal",W.ShowConsentNotice="ConsentNotice",W.CloseChangeSettingsModal="CloseChangeSettingsModal",W.CloseConsentNotice="CloseConsentNotice",W.AcceptAll="AcceptAll",W.RejectAll="RejectAll",W.ShowTemplate="ShowTemplate",W.CloseTemplate="CloseTemplate",W.UpdateConsent="UpdateConsent",(i=I=I||{}).Init="Init",i.ConsentModelSelected="ConsentModelSelected",(s=N=N||{}).Default="Default",s.HeadLess="HeadLess",(g=j=j||{}).Url="Url",g.Text="Text",(_=R=R||{}).ConsentNotice="consentNotice",_.ChangeSettingsModal="preferenceCenter",(G=L=L||{}).OFF="0",G.ON="1",(k=k||{}).Consent="msft-consent",(W=x=x||{}).Script="script",W.IFrame="iframe";i=Object.freeze({__proto__:null,get ConsentModelType(){return P},get PublicEvents(){return K},get Events(){return I},get SDKMode(){return N},get StyleType(){return j},get TemplateType(){return R},get Preference(){return L},get Cookie(){return k},get RegisteredDivType(){return x}}),B.init=function(e){S.reducers.setInitConfig(e),U.trigger(I.Init,e)},B.showChangeSettingsModal=function(){U.trigger(K.ShowChangeSettingsModal)},B.on=function(e,t,n){n=(void 0===n?{}:n).sync,n=void 0!==n&&n;if(!(e in I))return U.on(e,t,{sync:n});C.error("Cannot subscribe to internal event '"+e+"'.")},B.trigger=function(e,t){e in I?C.error("Cannot trigger internal event '"+e+"'."):U.trigger(e,t)},B.off=function(e,t){e in I?C.error("Cannot detach listener for internal event '"+e+"'."):U.off(e,t)},s=B;function B(){}Y.createIFrame=function(e,t,n,o){document.body?Y.appendIframe(Y.getIframeObject(e,t,o),n):window.addEventListener("DOMContentLoaded",function(){Y.appendIframe(Y.getIframeObject(e,t,o),n)})},Y.getIframeObject=function(e,t,n){n="<html><head>"+Y.getAllStylesAsText(n)+'</head><body style="background:transparent;">'+e+"</body></html>",e=document.createElement("iframe");return e.setAttribute("style","height:100%;width:100%;border:0;position:"+(window.__MSFT_SDK.Store.getters.isPreviewMode?"relative":"fixed")+";top: 0"),e.setAttribute("sandbox","allow-scripts"),e.id=t,e.srcdoc=n,e},Y.appendIframe=function(e,t){(t||document.body).appendChild(e)},Y.getAllStylesAsText=function(e){var n="";return window.__MSFT_SDK.Store.getters.isPreviewMode||l(l([],a(document.getElementsByTagName("style")),!1),a(document.getElementsByTagName("link")),!1).forEach(function(e){return n+=e.outerHTML}),null!=e&&e.forEach(function(e){var t;e.type==j.Text?((t=document.createElement("style")).appendChild(document.createTextNode(e.value)),n+=t.outerHTML):e.type==j.Url&&((t=document.createElement("link")).rel="stylesheet",t.href=e.value,n+=t.outerHTML)}),n},Y.getFrameById=function(e){for(var t,n=0;n<frames.length;n++)if((null===(t=frames[n].frameElement)||void 0===t?void 0:t.id)===e)return frames[n];return null},g=Y;function Y(){}V.AddPublicApis=function(e){this.PublicApis=e},V.exposeApis=function(){var e=Object.getOwnPropertyNames(window.MSFTConsent).filter(function(e){return"function"==typeof e}),t=Object.getOwnPropertyNames(this.PublicApis);e.forEach(function(e){t.includes(e)&&C.warn("Already existing Public Api with the same name '"+e+"'")}),Object.defineProperties(window.MSFTConsent,Object.getOwnPropertyDescriptors(this.PublicApis))},_=V;function V(){}var H,W,G=Object.freeze({__proto__:null,Constants:{OFF:"0",ON:"1",COOKIE_NAME:"APCC",ConsentConfig:"MicrosoftConsentConfig"}}),z=(X.topologicalSort=function(e){var n=this,o=this.getAdjacencyList(e),r={};return Object.keys(o).reduce(function(e,t){return e.concat(n.dfs(t,o,r))},[])},X.dfs=function(e,n,o,r){var i=this;if((r=void 0===r?{}:r)[e])throw new Error("Circular dependency found!");if(o[e])return[];r[e]=!0;var t=(null===(t=n[e])||void 0===t?void 0:t.reduce(function(e,t){return e.concat(i.dfs(t,n,o,r))},[]))||[];return o[e]=!0,r[e]=!1,t.concat(e)},X.getAdjacencyList=function(e){var n={};return e.forEach(function(e){var t=a(e,2),e=t[0],t=t[1];n[e]=n[e]||[],(e=n[e]).push.apply(e,l([],a(t),!1))}),n},X);function X(){}(W=H=H||{}).PRESENTATION="presentation",W.PREVIEW="preview",(W=te=te||{}).PRESENTATION="/presentation.min.js",W.PREVIEW="/preview.min.js";var J={fields:{model:"modelName",notice:["foo","bar"],lcid:"en"},modules:[{module:H.PRESENTATION,path:te.PRESENTATION,condition:function(){return!S.getters.isHeadless},dependency:[]},{module:H.PREVIEW,path:te.PREVIEW,condition:function(){return S.getters.isLivePreviewMode},dependency:[]}]},Z=($.deferred=function(){var n={};return n.promise=new Promise(function(e,t){n.resolve=e,n.reject=t}),n},$);function $(){}var q=(Q.fetch=function(t){return r(this,void 0,void 0,function(){return c(this,function(e){try{return[2,this.exponentialRetry(function(){return fetch(t).then(function(e){if(!e.ok)throw new Error(e.statusText);return e})})]}catch(e){C.error("Unable to fetch asset '"+t+"'")}return[2]})})},Q.exponentialRetry=function(i,s){return void 0===s&&(s=0),r(this,void 0,void 0,function(){var t,n,o,r=this;return c(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,i()];case 1:return[2,e.sent()];case 2:if(t=e.sent(),(n=s+1)<this.MAX_RETRY_COUNT)return o=Z.deferred(),setTimeout(function(){r.exponentialRetry(i,n).then(function(){return o.resolve()}).catch(function(){return o.reject()})},this.EXPONENTIAL_DELAY_FACTOR_IN_MS*n),[2,o.promise];throw t;case 3:return[2]}})})},Q.MAX_RETRY_COUNT=3,Q.EXPONENTIAL_DELAY_FACTOR_IN_MS=250,Q);function Q(){}var ee,te=function(e){this.path=e,this.value=""},ne=(e(oe,ee=te),oe.prototype.fetch=function(){var o;return r(this,void 0,void 0,function(){var t,n;return c(this,function(e){switch(e.label){case 0:return[4,q.fetch(this.path)];case 1:return t=e.sent(),n=this,[4,null==t?void 0:t.text()];case 2:return n.value=null!==(o=e.sent())&&void 0!==o?o:"",[2]}})})},oe.prototype.execute=function(){var e=Z.deferred(),t=document.createElement("script");return t.type="text/javascript",t.appendChild(document.createTextNode(this.value)),t.onload=function(){return e.resolve()},t.onerror=function(){return e.reject()},document.body?document.body.appendChild(t):window.addEventListener("DOMContentLoaded",function(){document.body.appendChild(t)}),e.promise},oe);function oe(e){return ee.call(this,e)||this}var re,ie=(e(se,re=te),se.prototype.fetch=function(){var o;return r(this,void 0,void 0,function(){var t,n;return c(this,function(e){switch(e.label){case 0:return[4,q.fetch(this.path)];case 1:return t=e.sent(),n=this,[4,null==t?void 0:t.json()];case 2:return n.value=null!==(o=e.sent())&&void 0!==o?o:{},[2]}})})},se.prototype.execute=function(){return this.callback(this.value),Promise.resolve()},se);function se(e,t){e=re.call(this,e)||this;return e.callback=t,e}ce.resolveDependencies=function(){return r(this,void 0,void 0,function(){var t,n,o;return c(this,function(e){switch(e.label){case 0:return n=this.getModuleMapAndDependency(),t=n.moduleMap,o=n.moduleDependency,n=this.fetchAllAssets(t),o=z.topologicalSort(o),[4,Promise.all(n)];case 1:return e.sent(),o.forEach(function(e){return t[e].forEach(function(e){return e.execute()})}),[2]}})})},ce.fetchAllAssets=function(e){var t=[];return Object.values(e).forEach(function(e){e.forEach(function(e){t.push(e.fetch())})}),t},ce.getModuleMapAndDependency=function(){var i=this,s={},c=[];return J.modules.forEach(function(e){var t=e.module,n=e.path,o=e.configs,r=e.condition,e=e.dependency;r&&!r()||(s[t]=l([],a(i.getModuleTypeInstances({path:n,fields:J.fields})),!1),c.push([t,e||[]]),o&&(s[t+".configs"]=o.reduce(function(e,t){return e.concat(i.getModuleTypeInstances(u(u({},t),{fields:J.fields})))},[]),c.push([t,[t+".configs"]])))}),{moduleMap:s,moduleDependency:c}},ce.getModuleTypeInstances=function(e){var t=e.path,n=e.callback,e=e.fields,o=t.split(".").pop(),e=this.resolvePathFields({path:t,fields:e}),r=[];return e.forEach(function(e){switch(o){case"js":r.push(new ne(e));break;case"json":n?r.push(new ie(e,n)):C.error("No callback provided for json asset with path '"+e+"'. Skipping it.");break;default:C.error("Cannot resolve dependency. Unknown extension identified for path '"+e+"'")}}),r},ce.resolvePathFields=function(e){var t=e.path,r=e.fields,e=l([],a(t.matchAll(/\$(\w+)/g)),!1),i=[t];return e.forEach(function(n){var e=r[n[1]],e=Array.isArray(e)?e:[e],o=[];e.forEach(function(t){i.forEach(function(e){o.push(e.replace(n[0],t))})}),i=o}),i},te=ce;function ce(){}window.__MSFT_SDK={EventBus:U,Logger:C,Store:S,Utils:{IFrameUtils:g,ObjectUtils:t},enums:i,constants:G,Helpers:_,config:window.__MSFT_SDK.config},window.MSFTConsent=s,te.resolveDependencies();var ue=(ae.encodeConsent=function(e,t){var n=e.preferences,e=ae.VERSION+"="+t.version.toString()+"%";return e+=ae.ModelName+"="+t.name.toString()+"%",e+=Object.keys(n).map(function(e){return e+"="+n[e]}).join("%")},ae.decodeConsentString=function(e){var n={};return e.split("%").forEach(function(e){var t=e.split("=");2===t.length&&(e=t[0],t=t[1],e!==ae.VERSION&&e!==ae.ModelName&&(n[e]=t))}),{preferences:n}},ae.getVersionFromString=function(e){e=e.match(/version=([\d.]+)%/);if(null==e)return-1;e=parseInt(e[1]);return isNaN(e)?-1:e},ae.getModelNameFromString=function(e){e=e.match(/modelName=([^%]+)%/);if(null!=e)return e[1]},ae.VERSION="version",ae.ModelName="modelName",ae);function ae(){}var s=function(e){this.state=e||{config:{sdkConfig:window.__MSFT_SDK.config},custom:{}}},le=(fe.get=function(){return document.cookie},fe.getItem=function(t){return document.cookie.split("; ").find(function(e){return e.startsWith(t+"=")})||""},fe.set=function(e){document.cookie=e},fe.setItem=function(e,t,n){var o;n&&((o=new Date).setTime(o.getTime()+n),o=o.toUTCString()),document.cookie=e+"="+t+(o?"; expires="+o:"")+"; path=/"},fe);function fe(){}var de,pe=(e(ge,de=s),Object.defineProperty(ge.prototype,"currentConsentModel",{get:function(){return this.state.config.currentConsentModel},enumerable:!1,configurable:!0}),Object.defineProperty(ge.prototype,"consentModels",{get:function(){return this.state.config.sdkConfig.consentModels},enumerable:!1,configurable:!0}),Object.defineProperty(ge.prototype,"templates",{get:function(){return this.state.config.templates},enumerable:!1,configurable:!0}),Object.defineProperty(ge.prototype,"styles",{get:function(){return this.state.custom.styles},enumerable:!1,configurable:!0}),Object.defineProperty(ge.prototype,"timezone",{get:function(){return window.Intl.DateTimeFormat().resolvedOptions().timeZone},enumerable:!1,configurable:!0}),Object.defineProperty(ge.prototype,"languages",{get:function(){return navigator.languages},enumerable:!1,configurable:!0}),Object.defineProperty(ge.prototype,"encodedConsent",{get:function(){return le.getItem(window.__MSFT_SDK.enums.Cookie.Consent)},enumerable:!1,configurable:!0}),Object.defineProperty(ge.prototype,"templateParentMap",{get:function(){var e;return(null===(e=this.state.config.currentConsentModel)||void 0===e?void 0:e.templateParentMap)||{}},enumerable:!1,configurable:!0}),Object.defineProperty(ge.prototype,"extendedTrackers",{get:function(){return this.state.config.sdkConfig.extendedTrackers},enumerable:!1,configurable:!0}),ge);function ge(e){return de.call(this,e)||this}var ve,te=(e(he,ve=s),he.prototype.setCurrentConsentModel=function(e){this.state.config.currentConsentModel=e},he.prototype.setTemplates=function(e){this.state.config.templates=e},he.prototype.setStyles=function(e){this.state.custom.styles=e},he.prototype.setEncodedConsentString=function(e,t,n){le.setItem(e,t,n)},he);function he(e){return ve.call(this,e)||this}var s=(new s).state,_e={getters:new pe(s),reducers:new te(s)};function Se(){window.__MSFT_SDK.Store.addReducers(_e.reducers),window.__MSFT_SDK.Store.addGetters(pe),Se.registerEvents(),Se.selectConsentModel()}new(Se.registerEvents=function(){window.__MSFT_SDK.EventBus.on(window.__MSFT_SDK.enums.Events.Init,Se.onInit)},Se.selectConsentModel=function(e){for(var t=window.__MSFT_SDK.Store.getters.consentModels,n=0;n<t.length;n++){var o=t[n];if(void 0===e?0==o.geoLocations.length||o.geoLocations.includes(window.__MSFT_SDK.Store.getters.timezone):o.countriesOrRegions.includes(e)){window.__MSFT_SDK.Store.reducers.setCurrentConsentModel(o),window.__MSFT_SDK.Logger.info("Consent model selected."),window.__MSFT_SDK.EventBus.trigger(window.__MSFT_SDK.enums.Events.ConsentModelSelected);break}}},Se.onInit=function(e){e.consentModel?(window.__MSFT_SDK.Store.reducers.setCurrentConsentModel(e.consentModel),window.__MSFT_SDK.Logger.info("Consent model selected."),window.__MSFT_SDK.EventBus.trigger(window.__MSFT_SDK.enums.Events.ConsentModelSelected)):e.countryOrRegion&&Se.selectConsentModel(e.countryOrRegion),e.template&&window.__MSFT_SDK.EventBus.trigger(window.__MSFT_SDK.enums.PublicEvents.ShowTemplate,{templateId:e.template})},Se);var we=(me.getTrackerCategories=function(){if(void 0!==window.__MSFT_SDK.Store.getters.currentConsentModel)return window.__MSFT_SDK.Store.getters.currentConsentModel.trackerCategories;throw new Error("Consent Model not selected.")},me.getDefaultConsent=function(t){var e,n={preferences:{}};return null!==(e=window.__MSFT_SDK.Store.getters.currentConsentModel)&&void 0!==e&&e.trackerCategories.forEach(function(e){n.preferences[e.name]=e.isEssential||t===window.__MSFT_SDK.enums.ConsentModelType.Implicit?window.__MSFT_SDK.enums.Preference.ON:window.__MSFT_SDK.enums.Preference.OFF}),n},me);function me(){}var ye=(Ce.registerEvents=function(){window.__MSFT_SDK.EventBus.on(window.__MSFT_SDK.enums.Events.Init,Ce.showNoticeIfConsentInvalid),window.__MSFT_SDK.EventBus.on(window.__MSFT_SDK.enums.PublicEvents.AcceptAll,Ce.acceptAllCategories),window.__MSFT_SDK.EventBus.on(window.__MSFT_SDK.enums.PublicEvents.RejectAll,Ce.rejectAllNonEssentialCategories),window.__MSFT_SDK.EventBus.on(window.__MSFT_SDK.enums.PublicEvents.UpdateConsent,Ce.setConsent)},Ce.getConsent=function(){return window.__MSFT_SDK.Store.getters.userConsent||we.getDefaultConsent(window.__MSFT_SDK.enums.ConsentModelType.Explicit)},Ce.getConsentFor=function(e){return Ce.getConsent().preferences[e]},Ce.setConsent=function(e){var t=e.consent,n=window.__MSFT_SDK.Store.getters.currentConsentModel;void 0!==n?(e=ue.encodeConsent(t,n),window.__MSFT_SDK.Store.reducers.setEncodedConsentString(window.__MSFT_SDK.enums.Cookie.Consent,e,1e3*n.expiryInSec),window.__MSFT_SDK.Store.reducers.setUserConsent(t),window.__MSFT_SDK.Logger.info("Consent updated."),window.__MSFT_SDK.EventBus.trigger(window.__MSFT_SDK.enums.PublicEvents.ConsentChanged)):window.__MSFT_SDK.Logger.warn("Cannot set user consent before consent model is selected.")},Ce.isConsentValid=function(){var e=window.__MSFT_SDK.Store.getters.encodedConsent;if(void 0===e)return!1;if(void 0===window.__MSFT_SDK.Store.getters.currentConsentModel)return window.__MSFT_SDK.Logger.warn("Consent model not selected, can't validate consent."),!0;var t=window.__MSFT_SDK.Store.getters.currentConsentModel,n=t.version,t=t.name;return ue.getVersionFromString(e)===n&&ue.getModelNameFromString(e)===t},Ce.showNoticeIfConsentInvalid=function(){var e,t,n;Ce.isConsentValid()?(t=ue.decodeConsentString(window.__MSFT_SDK.Store.getters.encodedConsent).preferences,n={preferences:{}},null!==(e=window.__MSFT_SDK.Store.getters.currentConsentModel)&&void 0!==e&&e.trackerCategories.forEach(function(e){e.isEssential?n.preferences[e.name]=window.__MSFT_SDK.enums.Preference.ON:n.preferences[e.name]=t[e.name]||window.__MSFT_SDK.enums.Preference.OFF}),window.__MSFT_SDK.Store.reducers.setUserConsent(n)):window.__MSFT_SDK.EventBus.trigger(window.__MSFT_SDK.enums.PublicEvents.ShowConsentNotice)},Ce.acceptAllCategories=function(){var e,t={preferences:{}};null!==(e=window.__MSFT_SDK.Store.getters.currentConsentModel)&&void 0!==e&&e.trackerCategories.forEach(function(e){t.preferences[e.name]=window.__MSFT_SDK.enums.Preference.ON}),Ce.setConsent({consent:t}),window.__MSFT_SDK.EventBus.trigger(window.__MSFT_SDK.enums.PublicEvents.CloseConsentNotice)},Ce.rejectAllNonEssentialCategories=function(){var e,t={preferences:{}};null!==(e=window.__MSFT_SDK.Store.getters.currentConsentModel)&&void 0!==e&&e.trackerCategories.forEach(function(e){t.preferences[e.name]=e.isEssential?window.__MSFT_SDK.enums.Preference.ON:window.__MSFT_SDK.enums.Preference.OFF}),Ce.setConsent({consent:t}),window.__MSFT_SDK.EventBus.trigger(window.__MSFT_SDK.enums.PublicEvents.CloseConsentNotice)},Ce);function Ce(){Ce.registerEvents()}new ye;be.getConsent=function(){return ye.getConsent()},be.getTrackerCategories=function(){return we.getTrackerCategories()},be.getConsentModels=function(){return window.__MSFT_SDK.Store.getters.consentModels.map(function(e){var t=e.name;return{name:t,version:e.version,selected:(null===(e=window.__MSFT_SDK.Store.getters.currentConsentModel)||void 0===e?void 0:e.name)===t}})},s=be;function be(){}window.__MSFT_SDK.Helpers.AddPublicApis(s),window.__MSFT_SDK.Helpers.exposeApis()}();
