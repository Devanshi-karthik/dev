/* eslint-disable */

!function(){"use strict";var x=function(e,t){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}x(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var K=function(){return(K=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function s(e,c,s,u){return new(s=s||Promise)(function(n,t){function o(e){try{i(u.next(e))}catch(e){t(e)}}function r(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(o,r)}i((u=u.apply(e,c||[])).next())})}function u(o,r){var i,c,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,c&&(s=2&t[0]?c.return:t[0]?c.throw||((s=c.return)&&s.call(c),0):c.next)&&!(s=s.call(c,t[1])).done)return s;switch(c=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,c=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=r.call(o,u)}catch(e){t=[6,e],c=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}}function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),c=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)c.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return c}function f(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||((o=o||Array.prototype.slice.call(t,0,r))[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}V.isObject=function(e){return e&&"object"==typeof e&&!Array.isArray(e)},V.mergeDeep=function(e){for(var t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(!n.length)return e;var r=n.shift();if(this.isObject(e)&&this.isObject(r))for(var i in r)this.isObject(r[i])?(e[i]||Object.assign(e,((t={})[i]={},t)),this.mergeDeep(e[i],r[i])):Object.assign(e,((t={})[i]=r[i],t));return this.mergeDeep.apply(this,f([e],l(n),!1))};var t,L,B,i,$=V;function V(){}(e=t=t||{}).PRESENTATION="presentation",e.PREVIEW="preview",e.CONFIG="config",e.HANDLEBAR="handlebar",e.PROXY="proxy",e.DSR="dsr",(e=L=L||{}).PRESENTATION="$jsRootPath/msft-privacy/js/presentation.min.js",e.PREVIEW="$jsRootPath/msft-privacy/js/preview.min.js",e.HANDLEBAR="$jsRootPath/msft-privacy/js/vendor/handlebars.min.js",e.PROXY="$jsRootPath/msft-privacy/js/proxy.min.js",e.DSR="$jsRootPath/msft-privacy/js/dsr.min.js",(e=B=B||{}).PRESENTATION="msft-presentation.js",e.HANDLEBAR="msft-handlebars.js",e.PROXY="msft-proxy.js",e.DSR="dsr.js",(e=i=i||{}).PATH="path",e.VARIABLE="variable";var H,e=function(e){this.state=e||{config:{},debug:{logs:[],events:[]},custom:{}}},n=(N(o,H=e),Object.defineProperty(o.prototype,"debugInfo",{get:function(){return this.state.debug},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"config",{get:function(){return this.state.config},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"userConsent",{get:function(){return this.state.custom.userConsent},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isHeadless",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isPreviewMode",{get:function(){var e;return(null==(e=this.state.config.initConfig)?void 0:e.preview)||!1},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isActionDisabled",{get:function(){var e;return(null==(e=this.state.config.initConfig)?void 0:e.disableActions)||!1},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isLivePreviewMode",{get:function(){var e;return"ConsentLivePreview"===(null==(e=window.parent)?void 0:e.name)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"presentationVariable",{get:function(){return B.PRESENTATION},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"handlebarVariable",{get:function(){return B.HANDLEBAR},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"proxyVariable",{get:function(){return B.PROXY},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"dsrVariable",{get:function(){return B.DSR},enumerable:!1,configurable:!0}),o);function o(e){return H.call(this,e)||this}N(W,U=e),W.prototype.saveDebugInfo=function(e){var t=e.event,e=e.log;t&&this.state.debug.events.push(t),e&&this.state.debug.logs.push(e)},W.prototype.setUserConsent=function(e){this.state.custom.userConsent=e},W.prototype.setInitConfig=function(e){this.state.config.initConfig=e};var U,r=W;function W(e){return U.call(this,e)||this}var Y,e=(new e).state,c={getters:new n(e),reducers:new r(e),addReducers:function(e){this.reducers=$.mergeDeep(this.reducers,e)},addGetters:function(e){Object.defineProperties(this.getters,Object.getOwnPropertyDescriptors(e.prototype))}},z=((n=Y=Y||{})[n.INFO=0]="INFO",n[n.WARN=1]="WARN",n[n.ERROR=2]="ERROR",G.log=function(e,t){switch(e){case Y.WARN:console.warn(t);break;case Y.ERROR:console.error(t)}},G);function G(){}q.info=function(e,t){q.log(Y.INFO,e,t)},q.warn=function(e,t){q.log(Y.WARN,e,t)},q.error=function(e,t){q.log(Y.ERROR,e,t)},q.log=function(e,t,n){t=q.formatLogMessage(e,t,n);c.reducers.saveDebugInfo({log:t}),z.log(e,t)},q.formatLogMessage=function(e,t,n){n=n?"| ".concat(JSON.stringify(n)):"";return"[".concat(Y[e],"] ").concat(t," ").concat(n)};var Q,a=q;function q(){}function X(){this.strategy=Q.REPLAY_ALL}(r=Q=Q||{})[r.REPLAY_ALL=0]="REPLAY_ALL",r[r.REPLAY_LATEST=1]="REPLAY_LATEST",r[r.SKIP=2]="SKIP",X.prototype.execute=function(t,e){e.forEach(function(e){e=e.payload;return t(e)})};e=new X;function J(){this.strategy=Q.REPLAY_LATEST}J.prototype.execute=function(e,t){t.length&&e(t[t.length-1].payload)};n=new J;function Z(){this.strategy=Q.SKIP}Z.prototype.execute=function(){};var r=new Z,ee=((d={})[Q.REPLAY_ALL]=e,d[Q.REPLAY_LATEST]=n,d[Q.SKIP]=r,d),te=(ne.record=function(e,t){this.eventsLogs[e]=this.eventsLogs[e]||[],this.eventsLogs[e].push({payload:t})},ne.replay=function(e,t,n){void 0===n&&(n=this.DEFAULT_STRATEGY),ee[n].execute(t,this.eventsLogs[e]||[])},ne.eventsLogs={},ne.DEFAULT_STRATEGY=Q.REPLAY_LATEST,ne);function ne(){}function oe(){this.events={},this.eventIdCounter=0}oe.getDefaultEventDetails=function(){return{executionCount:0,callbacks:[]}},oe.prototype.on=function(e,t,n){var n=void 0===n?{}:n,o=n.sync,o=void 0!==o&&o,n=n.replayStrategy,o=(a.info("Callback registered for event : ".concat(e)),this.eventIdCounter++,{id:this.eventIdCounter,fn:t,sync:o});return this.events[e]=this.events[e]||oe.getDefaultEventDetails(),this.events[e].callbacks.push(o),te.replay(e,t,n),this.eventIdCounter},oe.prototype.trigger=function(e,o){var t=this,n=(void 0===o&&(o={}),(null==(n=this.events[e])?void 0:n.callbacks)||[]);a.info("Started executing '".concat(n.length,"' callbacks for event '").concat(e,"'"),o),c.reducers.saveDebugInfo({event:e}),n.forEach(function(n){return s(t,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),n.sync?[3,2]:[4,Promise.resolve()];case 1:e.sent(),e.label=2;case 2:return n.fn(o),[3,4];case 3:return t=e.sent(),a.error("Error in executing callback id : ".concat(n.id),t),[3,4];case 4:return[2]}})})}),te.record(e,o),a.info("Completed executing '".concat(n.length,"' callbacks for event '").concat(e,"'"),o),this.events[e]&&this.events[e].executionCount++},oe.prototype.off=function(e,t){var n=null==(n=this.events[e])?void 0:n.callbacks.findIndex(function(e){return e.id===t||e.fn===t});"number"==typeof n&&~n?(a.info("Removing event listener '".concat(this.events[e].callbacks[n].id,"' of '").concat(e,"' event")),this.events[e].callbacks.splice(n,1)):a.error("Unable to remove event listener for event '".concat(e,"'. No matching event id or callback found."))};var re,ie,ce,se,ue,ae,le,fe,de,pe,ge,ve,he,ye,me,Se,be,we=new oe,n=((e=re=re||{}).Explicit="Explicit",e.Implicit="Implicit",(n=ie=ie||{}).ConsentChanged="ConsentChanged",n.ShowConsentNotice="ShowConsentNotice",n.ShowFirstPage="ShowFirstPage",n.CloseConsentNotice="CloseConsentNotice",n.AcceptAll="AcceptAll",n.RejectAll="RejectAll",n.ShowTemplate="ShowTemplate",n.CloseTemplate="CloseTemplate",n.UpdateConsent="UpdateConsent",n.AnchorTagClicked="AnchorTagClicked",n.FetchConfig="FetchConfig",n.QuestionsFormSubmitWithoutMetaData="QuestionsFormSubmitWithoutMetaData",n.QuestionsFormSubmit="QuestionsFormSubmit",n.ShowPreferences="ShowPreferences",(r=ce=ce||{}).Init="Init",r.CoreConsentModelSelected="CoreConsentModelSelected",r.ConfigReady="ConfigReady",(d=se=se||{}).Default="Default",d.HeadLess="HeadLess",(e=ue=ue||{}).Url="Url",e.Text="Text",(n=ae=ae||{}).OFF="0",n.ON="1",(le=le||{}).Consent="msft-consent",(r=fe=fe||{}).Script="script",r.IFrame="iframe",(d=de=de||{}).TrackerCategory="trackerCategory",d.Questions="Questions",(pe=pe||{}).TemplateError="<b>There is something wrong with template. Please check logs.</b>",(e=ge=ge||{}).day="day",e.week="week",e.month="month",e.year="year",(n=ve=ve||{}).Text="Text",n.Email="Email",n.Radio="Radio",n.MultiSelect="MultiSelect",n.Select="Select",n.Date="Date",n.PhoneNumber="PhoneNumber",n.CreditCard="CreditCard",n.Number="Number",n.MultiLineText="multiLineText",(he=he||{}).Required="Required",(r=ye=ye||{}).Question="question",r.Placeholder="placeholder",r.Options="options",(d=me=me||{}).WebConsentModel="WebConsentModel",d.QuestionModel="DSRSubmissionModel",(e=Se=Se||{}).WebConsentPackage=" WebConsentPackage",e.FIDESPackage="FIDESPackage",e.DSRSubmissionPackage="DSRSubmissionPackage",(be=be||{}).Preferences="Preferences",Object.freeze({__proto__:null,get ConsentModelType(){return re},get PublicEvents(){return ie},get Events(){return ce},get SDKMode(){return se},get StyleType(){return ue},get Preference(){return ae},get Cookie(){return le},get RegisteredDivType(){return fe},get NoticeType(){return de},get ErrorStrings(){return pe},get IntervalUnits(){return ge},get QuestionType(){return ve},get QuestionValidation(){return he},get QuestionField(){return ye},get ModelKind(){return me},get PackageKind(){return Se},get Template(){return be}})),_e=(Ce.initConsent=function(e){c.reducers.setInitConfig(e),we.trigger(ce.Init,e)},Ce);function Ce(){}Te.init=function(e){_e.initConsent(e)},Te.on=function(e,t,n){n=(void 0===n?{}:n).sync,n=void 0!==n&&n;if(!(e in ce))return we.on(e,t,{sync:n});a.error("Cannot subscribe to internal event '".concat(e,"'."))},Te.trigger=function(e,t){e in ce?a.error("Cannot trigger internal event '".concat(e,"'.")):we.trigger(e,t)},Te.off=function(e,t){e in ce?a.error("Cannot detach listener for internal event '".concat(e,"'.")):we.off(e,t)};r=Te;function Te(){}p.createIFrame=function(e,t,n,o){var r,i=null==(r=c.getters.config.initConfig)?void 0:r.renderTemplateWithoutIframe;document.body?p.appendElement(i?p.getDivElement(e,t,null==n):p.getIframeObject(e,t,null==n,o),n):window.addEventListener("DOMContentLoaded",function(){p.appendElement(i?p.getDivElement(e,t,null==n):p.getIframeObject(e,t,null==n,o),n)})},p.getIframeObject=function(e,t,n,o){o="<html><head><style>.msft-iframe-body{background-color: rgb(204 204 204 / 60%);}</style>".concat(p.getAllStylesAsText(o),'</head><body class="msft-iframe-body">').concat(e,"</body></html>"),e=document.createElement("iframe");return e.setAttribute("style","height:100%;width:100%;border:0;position:".concat(n?"fixed":"relative",";top:0;left:0;z-index:5000;")),e.className="msft-model-container",e.setAttribute("sandbox","allow-scripts allow-forms"),e.id=t,e.srcdoc=o,e},p.getDivElement=function(e,n,t){for(var o=document.createElement("style"),r=(o.appendChild(document.createTextNode(".msft-iframe-body{background-color: rgb(204 204 204 / 60%);height:100%;width:100%}")),document.createElement("div")),e=(r.innerHTML=e,r.className="msft-iframe-body",document.createElement("div")),i=(e.setAttribute("style","height:100%;width:100%;border:0;position:".concat(t?"fixed":"relative",";top:0;left:0;z-index:5000;")),e.className="msft-model-container",e.id=n,e.appendChild(o),e.appendChild(r),e.getElementsByTagName("script")),c=[],s=0;s<i.length;s++){var u,a=document.createElement("script");i[s].src?a.src=i[s].src:(u=document.createTextNode(i[s].innerHTML),a.appendChild(u)),c.push(a)}return setTimeout(function(){c.forEach(function(e){var t;null!=(t=document.getElementById(n))&&t.appendChild(e)})}),e},p.appendElement=function(e,t){(t||document.body).appendChild(e)},p.getAllStylesAsText=function(e){var n="";return f(f([],l(document.getElementsByTagName("style")),!1),l(document.getElementsByTagName("link")),!1).forEach(function(e){return n+=e.outerHTML}),null!=e&&e.forEach(function(e){var t;e.type==ue.Text?((t=document.createElement("style")).appendChild(document.createTextNode(e.value)),n+=t.outerHTML):e.type==ue.Url&&((t=document.createElement("link")).rel="stylesheet",t.href=e.value,n+=t.outerHTML)}),n};var d=p;function p(){}Me.AddPublicApis=function(e){this.PublicApis=e},Me.exposeApis=function(){var e=Object.getOwnPropertyNames(window.MSFTConsent).filter(function(e){return"function"==typeof e}),t=Object.getOwnPropertyNames(this.PublicApis);e.forEach(function(e){t.includes(e)&&a.warn("Already existing Public Api with the same name '".concat(e,"'"))}),Object.defineProperties(window.MSFTConsent,Object.getOwnPropertyDescriptors(this.PublicApis))};e=Me;function Me(){}var Ee=Object.freeze({__proto__:null,Constants:{OFF:"0",ON:"1",COOKIE_NAME:"APCC",ConsentConfig:"MicrosoftConsentConfig"}}),Pe=(Oe.topologicalSort=function(e){var n=this,o=this.getAdjacencyList(e),r={};return Object.keys(o).reduce(function(e,t){return e.concat(n.dfs(t,o,r))},[])},Oe.dfs=function(e,n,o,r){var t,i=this;if((r=void 0===r?{}:r)[e])throw new Error("Circular dependency found!");return o[e]?[]:(r[e]=!0,t=(null==(t=n[e])?void 0:t.reduce(function(e,t){return e.concat(i.dfs(t,n,o,r))},[]))||[],o[e]=!0,r[e]=!1,t.concat(e))},Oe.getAdjacencyList=function(e){var n={};return e.forEach(function(e){var e=l(e,2),t=e[0],e=e[1];n[t]=n[t]||[],(t=n[t]).push.apply(t,f([],l(e),!1))}),n},Oe);function Oe(){}var De={Translation:function(e,t){var n;a.info("fetch translation callback invoked",{noticeName:e,translation:t}),window.__MSFT_SDK.Store.reducers.setTranslations(f(f([],l(window.__MSFT_SDK.Store.getters.translations||[]),!1),[((n={})[e]=t.translations,n)],!1))},Model:function(e){a.info("fetch model callback invoked",{val:e}),window.__MSFT_SDK.Store.reducers.setCurrentModel(e)},Template:function(e){a.info("fetch template callback invoked",{val:e}),window.__MSFT_SDK.Store.reducers.setTemplate(e)},Question:function(e){a.info("fetch questions callback invoked",{val:e}),window.__MSFT_SDK.Store.reducers.setQuestions(f(f([],l(window.__MSFT_SDK.Store.getters.questions),!1),[e],!1))}},Ae=function(){var e;return{fields:{packageId:null==(e=window.__MSFT_SDK.config)?void 0:e.id,modelId:(null==(e=c.getters.selectedCoreModel)?void 0:e.id)||"",lcid:c.getters.lcid,sdkRootPath:(null==(e=c.getters.config.initConfig)?void 0:e.assetPath)||(null==(e=c.getters.selectedCoreModel)?void 0:e.assetsPath)||"",jsRootPath:(null==(e=c.getters.config.initConfig)?void 0:e.jsPath)||(null==(e=c.getters.selectedCoreModel)?void 0:e.assetsPath)||"",modelVersion:(null==(e=c.getters.selectedCoreModel)?void 0:e.version.toString())||"0",packageVersion:"latest"},modules:f([{module:t.CONFIG,source:{type:i.VARIABLE,value:"config.js"},dependency:[],callback:function(){window.__MSFT_SDK.EventBus.trigger(window.__MSFT_SDK.enums.Events.ConfigReady)},condition:function(){return!(c.getters.isPreviewMode||c.getters.isLivePreviewMode)},configs:f(f(f([],l((null==(e=c.getters.selectedCoreModel)?void 0:e.kind)===me.WebConsentModel?null==(e=c.getters.selectedCoreModel)?void 0:e.trackerCategories.map(function(t){return{source:{type:i.PATH,value:"$sdkRootPath/msft-privacy/packages/$packageId/$packageVersion/models/$modelId/translations/".concat(t.id,"/$lcid.json")},callback:function(e){return De.Translation(t.id,e)}}}):[]),!1),[{source:{type:i.PATH,value:"$sdkRootPath/msft-privacy/packages/$packageId/$packageVersion/models/$modelId/translations/model/$lcid.json"},callback:function(e){return De.Translation("model",e)}},{source:{type:i.PATH,value:"$sdkRootPath/msft-privacy/packages/$packageId/$packageVersion/models/$modelId/model.json"},callback:De.Model},{source:{type:i.PATH,value:"$sdkRootPath/msft-privacy/packages/$packageId/$packageVersion/models/$modelId/templates/".concat(null==(e=c.getters.selectedCoreModel)?void 0:e.layout.name,"/template.json")},callback:De.Template}],!1),l((null==(e=c.getters.selectedCoreModel)?void 0:e.kind)===me.QuestionModel?f(f([],l(null==(e=c.getters.selectedCoreModel)?void 0:e.questions.map(function(t){return{source:{type:i.PATH,value:"$sdkRootPath/msft-privacy/packages/$packageId/$packageVersion/models/$modelId/translations/".concat(t,"/$lcid.json")},callback:function(e){return De.Translation(t,e)}}})),!1),l(null==(e=c.getters.selectedCoreModel)?void 0:e.questions.map(function(e){return{source:{type:i.PATH,value:"$sdkRootPath/msft-privacy/packages/$packageId/$packageVersion/models/$modelId/questions/".concat(e,"/1/question.json")},callback:function(e){return De.Question(e)}}})),!1):[]),!1)},{module:t.PRESENTATION,source:c.getters.isPreviewMode?{type:i.VARIABLE,value:c.getters.presentationVariable}:{type:i.PATH,value:L.PRESENTATION},condition:function(){return!c.getters.isHeadless},dependency:f([t.HANDLEBAR,t.CONFIG,t.PROXY],l((null==(e=c.getters.selectedCoreModel)?void 0:e.kind)===me.QuestionModel?[t.DSR]:[]),!1)},{module:t.HANDLEBAR,source:c.getters.isPreviewMode?{type:i.VARIABLE,value:c.getters.handlebarVariable}:{type:i.PATH,value:L.HANDLEBAR},condition:function(){return!c.getters.isHeadless},dependency:[]},{module:t.PREVIEW,source:{type:i.PATH,value:L.PREVIEW},condition:function(){return c.getters.isLivePreviewMode},dependency:[]},{module:t.PROXY,source:c.getters.isPreviewMode?{type:i.VARIABLE,value:c.getters.proxyVariable}:{type:i.PATH,value:L.PROXY},callback:function(e){window.__MSFT_SDK.Store.reducers.setProxyJS(e)},dependency:[]}],l((null==(e=c.getters.selectedCoreModel)?void 0:e.kind)===me.QuestionModel?[{module:t.DSR,source:c.getters.isPreviewMode?{type:i.VARIABLE,value:c.getters.dsrVariable}:{type:i.PATH,value:L.DSR},dependency:[]}]:[]),!1)}},ke=(Fe.deferred=function(){var n={};return n.promise=new Promise(function(e,t){n.resolve=e,n.reject=t}),n},Fe);function Fe(){}je.addScriptToDOM=function(e){var t=ke.deferred(),n=document.createElement("script");return n.type="text/javascript",n.appendChild(document.createTextNode(e)),n.onload=function(){return t.resolve()},n.onerror=function(){return t.reject()},document.body?document.body.appendChild(n):window.addEventListener("DOMContentLoaded",function(){document.body.appendChild(n)}),t.promise};var Ie=je;function je(){}xe.fetch=function(r){return s(this,void 0,void 0,function(){var t,n,o;return u(this,function(e){return t=ke.deferred(),n=t.promise,o=t.resolve,window.__MSFT_SDK.EventBus.trigger(ie.FetchConfig,{path:r,callback:function(e){o(e.data)}}),[2,n]})})};var Re=xe;function xe(){}Ke.fetch=function(t){return s(this,void 0,void 0,function(){return u(this,function(e){try{return[2,this.exponentialRetry(function(){return fetch(t).then(function(e){if(e.ok)return e;throw new Error(e.statusText)})})]}catch(e){a.error("Unable to fetch asset '".concat(t,"'"))}return[2]})})},Ke.exponentialRetry=function(i,c){return void 0===c&&(c=0),s(this,void 0,void 0,function(){var t,n,o,r=this;return u(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,i()];case 1:return[2,e.sent()];case 2:if(t=e.sent(),(n=c+1)<this.MAX_RETRY_COUNT)return o=ke.deferred(),setTimeout(function(){r.exponentialRetry(i,n).then(function(){return o.resolve()}).catch(function(){return o.reject()})},this.EXPONENTIAL_DELAY_FACTOR_IN_MS*n),[2,o.promise];throw t;case 3:return[2]}})})},Ke.MAX_RETRY_COUNT=3,Ke.EXPONENTIAL_DELAY_FACTOR_IN_MS=250;var Ne=Ke;function Ke(){}Le.fetchWrapper=function(n,o){var r;return s(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return o?[4,Re.fetch(n)]:[3,2];case 1:return[2,e.sent()];case 2:return[4,Ne.fetch(n)];case 3:return[4,null==(t=e.sent())?void 0:t.text()];case 4:return[2,null!=(r=e.sent())?r:""]}})})};var g=Le;function Le(e,t){this.source=e,this.value="",this.callback=t}N(Ve,Be=g),Ve.prototype.fetch=function(){return s(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return(a.info("Fetching js module",this.source),this.source.type!==i.VARIABLE)?[3,1]:(this.value=window[this.source.value],[3,3]);case 1:return t=this,[4,Ve.fetchWrapper(this.source.value,this.source.fetchUsingEvent)];case 2:t.value=e.sent(),e.label=3;case 3:return[2]}})})},Ve.prototype.addToDOM=function(){return Ie.addScriptToDOM(this.value)},Ve.prototype.execute=function(){return this.callback?(this.callback(this.value),Promise.resolve()):this.addToDOM()};var Be,$e=Ve;function Ve(e,t){return Be.call(this,e,t)||this}N(We,He=g),We.prototype.fetch=function(){var r;return s(this,void 0,void 0,function(){var t,n,o;return u(this,function(e){switch(e.label){case 0:return(a.info("Fetching json module",this.source),this.source.type!==i.VARIABLE)?[3,1]:(this.value=window[this.source.value],[3,4]);case 1:return e.trys.push([1,3,,4]),t=this,o=(n=JSON).parse,[4,We.fetchWrapper(this.source.value,this.source.fetchUsingEvent)];case 2:return t.value=o.apply(n,[e.sent()]),[3,4];case 3:return e.sent(),a.error("Error in fetching : ".concat(null==(r=this.source)?void 0:r.value)),[3,4];case 4:return[2]}})})},We.prototype.execute=function(){return this.callback&&this.value?(this.callback(this.value),Promise.resolve()):Promise.reject(new Error("Callback not provided"))};var He,Ue=We;function We(e,t){return He.call(this,e,t)||this}ze.resolveDependencies=function(){return s(this,void 0,void 0,function(){var t,n,o;return u(this,function(e){switch(e.label){case 0:return o=this.getModuleMapAndDependency(),t=o.moduleMap,o=o.moduleDependency,n=this.fetchAllAssets(t),o=Pe.topologicalSort(o),a.info("dependencies execution sequence",o),[4,Promise.all(n)];case 1:return e.sent(),o.forEach(function(e){t[e]&&t[e].forEach(function(e){return e.execute()})}),[2]}})})},ze.fetchAllAssets=function(e){var t=[];return Object.values(e).forEach(function(e){e.forEach(function(e){t.push(e.fetch())})}),t},ze.getModuleMapAndDependency=function(){var c=this,s={},u=[],e=Ae(),a=e.fields;return e.modules.forEach(function(e){var t=e.module,n=e.source,o=e.configs,r=e.condition,i=e.dependency,e=e.callback;r&&!r()||(s[t]=f([],l(c.getModuleTypeInstances({source:n,callback:e,fields:a})),!1),u.push([t,i||[]]),o&&(s["".concat(t,".configs")]=o.reduce(function(e,t){return e.concat(c.getModuleTypeInstances(K(K({},t),{fields:a})))},[]),u.push([t,["".concat(t,".configs")]])))}),{moduleMap:s,moduleDependency:u}},ze.getModuleTypeInstances=function(e){var t=e.source,n=e.callback,e=e.fields;if(void 0===t)return[];var o=[],r=t.value.split(".").pop();return t.type===i.PATH?this.resolvePathFields({path:t.value,fields:e}).forEach(function(e){ze.addModuleResolver({value:e,type:i.PATH,fetchUsingEvent:t.fetchUsingEvent},o,r,n)}):ze.addModuleResolver(t,o,r,n),o},ze.addModuleResolver=function(e,t,n,o){switch(n){case"js":t.push(new $e(e,o));break;case"json":o?t.push(new Ue(e,o)):a.error("No callback provided for json asset with ".concat(e.type," '").concat(e.value,"'. Skipping it."));break;default:a.error("Cannot resolve dependency. Unknown extension identified for ".concat(e.type," '").concat(e.value,"'"))}},ze.resolvePathFields=function(e){var t=e.path,r=e.fields,e=f([],l(t.matchAll(/\$(\w+)/g)),!1),i=[t];return e.forEach(function(n){var e=r[n[1]],e=Array.isArray(e)?e:[e],o=[];e.forEach(function(t){i.forEach(function(e){o.push(e.replace(n[0],t))})}),i=o}),i};var Ye=ze;function ze(){}function Ge(e){return e&&e.Math==Math&&e}function v(e){try{return!!e()}catch(e){return!0}}function Qe(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}function qe(e){return At(Dt(e),8,-1)}function Xe(e){return null==e}function Je(e){if(jt(e))throw Rt("Can't call method on "+e);return e}function Ze(e){return xt(Nt(e))}function et(e,t){return arguments.length<2?(n=$t[e],Vt(n)?n:void 0):$t[e]&&$t[e][t];var n}function tt(e){try{return Qt(e)}catch(e){return"Object"}}function nt(e,t){return e=e[t],en(e)?void 0:Zt(e)}function ot(t,n){try{sn(cn,t,{value:n,configurable:!0,writable:!0})}catch(e){cn[t]=n}return n}function rt(e){return ln(an(e))}function it(e){return"Symbol("+(void 0===e?"":e)+")_"+hn(++gn+vn,36)}function h(e){var t;return mn(_n,e)&&(bn||"string"==typeof _n[e])||(t="Symbol."+e,bn&&mn(Cn,e)?_n[e]=Cn[e]:_n[e]=(wn&&Tn?Tn:Mn)(t)),_n[e]}function ct(e){return e=In(e,"string"),jn(e)?e:e+""}function st(e){return xn?Rn.createElement(e):{}}function ut(e){if(Yn(e))return e;throw Gn(zn(e)+" is not an object")}function at(e){return uo[e]||(uo[e]=so(e))}function lt(e,t,n,o){var r=(o=o||{}).enumerable,i=void 0!==o.name?o.name:t;if(Po(n)&&Do(n,i,o),o.global)r?e[t]=n:Ao(t,n);else{try{o.unsafe?e[t]&&(r=!0):delete e[t]}catch(e){}r?e[t]=n:Oo.f(e,t,{value:n,enumerable:!1,configurable:!o.nonConfigurable,writable:!o.nonWritable})}return e}function ft(e){return(e=+e)!=e||0==e?0:Io(e)}function dt(e){return 0<e?Ko(No(e),9007199254740991):0}function pt(s){return function(e,t,n){var o,r=Bo(e),i=Vo(r),c=$o(n,i);if(s&&t!=t){for(;c<i;)if((o=r[c++])!=o)return!0}else for(;c<i;c++)if((s||c in r)&&r[c]===t)return s||c||0;return!s&&-1}}function gt(e,t){var n,o=Uo(e),r=0,i=[];for(n in o)!Ho(Yo,n)&&Ho(o,n)&&zo(i,n);for(;t.length>r;)!Ho(o,n=t[r++])||~Wo(i,n)||zo(i,n);return i}function vt(e,t){return(e=ur[sr(e)])==lr||e!=ar&&(ir(t)?rr(t):!!t)}function ht(e,t){var n,o,r,i=e.target,c=e.global,s=e.stat,u=c?fr:s?fr[i]||vr(i,{}):(fr[i]||{}).prototype;if(u)for(n in t){if(o=t[n],r=e.dontCallGetSet?(r=dr(u,n))&&r.value:u[n],!yr(c?n:i+(s?".":"#")+n,e.forced)&&void 0!==r){if(typeof o==typeof r)continue;hr(o,r)}(e.sham||r&&r.sham)&&pr(o,"sham",!0),gr(u,n,o,e)}}function yt(e){if("Symbol"===Cr(e))throw TypeError("Cannot convert a Symbol value to a string");return Tr(e)}function mt(){var e=Mr(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}var St,bt,wt,_t,g="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},g=Ge("object"==typeof globalThis&&globalThis)||Ge("object"==typeof window&&window)||Ge("object"==typeof self&&self)||Ge("object"==typeof g&&g)||function(){return this}()||Function("return this")(),y={},Ct=!v(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),Tt=!v(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}),Mt=Function.prototype.call,Et=Tt?Mt.bind(Mt):function(){return Mt.apply(Mt,arguments)},m={},S={}.propertyIsEnumerable,Pt=Object.getOwnPropertyDescriptor,b=Pt&&!S.call({1:2},1),b=(m.f=b?function(e){e=Pt(this,e);return!!e&&e.enumerable}:S,Tt),S=Function.prototype,Ot=S.call,S=b&&S.bind.bind(Ot,Ot),b=b?S:function(e){return function(){return Ot.apply(e,arguments)}},S=b,Dt=S({}.toString),At=S("".slice),S=v,kt=qe,Ft=Object,It=b("".split),S=S(function(){return!Ft("z").propertyIsEnumerable(0)})?function(e){return"String"==kt(e)?It(e,""):Ft(e)}:Ft,jt=Xe,Rt=TypeError,xt=S,Nt=Je,S="object"==typeof document&&document.all,S={all:S,IS_HTMLDDA:void 0===S&&void 0!==S},Kt=S.all,w=S.IS_HTMLDDA?function(e){return"function"==typeof e||e===Kt}:function(e){return"function"==typeof e},Lt=w,Bt=S.all,S=S.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:Lt(e)||e===Bt}:function(e){return"object"==typeof e?null!==e:Lt(e)},$t=g,Vt=w,Ht=b({}.isPrototypeOf),_=et("navigator","userAgent")||"",C=g.process,T=g.Deno,C=C&&C.versions||T&&T.version,T=C&&C.v8,Ut=(E=!(E=T?0<(M=T.split("."))[0]&&M[0]<4?1:+(M[0]+M[1]):E)&&_&&(!(M=_.match(/Edge\/(\d+)/))||74<=M[1])&&(M=_.match(/Chrome\/(\d+)/))?+M[1]:E,E),C=v,T=!!Object.getOwnPropertySymbols&&!C(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Ut&&Ut<41}),_=T&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Wt=et,Yt=w,zt=Ht,Gt=Object,M=_?function(e){return"symbol"==typeof e}:function(e){var t=Wt("Symbol");return Yt(t)&&zt(t.prototype,Gt(e))},Qt=String,qt=w,Xt=tt,Jt=TypeError,Zt=function(e){if(qt(e))return e;throw Jt(Xt(e)+" is not a function")},en=Xe,tn=Et,nn=w,on=S,rn=TypeError,E={exports:{}},cn=g,sn=Object.defineProperty,C=ot,P="__core-js_shared__",C=g[P]||C(P,{}),un=C,an=((E.exports=function(e,t){return un[e]||(un[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.26.1",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.26.1/LICENSE",source:"https://github.com/zloirock/core-js"}),Je),ln=Object,fn=rt,dn=b({}.hasOwnProperty),P=Object.hasOwn||function(e,t){return dn(fn(e),t)},pn=b,gn=0,vn=Math.random(),hn=pn(1..toString),pn=g,yn=E.exports,mn=P,Sn=it,bn=T,wn=_,_n=yn("wks"),Cn=pn.Symbol,Tn=Cn&&Cn.for,Mn=wn?Cn:Cn&&Cn.withoutSetter||Sn,En=Et,Pn=S,On=M,Dn=nt,An=function(e,t){var n,o;if("string"===t&&nn(n=e.toString)&&!on(o=tn(n,e)))return o;if(nn(n=e.valueOf)&&!on(o=tn(n,e)))return o;if("string"!==t&&nn(n=e.toString)&&!on(o=tn(n,e)))return o;throw rn("Can't convert object to primitive value")},kn=TypeError,Fn=h("toPrimitive"),In=function(e,t){if(!Pn(e)||On(e))return e;var n=Dn(e,Fn);if(n){if(n=En(n,e,t=void 0===t?"default":t),!Pn(n)||On(n))return n;throw kn("Can't convert object to primitive value")}return An(e,t=void 0===t?"number":t)},jn=M,T=S,Rn=g.document,xn=T(Rn)&&T(Rn.createElement),Nn=st,_=!Ct&&!v(function(){return 7!=Object.defineProperty(Nn("div"),"a",{get:function(){return 7}}).a}),Kn=Et,Ln=m,Bn=Qe,$n=Ze,Vn=ct,Hn=P,Un=_,Wn=Object.getOwnPropertyDescriptor,yn=(y.f=Ct?Wn:function(e,t){if(e=$n(e),t=Vn(t),Un)try{return Wn(e,t)}catch(e){}if(Hn(e,t))return Bn(!Kn(Ln.f,e,t),e[t])},{}),pn=Ct&&v(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),Yn=S,zn=String,Gn=TypeError,Qn=_,qn=ut,Xn=ct,Jn=TypeError,Zn=Object.defineProperty,eo=Object.getOwnPropertyDescriptor,to="enumerable",no="configurable",oo="writable",Sn=(yn.f=Ct?pn?function(e,t,n){var o;return qn(e),t=Xn(t),qn(n),"function"==typeof e&&"prototype"===t&&"value"in n&&oo in n&&!n[oo]&&((o=eo(e,t))&&o[oo]&&(e[t]=n.value,n={configurable:(no in n?n:o)[no],enumerable:(to in n?n:o)[to],writable:!1})),Zn(e,t,n)}:Zn:function(e,t,n){if(qn(e),t=Xn(t),qn(n),Qn)try{return Zn(e,t,n)}catch(e){}if("get"in n||"set"in n)throw Jn("Accessors not supported");return"value"in n&&(e[t]=n.value),e},Ct),ro=yn,io=Qe,M=Sn?function(e,t,n){return ro.f(e,t,io(1,n))}:function(e,t,n){return e[t]=n,e},T={exports:{}},m=Ct,_=P,Sn=Function.prototype,O=m&&Object.getOwnPropertyDescriptor,_=_(Sn,"name"),_={EXISTS:_,PROPER:_&&"something"===function(){}.name,CONFIGURABLE:_&&(!m||O(Sn,"name").configurable)},m=w,O=C,co=b(Function.toString),Sn=(m(O.inspectSource)||(O.inspectSource=function(e){return co(e)}),O.inspectSource),m=w,O=g.WeakMap,m=m(O)&&/native code/.test(String(O)),O=E.exports,so=it,uo=O("keys"),O={},ao=S,lo=M,fo=P,D=at,po=O,go="Object already initialized",vo=g.TypeError,A=g.WeakMap,ho=m||C.state?((wt=C.state||(C.state=new A)).get=wt.get,wt.has=wt.has,wt.set=wt.set,St=function(e,t){if(wt.has(e))throw vo(go);return t.facade=e,wt.set(e,t),t},bt=function(e){return wt.get(e)||{}},function(e){return wt.has(e)}):(po[_t=D("state")]=!0,St=function(e,t){if(fo(e,_t))throw vo(go);return t.facade=e,lo(e,_t,t),t},bt=function(e){return fo(e,_t)?e[_t]:{}},function(e){return fo(e,_t)}),m={set:St,get:bt,has:ho,enforce:function(e){return ho(e)?bt(e):St(e,{})},getterFor:function(t){return function(e){if(ao(e)&&(e=bt(e)).type===t)return e;throw vo("Incompatible receiver, "+t+" required")}}},C=v,yo=w,mo=P,So=Ct,bo=_.CONFIGURABLE,wo=Sn,_o=m.enforce,Co=m.get,To=Object.defineProperty,Mo=So&&!C(function(){return 8!==To(function(){},"length",{value:8}).length}),Eo=String(String).split("String"),A=T.exports=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!mo(e,"name")||bo&&e.name!==t)&&(So?To(e,"name",{value:t,configurable:!0}):e.name=t),Mo&&n&&mo(n,"arity")&&e.length!==n.arity&&To(e,"length",{value:n.arity});try{n&&mo(n,"constructor")&&n.constructor?So&&To(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}n=_o(e);return mo(n,"source")||(n.source=Eo.join("string"==typeof t?t:"")),e},Po=(Function.prototype.toString=A(function(){return yo(this)&&Co(this).source||wo(this)},"toString"),w),Oo=yn,Do=T.exports,Ao=ot,po={},ko=Math.ceil,Fo=Math.floor,Io=Math.trunc||function(e){e=+e;return(0<e?Fo:ko)(e)},jo=ft,Ro=Math.max,xo=Math.min,No=ft,Ko=Math.min,Lo=dt,Bo=Ze,$o=function(e,t){e=jo(e);return e<0?Ro(e+t,0):xo(e,t)},Vo=function(e){return Lo(e.length)},D={includes:pt(!0),indexOf:pt(!1)},_=b,Ho=P,Uo=Ze,Wo=D.indexOf,Yo=O,zo=_([].push),C=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Go=gt,Qo=C.concat("length","prototype"),A=(po.f=Object.getOwnPropertyNames||function(e){return Go(e,Qo)},{}),T=(A.f=Object.getOwnPropertySymbols,et),qo=po,Xo=A,Jo=ut,Zo=b([].concat),D=T("Reflect","ownKeys")||function(e){var t=qo.f(Jo(e)),n=Xo.f;return n?Zo(t,n(e)):t},er=P,tr=D,nr=y,or=yn,rr=v,ir=w,cr=/#|\.prototype\./,sr=vt.normalize=function(e){return String(e).replace(cr,".").toLowerCase()},ur=vt.data={},ar=vt.NATIVE="N",lr=vt.POLYFILL="P",fr=g,dr=y.f,pr=M,gr=lt,vr=ot,hr=function(e,t,n){for(var o=tr(t),r=or.f,i=nr.f,c=0;c<o.length;c++){var s=o[c];er(e,s)||n&&er(n,s)||r(e,s,i(t,s))}},yr=vt,_={},po=(_[h("toStringTag")]="z","[object z]"===String(_)),A=po,mr=w,Sr=qe,br=h("toStringTag"),wr=Object,_r="Arguments"==Sr(function(){return arguments}()),T=A?Sr:function(e){var t;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(t=function(e,t){try{return e[t]}catch(e){}}(e=wr(e),br))?t:_r?Sr(e):"Object"==(t=Sr(e))&&mr(e.callee)?"Arguments":t},Cr=T,Tr=String,Mr=ut,D=v,Er=g.RegExp,y=D(function(){var e=Er("a","y");return e.lastIndex=2,null!=e.exec("abcd")}),_=y||D(function(){return!Er("a","y").sticky}),A={BROKEN_CARET:y||D(function(){var e=Er("^r","gy");return e.lastIndex=2,null!=e.exec("str")}),MISSED_STICKY:_,UNSUPPORTED_Y:y},D={},Pr=gt,Or=C,_=Object.keys||function(e){return Pr(e,Or)},Dr=yn,Ar=ut,kr=Ze,Fr=_;D.f=Ct&&!pn?Object.defineProperties:function(e,t){Ar(e);for(var n,o=kr(t),r=Fr(t),i=r.length,c=0;c<i;)Dr.f(e,n=r[c++],o[n]);return e};function Ir(){}function jr(e){e.write(Zr("")),e.close();var t=e.parentWindow.Object;return e=null,t}function Rr(e){if("Function"===bi(e))return wi(e)}function xr(r){return function(e,t){var n,e=ki(Fi(e)),t=Ai(t),o=e.length;return t<0||o<=t?r?"":void 0:(n=ji(e,t))<55296||56319<n||t+1===o||(o=ji(e,t+1))<56320||57343<o?r?Ii(e,t):n:r?Ri(e,t,t+2):o-56320+(n-55296<<10)+65536}}function Nr(e,t,n){return t+(n?xi(e,t).length:1)}function Kr(i,c,s,u,a,e){var l=s+i.length,f=u.length,t=Hi;return void 0!==a&&(a=Ni(a),t=Vi),Bi(e,t,function(e,t){var n;switch(Li(t,0)){case"$":return"$";case"&":return i;case"`":return $i(c,0,s);case"'":return $i(c,l);case"<":n=a[$i(t,1,-1)];break;default:var o,r=+t;if(0==r)return e;if(f<r)return 0!==(o=Ki(r/10))&&o<=f?void 0===u[o-1]?Li(t,1):u[o-1]+Li(t,1):e;n=u[r-1]}return void 0===n?"":n})}function Lr(e,t){var n=e.exec;if(Yi(n))return null!==(n=Ui(n,e,t))&&Wi(n),n;if("RegExp"===zi(e))return Ui(Gi,e,t);throw Qi("RegExp#exec called on incompatible receiver")}function Br(e){var t;return yc(e)&&(void 0!==(t=e[Sc])?!!t:"RegExp"==mc(e))}function $r(e){var t=e.flags;return void 0!==t||"flags"in Tc||wc(e,"flags")||!_c(Tc,e)?t:bc(Cc,e)}function Vr(e,t,n){return n>e.length?-1:""===t?n:xc(e,t,n)}function Hr(e,t){return Bc(Lc[e].prototype[t])}var Ur,y=et("document","documentElement"),Wr=ut,Yr=D,zr=C,_=O,Gr=y,Qr=st,qr="prototype",Xr="script",Jr=at("IE_PROTO"),Zr=function(e){return"<"+Xr+">"+e+"</"+Xr+">"},ei=function(){try{Ur=new ActiveXObject("htmlfile")}catch(e){}ei="undefined"==typeof document||document.domain&&Ur?jr(Ur):(e=Qr("iframe"),t="java"+Xr+":",e.style.display="none",Gr.appendChild(e),e.src=String(t),(t=e.contentWindow.document).open(),t.write(Zr("document.F=Object")),t.close(),t.F);for(var e,t,n=zr.length;n--;)delete ei[qr][zr[n]];return ei()},Ct=(_[Jr]=!0,Object.create||function(e,t){var n;return null!==e?(Ir[qr]=Wr(e),n=new Ir,Ir[qr]=null,n[Jr]=e):n=ei(),void 0===t?n:Yr.f(n,t)}),pn=v,ti=g.RegExp,D=pn(function(){var e=ti(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}),C=v,ni=g.RegExp,O=C(function(){var e=ni("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}),oi=Et,y=b,ri=yt,ii=mt,_=A,pn=E.exports,ci=Ct,si=m.get,C=D,A=O,ui=pn("native-string-replace",String.prototype.replace),ai=RegExp.prototype.exec,li=ai,fi=y("".charAt),di=y("".indexOf),pi=y("".replace),gi=y("".slice),vi=(E=/b*/g,oi(ai,D=/a/,"a"),oi(ai,E,"a"),0!==D.lastIndex||0!==E.lastIndex),hi=_.BROKEN_CARET,yi=void 0!==/()??/.exec("")[1],O=li=vi||yi||hi||C||A?function(e){var t,n,o,r,i,c,s=this,u=si(s),e=ri(e),a=u.raw;if(a)return a.lastIndex=s.lastIndex,f=oi(li,a,e),s.lastIndex=a.lastIndex,f;var l=u.groups,a=hi&&s.sticky,f=oi(ii,s),u=s.source,d=0,p=e;if(a&&(f=pi(f,"y",""),-1===di(f,"g")&&(f+="g"),p=gi(e,s.lastIndex),0<s.lastIndex&&(!s.multiline||s.multiline&&"\n"!==fi(e,s.lastIndex-1))&&(u="(?: "+u+")",p=" "+p,d++),t=new RegExp("^(?:"+u+")",f)),yi&&(t=new RegExp("^"+u+"$(?!\\s)",f)),vi&&(n=s.lastIndex),o=oi(ai,a?t:s,p),a?o?(o.input=gi(o.input,d),o[0]=gi(o[0],d),o.index=s.lastIndex,s.lastIndex+=o[0].length):s.lastIndex=0:vi&&o&&(s.lastIndex=s.global?o.index+o[0].length:n),yi&&o&&1<o.length&&oi(ui,o[0],t,function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(o[r]=void 0)}),o&&l)for(o.groups=i=ci(null),r=0;r<l.length;r++)i[(c=l[r])[0]]=o[c[1]];return o}:li,pn=(ht({target:"RegExp",proto:!0,forced:/./.exec!==O},{exec:O}),Tt),y=Function.prototype,mi=y.apply,Si=y.call,D="object"==typeof Reflect&&Reflect.apply||(pn?Si.bind(mi):function(){return Si.apply(mi,arguments)}),bi=qe,wi=b,_i=Rr,Ci=lt,Ti=O,Mi=v,Ei=h,Pi=M,Oi=Ei("species"),Di=RegExp.prototype,E=b,Ai=ft,ki=yt,Fi=Je,Ii=E("".charAt),ji=E("".charCodeAt),Ri=E("".slice),xi={codeAt:xr(!1),charAt:xr(!0)}.charAt,_=b,Ni=rt,Ki=Math.floor,Li=_("".charAt),Bi=_("".replace),$i=_("".slice),Vi=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Hi=/\$([$&'`]|\d{1,2})/g,Ui=Et,Wi=ut,Yi=w,zi=qe,Gi=O,Qi=TypeError,qi=D,Xi=Et,C=b,A=function(n,e,t,o){var c,r=Ei(n),s=!Mi(function(){var e={};return e[r]=function(){return 7},7!=""[n](e)}),i=s&&!Mi(function(){var e=!1,t=/a/;return"split"===n&&((t={constructor:{}}).constructor[Oi]=function(){return t},t.flags="",t[r]=/./[r]),t.exec=function(){return e=!0,null},t[r](""),!e});s&&i&&!t||(c=_i(/./[r]),i=e(r,""[n],function(e,t,n,o,r){var e=_i(e),i=t.exec;return i===Ti||i===Di.exec?s&&!r?{done:!0,value:c(t,n,o)}:{done:!0,value:e(n,t,o)}:{done:!1}}),Ci(String.prototype,n,i[0]),Ci(Di,r,i[1])),o&&Pi(Di[r],"sham",!0)},Tt=v,Ji=ut,Zi=w,ec=Xe,tc=ft,nc=dt,oc=yt,rc=Je,ic=Nr,cc=nt,sc=Kr,uc=Lr,ac=h("replace"),lc=Math.max,fc=Math.min,dc=C([].concat),pc=C([].push),gc=C("".indexOf),vc=C("".slice),y="$0"==="a".replace(/./,"$0"),hc=!!/./[ac]&&""===/./[ac]("a","$0"),yc=(A("replace",function(e,S,b){var w=hc?"$":"$0";return[function(e,t){var n=rc(this),o=ec(e)?void 0:cc(e,ac);return o?Xi(o,e,n,t):Xi(S,oc(n),e,t)},function(e,t){var n=Ji(this),o=oc(e);if("string"==typeof t&&-1===gc(t,w)&&-1===gc(t,"$<")){e=b(S,n,o,t);if(e.done)return e.value}for(var r,i=Zi(t),c=(i||(t=oc(t)),n.global),s=(c&&(r=n.unicode,n.lastIndex=0),[]);null!==(d=uc(n,o))&&(pc(s,d),c);)""===oc(d[0])&&(n.lastIndex=ic(o,nc(n.lastIndex),r));for(var u,a="",l=0,f=0;f<s.length;f++){for(var d,p=oc((d=s[f])[0]),g=lc(fc(tc(d.index),o.length),0),v=[],h=1;h<d.length;h++)pc(v,void 0===(u=d[h])?u:String(u));var y=d.groups,m=i?(m=dc([p],v,g,o),void 0!==y&&pc(m,y),oc(qi(t,void 0,m))):sc(p,o,g,v,y,t);l<=g&&(a+=vc(o,l,g)+m,l=g+p.length)}return a+vc(o,l)}]},!!Tt(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})||!y||hc),S),mc=qe,Sc=h("match"),bc=Et,wc=P,_c=Ht,Cc=mt,Tc=RegExp.prototype,pn=ht,Mc=Et,M=b,Ec=Je,Pc=w,Oc=Xe,Dc=Br,Ac=yt,kc=nt,Fc=$r,Ic=Kr,jc=h("replace"),Rc=TypeError,xc=M("".indexOf),Nc=(M("".replace),M("".slice)),Kc=Math.max,Lc=(pn({target:"String",proto:!0},{replaceAll:function(e,t){var n,o,r,i,c,s,u,a=Ec(this),l=0,f=0,d="";if(!Oc(e)){if(Dc(e)&&(n=Ac(Ec(Fc(e))),!~xc(n,"g")))throw Rc("`.replaceAll` does not allow non-global regexes");if(n=kc(e,jc))return Mc(n,e,a,t)}for(o=Ac(a),r=Ac(e),(i=Pc(t))||(t=Ac(t)),c=r.length,s=Kc(1,c),l=Vr(o,r,0);-1!==l;)u=i?Ac(t(r,l,o)):Ic(r,o,l,[],void 0,t),d+=Nc(o,f,l)+u,f=l+c,l=Vr(o,r,l+s);return f<o.length&&(d+=Nc(o,f)),d}}),g),Bc=b;Hr("String","replaceAll");var $c=T;po||lt(Object.prototype,"toString",po?{}.toString:function(){return"[object "+$c(this)+"]"},{unsafe:!0});var Vc,E=!v(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),Hc=P,Uc=w,Wc=rt,_=E,Yc=at("IE_PROTO"),zc=Object,Gc=zc.prototype,O=v,D=w,C=S,A=_?zc.getPrototypeOf:function(e){e=Wc(e);if(Hc(e,Yc))return e[Yc];var t=e.constructor;return Uc(t)&&e instanceof t?t.prototype:e instanceof zc?Gc:null},Tt=lt,Qc=h("iterator"),y=!1;[].keys&&("next"in(Ht=[].keys())?(M=A(A(Ht)))!==Object.prototype&&(Vc=M):y=!0);function qc(){return this}function Xc(){}function Jc(e){if(!us(e))return!1;try{return ds(Xc,fs,e),!0}catch(e){return!1}}function Zc(e){if(!us(e))return!1;switch(as(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return vs||!!gs(ps,ls(e))}catch(e){return!0}}D((Vc=!C(Vc)||O(function(){var e={};return Vc[Qc].call(e)!==e})?{}:Vc)[Qc])||Tt(Vc,Qc,function(){return this});var pn={IteratorPrototype:Vc,BUGGY_SAFARI_ITERATORS:y},es=yn.f,ts=P,ns=h("toStringTag"),os=pn.IteratorPrototype,rs=Ct,is=Qe,cs=function(e,t,n){(e=e&&!n?e.prototype:e)&&!ts(e,ns)&&es(e,ns,{configurable:!0,value:t})},ss={},g=b,po=v,us=w,as=T,ls=Sn,fs=[],ds=et("Reflect","construct"),ps=/^\s*(?:class|function)\b/,gs=g(ps.exec),vs=!ps.exec(Xc);Zc.sham=!0;function hs(e){var t=Ds(this),e=Os(e),n=js(t,RegExp),o=Os(Fs(t)),n=new n(n===RegExp?t.source:t,o),r=!!~Vs(o,"g"),o=!!~Vs(o,"u");return n.lastIndex=Ps(t.lastIndex),new Ws(n,e,r,o)}var ys=!ds||po(function(){var e;return Jc(Jc.call)||!Jc(Object)||!Jc(function(){e=!0})||e})?Zc:Jc,ms=tt,Ss=TypeError,bs=ut,ws=function(e){if(ys(e))return e;throw Ss(ms(e)+" is not a constructor")},_s=Xe,Cs=h("species"),E=ht,Ts=Et,S=Rr,_=function(e,t,n,o){t+=" Iterator";return e.prototype=rs(os,{next:is(+!o,n)}),cs(e,t,!1),ss[t]=qc,e},Ms=function(e,t){return{value:e,done:t}},Es=Je,Ps=dt,Os=yt,Ds=ut,As=Xe,ks=Br,Fs=$r,Is=nt,A=lt,Ht=v,js=function(e,t){var e=bs(e).constructor;return void 0===e||_s(e=bs(e)[Cs])?t:ws(e)},Rs=Nr,xs=Lr,M=m,Ns=h("matchAll"),D="RegExp String",Ks=D+" Iterator",Ls=M.set,Bs=M.getterFor(Ks),C=RegExp.prototype,$s=TypeError,Vs=S("".indexOf),Hs=S("".matchAll),Us=!!Hs&&!Ht(function(){Hs("a",/./)}),Ws=_(function(e,t,n,o){Ls(this,{type:Ks,regexp:e,string:t,global:n,unicode:o,done:!1})},D,function(){var e=Bs(this);if(e.done)return Ms(void 0,!0);var t=e.regexp,n=e.string,o=xs(t,n);return null===o?(e.done=!0,Ms(void 0,!0)):(e.global?""===Os(o[0])&&(t.lastIndex=Rs(n,Ps(t.lastIndex),e.unicode)):e.done=!0,Ms(o,!1))});E({target:"String",proto:!0,forced:Us},{matchAll:function(e){var t,n=Es(this);if(As(e)){if(Us)return Hs(n,e)}else{if(ks(e)&&(t=Os(Es(Fs(e))),!~Vs(t,"g")))throw $s("`.matchAll` does not allow non-global regexes");if(Us)return Hs(n,e);if(t=Is(e,Ns))return Ts(t,e,n)}return t=Os(n),new RegExp(e,"g")[Ns](t)}}),Ns in C||A(C,Ns,hs);Hr("String","matchAll"),window.__MSFT_SDK={EventBus:we,Logger:a,Store:c,Utils:{IFrameUtils:d,ObjectUtils:$},enums:n,constants:Ee,Helpers:e,config:(null==(O=window.__MSFT_SDK)?void 0:O.config)||null,initConsent:_e.initConsent,debug:function(){return{events:window.__MSFT_SDK.Store.getters.debugInfo.events,logs:window.__MSFT_SDK.Store.getters.debugInfo.logs,state:window.__MSFT_SDK.Store.getters.state}}},window.MSFTConsent=r,we.on(ce.CoreConsentModelSelected,function(){Ye.resolveDependencies()}),zs.ConvertToMilliseconds=function(e){switch(e.unit){case ge.day:return 864e5*e.value;case ge.week:return 864e5*e.value*7;case ge.month:return 864e5*e.value*30;case ge.year:return 864e5*e.value*365;default:return a.error("Invalid unit for interval : ".concat(e.unit)),e.value}};var Ys=zs;function zs(){}k.encodeConsent=function(e,t){a.info("encoding consent",{consent:e,model:t});var n=e.preferences,e="".concat(k.CONSENTVERSION,"=")+t.consentVersion.toString()+"%",e=(e+="".concat(k.CONSENTID,"=")+t.consentId+"%")+Object.keys(n).map(function(e){return"".concat(e,"=").concat(n[e]===ae.ON?ae.ON:ae.OFF)}).join("%");return a.info("encoded consent string: ".concat(e)),e},k.decodeConsentString=function(e){a.info("decoding consent string: ".concat(e));var n={};return e.split("%").forEach(function(e){var t,e=e.split("=");2===e.length&&(t=e[0],e=e[1],t!==k.CONSENTVERSION&&t!==k.CONSENTID&&(n[t]=e))}),a.info("decoded consent",{preferences:n}),{preferences:n}},k.getVersionFromString=function(e){var t=e.match(/consentVersion=([\d.]+)%/);if(null==t)return-1;t=parseInt(t[1]);return isNaN(t)?-1:(a.info("getVersionString str: ".concat(e," found consentVersion: ").concat(t)),t)},k.getModelIdFromString=function(e){var t=e.match(/consentId=([^%]+)%/);if(null!=t)return a.info("getModelIdFromString str: ".concat(e," found version: ").concat(t[1])),t[1]},k.CONSENTVERSION="consentVersion",k.CONSENTID="consentId";var Gs=k;function k(){}qs.getUserCountryOrRegion=function(){return s(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return t=window.__MSFT_SDK.Store.getters.CdnEndpoint,[4,fetch(t).then(function(e){e=null==(e=e.headers.get("country"))?void 0:e.toLowerCase();return window.__MSFT_SDK.Store.reducers.setGeolocation(e),e})];case 1:return[2,e.sent()]}})})};var Qs=qs;function qs(){}var Tt=function(e){this.state=e||{config:{sdkConfig:window.__MSFT_SDK.config},custom:{lcid:"",proxyJS:"",languageBlockList:[],lcidList:[],templateData:{}}}},Xs=(Js.get=function(){return document.cookie},Js.getItem=function(t){return a.info("get cookie key: ".concat(t)),document.cookie.split("; ").find(function(e){return e.startsWith("".concat(t,"="))})||""},Js.set=function(e){a.info("set cookie: ".concat(e)),document.cookie=e},Js.setItem=function(e,t,n){var o;a.info("set cookie key: ".concat(e," value: ").concat(t," ttl: ").concat(n)),n&&((o=new Date).setTime(o.getTime()+n),o=o.toUTCString()),document.cookie="".concat(e,"=").concat(t).concat(o?"; expires=".concat(o):"","; path=/")},Js);function Js(){}N(F,Zs=Tt),Object.defineProperty(F.prototype,"currentModel",{get:function(){return this.state.config.currentModel},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"selectedCoreModel",{get:function(){return this.state.config.selectedCoreModel},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"models",{get:function(){return this.state.config.sdkConfig.models},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"template",{get:function(){return this.state.config.template},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"translations",{get:function(){return this.state.config.translations||[]},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"styles",{get:function(){return this.state.custom.styles||[]},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"timezone",{get:function(){return window.Intl.DateTimeFormat().resolvedOptions().timeZone},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"languages",{get:function(){var n=this,e=navigator.languages,o=[];return e.forEach(function(e){if(!n.state.custom.languageBlockList.includes(e))for(var t=0;t<n.state.custom.lcidList.length;t++)if(e.startsWith(n.state.custom.lcidList[t])){o.includes(n.state.custom.lcidList[t])||o.push(n.state.custom.lcidList[t]);break}}),o},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"encodedConsent",{get:function(){return Xs.getItem(window.__MSFT_SDK.enums.Cookie.Consent)},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"templateParentMap",{get:function(){var e;return(null==(e=this.state.config.template)?void 0:e.componentParentMap)||{}},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"extendedTrackers",{get:function(){return this.state.config.sdkConfig.extendedTrackers},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"defaultModel",{get:function(){var e;return null==(e=this.state.config.sdkConfig)?void 0:e.defaultConsentModel},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"lcid",{get:function(){return this.state.custom.lcid},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"components",{get:function(){return this.state.config.components||{}},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"proxyJS",{get:function(){return this.state.custom.proxyJS},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"questions",{get:function(){return this.state.config.questions||[]},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"templateData",{get:function(){return this.state.custom.templateData},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"sdkConfig",{get:function(){return this.state.config.sdkConfig},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"CdnEndpoint",{get:function(){var e;return(null==(e=this.state.config.sdkConfig)?void 0:e.cdnEndpoint)||"https://privacy-afd-df-wus2-endpoint-a7h5gxfrhgfnhghf.z01.azurefd.net"},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"isCDNEnabled",{get:function(){var e;return(null==(e=null==(e=this.state.config.sdkConfig)?void 0:e.settings)?void 0:e.isCDNEnabled)||!0},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"geolocation",{get:function(){var e;return(null==(e=this.state.config.sdkConfig)?void 0:e.geolocation)||""},enumerable:!1,configurable:!0});var Zs,eu=F;function F(e){var t=Zs.call(this,e)||this;return t.state.custom=K(K({},e.custom),{languageBlockList:["ca-Es-VALENCIA","kok"],lcidList:["af","am","ar","az","bg","bn","bs","ca","cs","cy","da","de","el","en-GB","en","es-MX","es","et","eu","fa","fil","fi","fr-CA","fr","ga","gd","gl","gu","he","hi","hr","hu","id","is","it","ja","ka","kk","km","kn","ko","lb","lo","lt","lv","mi","mk","ml","mr","ms","mt","nl","ne","nb","nn","or","pa","pl","pt-BR","pt","qu","ro","ru","sk","sl","sq","sr","sv","ta","te","th","tr","tt","ug","uk","ur","vi","zh-CN","zh-TW","zh"]}),t}N(I,tu=Tt),I.prototype.setCurrentModel=function(e){this.state.config.currentModel=e},I.prototype.setSelectedCoreModel=function(e){this.state.config.selectedCoreModel=e},I.prototype.setTemplate=function(e){this.state.config.template=e},I.prototype.setTranslations=function(e){this.state.config.translations=e},I.prototype.setStyles=function(e){this.state.custom.styles=e},I.prototype.setEncodedConsentString=function(e,t,n){Xs.setItem(e,t,n)},I.prototype.setLcid=function(e){this.state.custom.lcid=e},I.prototype.setComponents=function(e){this.state.config.components=e},I.prototype.setProxyJS=function(e){this.state.custom.proxyJS=e},I.prototype.setQuestions=function(e){this.state.config.questions=e},I.prototype.setTemplateData=function(e){this.state.custom.templateData=e},I.prototype.setSDKconfig=function(e){this.state.config.sdkConfig=e},I.prototype.setCdnEndpoint=function(e){this.state.config.sdkConfig.cdnEndpoint=e},I.prototype.setIsCDNEnabled=function(e){this.state.config.sdkConfig.settings&&(this.state.config.sdkConfig.settings.isCDNEnabled=e)},I.prototype.setGeolocation=function(e){this.state.config.sdkConfig.geolocation=e};var tu,y=I;function I(e){return tu.call(this,e)||this}var yn=(new Tt).state,nu={getters:new eu(yn),reducers:new y(yn)};function j(){window.__MSFT_SDK.Store.addReducers(nu.reducers),window.__MSFT_SDK.Store.addGetters(eu),j.registerEvents()}j.registerEvents=function(){window.__MSFT_SDK.EventBus.on(window.__MSFT_SDK.enums.Events.Init,j.onInit)},j.matchLocation=function(e,t){if(!t||!Array.isArray(t))return!1;for(var n=0;n<t.length;n++){var o=t[n].toLowerCase();if("all"===o||o===e)return!0}return 0===t.length},j.selectConsentModel=function(i){return s(this,void 0,void 0,function(){var t,n,o,r;return u(this,function(e){switch(e.label){case 0:return(t=i.countryOrRegion,o=i.coreModels,n=i.LCID,o=o||window.__MSFT_SDK.Store.getters.models,a.info("selecting consent model",{models:o,countryCode:t,timezone:window.__MSFT_SDK.Store.getters.timezone}),Array.isArray(o)&&0!==o.length)?(r=o.find(function(e){return e.name===window.__MSFT_SDK.Store.getters.defaultModel})||o[0],[4,j.selectModelByGeoLocation(o,null==t?void 0:t.toLowerCase())]):(window.__MSFT_SDK.Logger.info("Models not found."),[2]);case 1:return r=e.sent()||r,window.__MSFT_SDK.Store.reducers.setSelectedCoreModel(r),j.selectLanguageCode(r.translations,r.defaultLCID,n),window.__MSFT_SDK.EventBus.trigger(ce.CoreConsentModelSelected),window.__MSFT_SDK.Logger.info("Consent model selected."),[2]}})})},j.selectModelByGeoLocation=function(i,c){return s(this,void 0,void 0,function(){var t,n,o,r;return u(this,function(e){switch(e.label){case 0:return(t=window.__MSFT_SDK.Store.getters.timezone,window.__MSFT_SDK.Store.getters.isCDNEnabled)?[4,Qs.getUserCountryOrRegion()]:[3,2];case 1:return o=e.sent(),[3,3];case 2:o="",e.label=3;case 3:return n=o,r=c||n,[2,i.find(function(e){return Boolean(r?j.matchModelByCountryOrRegion(e,r):j.matchModelByTimezoneArea(e,t))})]}})})},j.matchModelByTimezoneArea=function(t,n){return s(this,void 0,void 0,function(){return u(this,function(e){return[2,j.matchLocation(n,t.attributes.geoLocations)]})})},j.matchModelByCountryOrRegion=function(e,t){return j.matchLocation(t,e.attributes.countriesOrRegions)},j.selectLanguageCode=function(e,t,n){for(var o=t,r=n?[n]:window.__MSFT_SDK.Store.getters.languages,i=0;i<r.length;i++)if(e.includes(r[i])){o=r[i];break}a.info("selected language code",{lcid:o}),window.__MSFT_SDK.Store.reducers.setLcid(o)},j.onInit=function(t){return s(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return[4,j.fetchCoreConfig(t)];case 1:return e.sent(),[4,j.selectConsentModel(t)];case 2:return e.sent(),j.updateConfigIfPresent(t),[2]}})})},j.updateConfigIfPresent=function(e){var t=e.translations,n=e.templates,e=e.models;e&&(e=e.find(function(e){return e.id===(null==(e=window.__MSFT_SDK.Store.getters.selectedCoreModel)?void 0:e.id)}))&&window.__MSFT_SDK.Store.reducers.setCurrentModel(e),t&&window.__MSFT_SDK.Store.reducers.setTranslations(t[window.__MSFT_SDK.Store.getters.lcid]),n&&(e=n.find(function(e){return e.name===(null==(e=window.__MSFT_SDK.Store.getters.selectedCoreModel)?void 0:e.layout.name)})||n[0],window.__MSFT_SDK.Store.reducers.setTemplate(e),window.__MSFT_SDK.EventBus.trigger(window.__MSFT_SDK.enums.Events.ConfigReady))},j.fetchCoreConfig=function(r){return s(this,void 0,void 0,function(){var t,n,o;return u(this,function(e){switch(e.label){case 0:return(o=window.__MSFT_SDK.Store.getters.sdkConfig,r.preview)?[2]:null!=o&&null!=o.models?[3,2]:(o=ke.deferred(),t=o.promise,n=o.resolve,[4,Re.fetch("/msft-privacy/packages/".concat(window.__MSFT_SDK.config.id,"/latest/core-config.js"))]);case 1:return o=e.sent(),Ie.addScriptToDOM(o),setTimeout(function(){var e;window.__MSFT_SDK.Store.reducers.setSDKconfig(null==(e=window.__MSFT_SDK)?void 0:e.config),n()}),[2,t];case 2:return[2]}})})},j();ru.getTrackerCategories=function(){if(void 0!==window.__MSFT_SDK.Store.getters.currentModel)return window.__MSFT_SDK.Store.getters.currentModel.trackerCategories;throw new Error("Consent Model not selected.")},ru.getDefaultConsent=function(t){var e,n={preferences:{}};return null!=(e=null==(e=window.__MSFT_SDK.Store.getters.currentModel)?void 0:e.trackerCategories)&&e.forEach(function(e){n.preferences[e.categoryName]=e.isEssential||t===window.__MSFT_SDK.enums.ConsentModelType.Implicit?window.__MSFT_SDK.enums.Preference.ON:window.__MSFT_SDK.enums.Preference.OFF}),a.info("evaluating default consent",{consentModelType:t,consent:n}),n};var ou=ru;function ru(){}R.registerEvents=function(){window.__MSFT_SDK.EventBus.on(window.__MSFT_SDK.enums.Events.ConfigReady,R.showNoticeIfConsentInvalid),window.__MSFT_SDK.EventBus.on(window.__MSFT_SDK.enums.PublicEvents.AcceptAll,R.acceptAllCategories),window.__MSFT_SDK.EventBus.on(window.__MSFT_SDK.enums.PublicEvents.RejectAll,R.rejectAllNonEssentialCategories),window.__MSFT_SDK.EventBus.on(window.__MSFT_SDK.enums.PublicEvents.UpdateConsent,R.setConsent)},R.getConsent=function(){return window.__MSFT_SDK.Store.getters.userConsent||ou.getDefaultConsent(window.__MSFT_SDK.enums.ConsentModelType.Explicit)},R.getConsentFor=function(e){return R.getConsent().preferences[e]},R.setConsent=function(e){a.info("set consent",{payload:e});var e=e.consent,t=window.__MSFT_SDK.Store.getters.currentModel,n=window.__MSFT_SDK.Store.getters.selectedCoreModel;void 0===t||void 0===n?window.__MSFT_SDK.Logger.warn("Cannot set user consent before consent model is ready."):(n=Gs.encodeConsent(e,n),window.__MSFT_SDK.Store.reducers.setEncodedConsentString(window.__MSFT_SDK.enums.Cookie.Consent,n,Ys.ConvertToMilliseconds(t.expiry)),window.__MSFT_SDK.Store.reducers.setUserConsent(e),window.__MSFT_SDK.Logger.info("Consent updated."),window.__MSFT_SDK.EventBus.trigger(window.__MSFT_SDK.enums.PublicEvents.ConsentChanged))},R.isConsentValid=function(){if(null!=(e=window.__MSFT_SDK.Store.getters.config.initConfig)&&e.preview)return!1;var e=window.__MSFT_SDK.Store.getters.encodedConsent;if(void 0===e)return!1;if(void 0===window.__MSFT_SDK.Store.getters.selectedCoreModel)return window.__MSFT_SDK.Logger.warn("Consent model not selected, can't validate consent."),!0;var t=window.__MSFT_SDK.Store.getters.selectedCoreModel,n=t.consentVersion,t=t.consentId;return Gs.getVersionFromString(e)===n&&Gs.getModelIdFromString(e)===t},R.showNoticeIfConsentInvalid=function(){var t,e,n,o;(null==(e=window.__MSFT_SDK.Store.getters.selectedCoreModel)?void 0:e.kind)===me.WebConsentModel&&(t=(null==(e=window.__MSFT_SDK.Store.getters.selectedCoreModel)?void 0:e.consentType)||re.Explicit,e=R.isConsentValid(),a.info("consent valid: ".concat(e)),e||t!==re.Explicit||window.__MSFT_SDK.EventBus.trigger(window.__MSFT_SDK.enums.PublicEvents.ShowFirstPage),n=e?Gs.decodeConsentString(window.__MSFT_SDK.Store.getters.encodedConsent).preferences:{},o={preferences:{}},null!=(e=window.__MSFT_SDK.Store.getters.selectedCoreModel)&&e.trackerCategories.forEach(function(e){e.isEssential?o.preferences[e.categoryName]=window.__MSFT_SDK.enums.Preference.ON:o.preferences[e.categoryName]=n[e.categoryName]||R.getDefaultPreference(t)}),window.__MSFT_SDK.Store.reducers.setUserConsent(o),window.__MSFT_SDK.EventBus.trigger(window.__MSFT_SDK.enums.PublicEvents.ConsentChanged))},R.getDefaultPreference=function(e){return e===re.Explicit?ae.OFF:ae.ON},R.acceptAllCategories=function(){var e,t={preferences:{}};null!=(e=window.__MSFT_SDK.Store.getters.selectedCoreModel)&&e.trackerCategories.forEach(function(e){t.preferences[e.categoryName]=window.__MSFT_SDK.enums.Preference.ON}),R.setConsent({consent:t}),window.__MSFT_SDK.EventBus.trigger(window.__MSFT_SDK.enums.PublicEvents.CloseConsentNotice)},R.rejectAllNonEssentialCategories=function(){var e,t={preferences:{}};null!=(e=window.__MSFT_SDK.Store.getters.selectedCoreModel)&&e.trackerCategories.forEach(function(e){t.preferences[e.categoryName]=e.isEssential?window.__MSFT_SDK.enums.Preference.ON:window.__MSFT_SDK.enums.Preference.OFF}),R.setConsent({consent:t}),window.__MSFT_SDK.EventBus.trigger(window.__MSFT_SDK.enums.PublicEvents.CloseConsentNotice)};var iu=R;function R(){R.registerEvents()}function cu(){}new iu,cu.getConsent=function(){return s(this,void 0,void 0,function(){return u(this,function(e){return[2,Promise.resolve(iu.getConsent())]})})},cu.getTrackerCategories=function(){return s(this,void 0,void 0,function(){return u(this,function(e){return[2,Promise.resolve(ou.getTrackerCategories())]})})},cu.getConsentModels=function(){return window.__MSFT_SDK.Store.getters.models.map(function(e){var t=e.name,n=e.version,e=e.id;return{id:e,name:t,version:n,selected:(null==(t=window.__MSFT_SDK.Store.getters.currentModel)?void 0:t.id)===e}})},window.__MSFT_SDK.Helpers.AddPublicApis(cu),window.__MSFT_SDK.Helpers.exposeApis()}();
