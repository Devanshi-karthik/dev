(function () {
    'use strict';

    var AsyncUtils = /** @class */ (function () {
        function AsyncUtils() {
        }
        AsyncUtils.deferred = function () {
            var defer = {};
            defer.promise = new Promise(function (res, rej) {
                defer.resolve = res;
                defer.reject = rej;
            });
            return defer;
        };
        return AsyncUtils;
    }());

    var promiseMap = {};
    var sendMessage = function (method, args, responseId) {
        if (parent) {
            parent.postMessage({ method: method, params: Object.values(args), responseId: responseId }, msftData.origin);
        }
    };
    var callMethod = function (method, args) {
        var responseId = "".concat(method, "-").concat(new Date().getTime());
        var deferred = AsyncUtils.deferred();
        promiseMap[responseId] = deferred;
        sendMessage(method, args, responseId);
        return deferred.promise;
    };
    window.onmessage = function (e) {
        var _a;
        if (e.origin === msftData.origin && ((_a = e === null || e === void 0 ? void 0 : e.data) === null || _a === void 0 ? void 0 : _a.responseId)) {
            e.data.error
                ? promiseMap[e.data.responseId].reject(e.data.error)
                : promiseMap[e.data.responseId].resolve(e.data.response);
        }
    };

    var ConsentModelType;
    (function (ConsentModelType) {
        ConsentModelType["Explicit"] = "Explicit";
        ConsentModelType["Implicit"] = "Implicit";
    })(ConsentModelType || (ConsentModelType = {}));
    var PublicEvents;
    (function (PublicEvents) {
        PublicEvents["ConsentChanged"] = "ConsentChanged";
        PublicEvents["ShowConsentNotice"] = "ShowConsentNotice";
        PublicEvents["ShowFirstPage"] = "ShowFirstPage";
        PublicEvents["CloseConsentNotice"] = "CloseConsentNotice";
        PublicEvents["AcceptAll"] = "AcceptAll";
        PublicEvents["RejectAll"] = "RejectAll";
        PublicEvents["ShowTemplate"] = "ShowTemplate";
        PublicEvents["CloseTemplate"] = "CloseTemplate";
        PublicEvents["UpdateConsent"] = "UpdateConsent";
        PublicEvents["AnchorTagClicked"] = "AnchorTagClicked";
        PublicEvents["FetchConfig"] = "FetchConfig";
        PublicEvents["QuestionsFormSubmitWithoutMetaData"] = "QuestionsFormSubmitWithoutMetaData";
        PublicEvents["QuestionsFormSubmit"] = "QuestionsFormSubmit";
        PublicEvents["ShowPreferences"] = "ShowPreferences";
    })(PublicEvents || (PublicEvents = {}));
    var Events;
    (function (Events) {
        Events["Init"] = "Init";
        Events["CoreConsentModelSelected"] = "CoreConsentModelSelected";
        Events["ConfigReady"] = "ConfigReady";
    })(Events || (Events = {}));
    var SDKMode;
    (function (SDKMode) {
        SDKMode["Default"] = "Default";
        SDKMode["HeadLess"] = "HeadLess";
    })(SDKMode || (SDKMode = {}));
    var StyleType;
    (function (StyleType) {
        StyleType["Url"] = "Url";
        StyleType["Text"] = "Text";
    })(StyleType || (StyleType = {}));
    var Preference;
    (function (Preference) {
        Preference["OFF"] = "0";
        Preference["ON"] = "1";
    })(Preference || (Preference = {}));
    var Cookie;
    (function (Cookie) {
        Cookie["Consent"] = "msft-consent";
    })(Cookie || (Cookie = {}));
    var RegisteredDivType;
    (function (RegisteredDivType) {
        RegisteredDivType["Script"] = "script";
        RegisteredDivType["IFrame"] = "iframe";
    })(RegisteredDivType || (RegisteredDivType = {}));
    var NoticeType;
    (function (NoticeType) {
        NoticeType["TrackerCategory"] = "trackerCategory";
        NoticeType["Questions"] = "Questions";
    })(NoticeType || (NoticeType = {}));
    var ErrorStrings;
    (function (ErrorStrings) {
        ErrorStrings["TemplateError"] = "<b>There is something wrong with template. Please check logs.</b>";
    })(ErrorStrings || (ErrorStrings = {}));
    var IntervalUnits;
    (function (IntervalUnits) {
        IntervalUnits["day"] = "day";
        IntervalUnits["week"] = "week";
        IntervalUnits["month"] = "month";
        IntervalUnits["year"] = "year";
    })(IntervalUnits || (IntervalUnits = {}));
    var QuestionType;
    (function (QuestionType) {
        QuestionType["Text"] = "Text";
        QuestionType["Email"] = "Email";
        QuestionType["Radio"] = "Radio";
        QuestionType["MultiSelect"] = "MultiSelect";
        QuestionType["Select"] = "Select";
        QuestionType["Date"] = "Date";
        QuestionType["PhoneNumber"] = "PhoneNumber";
        QuestionType["CreditCard"] = "CreditCard";
        QuestionType["Number"] = "Number";
        QuestionType["MultiLineText"] = "multiLineText";
    })(QuestionType || (QuestionType = {}));
    var QuestionValidation;
    (function (QuestionValidation) {
        QuestionValidation["Required"] = "Required";
    })(QuestionValidation || (QuestionValidation = {}));
    var QuestionField;
    (function (QuestionField) {
        QuestionField["Question"] = "question";
        QuestionField["Placeholder"] = "placeholder";
        QuestionField["Options"] = "options";
    })(QuestionField || (QuestionField = {}));
    var ModelKind;
    (function (ModelKind) {
        ModelKind["WebConsentModel"] = "WebConsentModel";
        ModelKind["QuestionModel"] = "DSRSubmissionModel";
    })(ModelKind || (ModelKind = {}));
    var PackageKind;
    (function (PackageKind) {
        PackageKind["WebConsentPackage"] = " WebConsentPackage";
        PackageKind["FIDESPackage"] = "FIDESPackage";
        PackageKind["DSRSubmissionPackage"] = "DSRSubmissionPackage";
    })(PackageKind || (PackageKind = {}));
    var Template;
    (function (Template) {
        Template["Preferences"] = "Preferences";
    })(Template || (Template = {}));

    var onclickHandler = function (e) {
        if (e.target &&
            e.target.nodeName.toLowerCase() === 'a') {
            var attributes = {};
            var attributeNames = e.target.getAttributeNames();
            e.preventDefault();
            e.stopPropagation();
            for (var i = 0; i < attributeNames.length; i++) {
                var attrName = attributeNames[i];
                attributes[attrName] =
                    e.target.getAttribute(attrName) || '';
            }
            window.MSFTConsent.trigger(PublicEvents.AnchorTagClicked, { attributes: attributes });
        }
    };
    // Options for the observer (which mutations to observe)
    var config = { childList: true, subtree: true };
    // Callback function to execute when mutations are observed
    var callback = function (mutationList) {
        mutationList.forEach(function (mutationRecord) {
            mutationRecord.addedNodes.forEach(function (addedNode) {
                if (addedNode.nodeName.toLowerCase() === 'a') {
                    addedNode.addEventListener('click', { handleEvent: onclickHandler });
                }
            });
        });
    };
    // Create an observer instance linked to the callback function
    var observer = new MutationObserver(callback);
    // Start observing the target node for configured mutations
    observer.observe(document.documentElement, config);

    window.MSFTConsent = {};
    var methodsWithReturnType = ['getConsent', 'getTrackerCategories'];
    var methodsWithoutReturnType = ['trigger', 'showChangeSettingsModal'];
    methodsWithoutReturnType.forEach(function (methodName) {
        window.MSFTConsent[methodName] = function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            sendMessage(methodName, args);
        };
    });
    methodsWithReturnType.forEach(function (methodName) {
        window.MSFTConsent[methodName] = function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return callMethod(methodName, args);
        };
    });

}());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJveHkubWluLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL2NvcmUvdXRpbHMvQXN5bmNVdGlscy50cyIsIi4uLy4uLy4uLy4uLy4uL1NESy9zcmMvcHJveHkvcHJveHkudHMiLCIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL2NvcmUvY29uc3RhbnRzL2VudW1zLnRzIiwiLi4vLi4vLi4vLi4vLi4vU0RLL3NyYy9wcm94eS9hbmNob3JDbGlja0hhbmRsZXIudHMiLCIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL3Byb3h5L2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBpbnRlcmZhY2UgSURlZmVycmVkPFQ+IHtcclxuICBwcm9taXNlOiBQcm9taXNlPFQ+O1xyXG4gIHJlc29sdmU6ICh2YWx1ZTogVCB8IFByb21pc2VMaWtlPFQ+KSA9PiB2b2lkO1xyXG4gIHJlamVjdDogKHJlYXNvbj86IGFueSkgPT4gdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXN5bmNVdGlscyB7XHJcbiAgcHVibGljIHN0YXRpYyBkZWZlcnJlZDxUPigpOiBJRGVmZXJyZWQ8VD4ge1xyXG4gICAgY29uc3QgZGVmZXIgPSB7fSBhcyBJRGVmZXJyZWQ8VD47XHJcbiAgICBkZWZlci5wcm9taXNlID0gbmV3IFByb21pc2U8VD4oKHJlcywgcmVqKSA9PiB7XHJcbiAgICAgIGRlZmVyLnJlc29sdmUgPSByZXM7XHJcbiAgICAgIGRlZmVyLnJlamVjdCA9IHJlajtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBkZWZlcjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IEFzeW5jVXRpbHMsIHsgSURlZmVycmVkIH0gZnJvbSAnY29yZS91dGlscy9Bc3luY1V0aWxzJztcclxuXHJcbmNvbnN0IHByb21pc2VNYXA6IHsgW2tleTogc3RyaW5nXTogSURlZmVycmVkPGFueT4gfSA9IHt9O1xyXG5cclxuZXhwb3J0IGNvbnN0IHNlbmRNZXNzYWdlID0gKFxyXG4gIG1ldGhvZDogc3RyaW5nLFxyXG4gIGFyZ3M6IGFueVtdLFxyXG4gIHJlc3BvbnNlSWQ/OiBzdHJpbmcsXHJcbikgPT4ge1xyXG4gIGlmIChwYXJlbnQpIHtcclxuICAgIHBhcmVudC5wb3N0TWVzc2FnZShcclxuICAgICAgeyBtZXRob2Q6IG1ldGhvZCwgcGFyYW1zOiBPYmplY3QudmFsdWVzKGFyZ3MpLCByZXNwb25zZUlkIH0sXHJcbiAgICAgIG1zZnREYXRhLm9yaWdpbixcclxuICAgICk7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhbGxNZXRob2QgPSAobWV0aG9kOiBzdHJpbmcsIGFyZ3M6IGFueVtdKTogUHJvbWlzZTxhbnk+ID0+IHtcclxuICBjb25zdCByZXNwb25zZUlkID0gYCR7bWV0aG9kfS0ke25ldyBEYXRlKCkuZ2V0VGltZSgpfWA7XHJcbiAgY29uc3QgZGVmZXJyZWQgPSBBc3luY1V0aWxzLmRlZmVycmVkPGFueT4oKTtcclxuICBwcm9taXNlTWFwW3Jlc3BvbnNlSWRdID0gZGVmZXJyZWQ7XHJcbiAgc2VuZE1lc3NhZ2UobWV0aG9kLCBhcmdzLCByZXNwb25zZUlkKTtcclxuICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxufTtcclxuXHJcbndpbmRvdy5vbm1lc3NhZ2UgPSBlID0+IHtcclxuICBpZiAoZS5vcmlnaW4gPT09IG1zZnREYXRhLm9yaWdpbiAmJiBlPy5kYXRhPy5yZXNwb25zZUlkKSB7XHJcbiAgICBlLmRhdGEuZXJyb3JcclxuICAgICAgPyBwcm9taXNlTWFwW2UuZGF0YS5yZXNwb25zZUlkXS5yZWplY3QoZS5kYXRhLmVycm9yKVxyXG4gICAgICA6IHByb21pc2VNYXBbZS5kYXRhLnJlc3BvbnNlSWRdLnJlc29sdmUoZS5kYXRhLnJlc3BvbnNlKTtcclxuICB9XHJcbn07XHJcbiIsImV4cG9ydCBlbnVtIENvbnNlbnRNb2RlbFR5cGUge1xyXG4gIEV4cGxpY2l0ID0gJ0V4cGxpY2l0JyxcclxuICBJbXBsaWNpdCA9ICdJbXBsaWNpdCcsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFB1YmxpY0V2ZW50cyB7XHJcbiAgQ29uc2VudENoYW5nZWQgPSAnQ29uc2VudENoYW5nZWQnLFxyXG4gIFNob3dDb25zZW50Tm90aWNlID0gJ1Nob3dDb25zZW50Tm90aWNlJyxcclxuICBTaG93Rmlyc3RQYWdlID0gJ1Nob3dGaXJzdFBhZ2UnLFxyXG4gIENsb3NlQ29uc2VudE5vdGljZSA9ICdDbG9zZUNvbnNlbnROb3RpY2UnLFxyXG4gIEFjY2VwdEFsbCA9ICdBY2NlcHRBbGwnLFxyXG4gIFJlamVjdEFsbCA9ICdSZWplY3RBbGwnLFxyXG4gIFNob3dUZW1wbGF0ZSA9ICdTaG93VGVtcGxhdGUnLFxyXG4gIENsb3NlVGVtcGxhdGUgPSAnQ2xvc2VUZW1wbGF0ZScsXHJcbiAgVXBkYXRlQ29uc2VudCA9ICdVcGRhdGVDb25zZW50JyxcclxuICBBbmNob3JUYWdDbGlja2VkID0gJ0FuY2hvclRhZ0NsaWNrZWQnLFxyXG4gIEZldGNoQ29uZmlnID0gJ0ZldGNoQ29uZmlnJyxcclxuICBRdWVzdGlvbnNGb3JtU3VibWl0V2l0aG91dE1ldGFEYXRhID0gJ1F1ZXN0aW9uc0Zvcm1TdWJtaXRXaXRob3V0TWV0YURhdGEnLFxyXG4gIFF1ZXN0aW9uc0Zvcm1TdWJtaXQgPSAnUXVlc3Rpb25zRm9ybVN1Ym1pdCcsXHJcbiAgU2hvd1ByZWZlcmVuY2VzID0gJ1Nob3dQcmVmZXJlbmNlcycsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIEV2ZW50cyB7XHJcbiAgSW5pdCA9ICdJbml0JyxcclxuICBDb3JlQ29uc2VudE1vZGVsU2VsZWN0ZWQgPSAnQ29yZUNvbnNlbnRNb2RlbFNlbGVjdGVkJyxcclxuICBDb25maWdSZWFkeSA9ICdDb25maWdSZWFkeScsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFNES01vZGUge1xyXG4gIERlZmF1bHQgPSAnRGVmYXVsdCcsXHJcbiAgSGVhZExlc3MgPSAnSGVhZExlc3MnLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBTdHlsZVR5cGUge1xyXG4gIFVybCA9ICdVcmwnLFxyXG4gIFRleHQgPSAnVGV4dCcsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFByZWZlcmVuY2Uge1xyXG4gIE9GRiA9ICcwJyxcclxuICBPTiA9ICcxJyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gQ29va2llIHtcclxuICBDb25zZW50ID0gJ21zZnQtY29uc2VudCcsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFJlZ2lzdGVyZWREaXZUeXBlIHtcclxuICBTY3JpcHQgPSAnc2NyaXB0JyxcclxuICBJRnJhbWUgPSAnaWZyYW1lJyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gTm90aWNlVHlwZSB7XHJcbiAgVHJhY2tlckNhdGVnb3J5ID0gJ3RyYWNrZXJDYXRlZ29yeScsXHJcbiAgUXVlc3Rpb25zID0gJ1F1ZXN0aW9ucycsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIEVycm9yU3RyaW5ncyB7XHJcbiAgVGVtcGxhdGVFcnJvciA9ICc8Yj5UaGVyZSBpcyBzb21ldGhpbmcgd3Jvbmcgd2l0aCB0ZW1wbGF0ZS4gUGxlYXNlIGNoZWNrIGxvZ3MuPC9iPicsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIEludGVydmFsVW5pdHMge1xyXG4gIGRheSA9ICdkYXknLFxyXG4gIHdlZWsgPSAnd2VlaycsXHJcbiAgbW9udGggPSAnbW9udGgnLFxyXG4gIHllYXIgPSAneWVhcicsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFF1ZXN0aW9uVHlwZSB7XHJcbiAgVGV4dCA9ICdUZXh0JyxcclxuICBFbWFpbCA9ICdFbWFpbCcsXHJcbiAgUmFkaW8gPSAnUmFkaW8nLFxyXG4gIE11bHRpU2VsZWN0ID0gJ011bHRpU2VsZWN0JyxcclxuICBTZWxlY3QgPSAnU2VsZWN0JyxcclxuICBEYXRlID0gJ0RhdGUnLFxyXG4gIFBob25lTnVtYmVyID0gJ1Bob25lTnVtYmVyJyxcclxuICBDcmVkaXRDYXJkID0gJ0NyZWRpdENhcmQnLFxyXG4gIE51bWJlciA9ICdOdW1iZXInLFxyXG4gIE11bHRpTGluZVRleHQgPSAnbXVsdGlMaW5lVGV4dCcsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFF1ZXN0aW9uVmFsaWRhdGlvbiB7XHJcbiAgUmVxdWlyZWQgPSAnUmVxdWlyZWQnLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBRdWVzdGlvbkZpZWxkIHtcclxuICBRdWVzdGlvbiA9ICdxdWVzdGlvbicsXHJcbiAgUGxhY2Vob2xkZXIgPSAncGxhY2Vob2xkZXInLFxyXG4gIE9wdGlvbnMgPSAnb3B0aW9ucycsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIE1vZGVsS2luZCB7XHJcbiAgV2ViQ29uc2VudE1vZGVsID0gJ1dlYkNvbnNlbnRNb2RlbCcsXHJcbiAgUXVlc3Rpb25Nb2RlbCA9ICdEU1JTdWJtaXNzaW9uTW9kZWwnLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBQYWNrYWdlS2luZCB7XHJcbiAgV2ViQ29uc2VudFBhY2thZ2UgPSAnIFdlYkNvbnNlbnRQYWNrYWdlJyxcclxuICBGSURFU1BhY2thZ2UgPSAnRklERVNQYWNrYWdlJyxcclxuICBEU1JTdWJtaXNzaW9uUGFja2FnZSA9ICdEU1JTdWJtaXNzaW9uUGFja2FnZScsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFRlbXBsYXRlIHtcclxuICBQcmVmZXJlbmNlcyA9ICdQcmVmZXJlbmNlcycsXHJcbn1cclxuIiwiaW1wb3J0IHsgUHVibGljRXZlbnRzIH0gZnJvbSAnY29yZS9jb25zdGFudHMvZW51bXMnO1xyXG5cclxuY29uc3Qgb25jbGlja0hhbmRsZXIgPSAoZTogTW91c2VFdmVudCkgPT4ge1xyXG4gIGlmIChcclxuICAgIGUudGFyZ2V0ICYmXHJcbiAgICAoZS50YXJnZXQgYXMgSFRNTEFuY2hvckVsZW1lbnQpLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdhJ1xyXG4gICkge1xyXG4gICAgY29uc3QgYXR0cmlidXRlczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHt9O1xyXG4gICAgY29uc3QgYXR0cmlidXRlTmFtZXMgPSAoZS50YXJnZXQgYXMgSFRNTEFuY2hvckVsZW1lbnQpLmdldEF0dHJpYnV0ZU5hbWVzKCk7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhdHRyaWJ1dGVOYW1lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCBhdHRyTmFtZSA9IGF0dHJpYnV0ZU5hbWVzW2ldO1xyXG4gICAgICBhdHRyaWJ1dGVzW2F0dHJOYW1lXSA9XHJcbiAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxBbmNob3JFbGVtZW50KS5nZXRBdHRyaWJ1dGUoYXR0ck5hbWUpIHx8ICcnO1xyXG4gICAgfVxyXG4gICAgd2luZG93Lk1TRlRDb25zZW50LnRyaWdnZXIoUHVibGljRXZlbnRzLkFuY2hvclRhZ0NsaWNrZWQsIHsgYXR0cmlidXRlcyB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBPcHRpb25zIGZvciB0aGUgb2JzZXJ2ZXIgKHdoaWNoIG11dGF0aW9ucyB0byBvYnNlcnZlKVxyXG5jb25zdCBjb25maWcgPSB7IGNoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZSB9O1xyXG5cclxuLy8gQ2FsbGJhY2sgZnVuY3Rpb24gdG8gZXhlY3V0ZSB3aGVuIG11dGF0aW9ucyBhcmUgb2JzZXJ2ZWRcclxuY29uc3QgY2FsbGJhY2s6IE11dGF0aW9uQ2FsbGJhY2sgPSBmdW5jdGlvbiAobXV0YXRpb25MaXN0KSB7XHJcbiAgbXV0YXRpb25MaXN0LmZvckVhY2gobXV0YXRpb25SZWNvcmQgPT4ge1xyXG4gICAgbXV0YXRpb25SZWNvcmQuYWRkZWROb2Rlcy5mb3JFYWNoKGFkZGVkTm9kZSA9PiB7XHJcbiAgICAgIGlmIChhZGRlZE5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2EnKSB7XHJcbiAgICAgICAgYWRkZWROb2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgeyBoYW5kbGVFdmVudDogb25jbGlja0hhbmRsZXIgfSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuLy8gQ3JlYXRlIGFuIG9ic2VydmVyIGluc3RhbmNlIGxpbmtlZCB0byB0aGUgY2FsbGJhY2sgZnVuY3Rpb25cclxuY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihjYWxsYmFjayk7XHJcblxyXG4vLyBTdGFydCBvYnNlcnZpbmcgdGhlIHRhcmdldCBub2RlIGZvciBjb25maWd1cmVkIG11dGF0aW9uc1xyXG5vYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgY29uZmlnKTtcclxuIiwiaW1wb3J0IHsgY2FsbE1ldGhvZCwgc2VuZE1lc3NhZ2UgfSBmcm9tICcuL3Byb3h5JztcclxuaW1wb3J0ICcuL2FuY2hvckNsaWNrSGFuZGxlcic7XHJcblxyXG53aW5kb3cuTVNGVENvbnNlbnQgPSB7fSBhcyBhbnk7XHJcblxyXG5jb25zdCBtZXRob2RzV2l0aFJldHVyblR5cGUgPSBbJ2dldENvbnNlbnQnLCAnZ2V0VHJhY2tlckNhdGVnb3JpZXMnXTtcclxuY29uc3QgbWV0aG9kc1dpdGhvdXRSZXR1cm5UeXBlID0gWyd0cmlnZ2VyJywgJ3Nob3dDaGFuZ2VTZXR0aW5nc01vZGFsJ107XHJcblxyXG5tZXRob2RzV2l0aG91dFJldHVyblR5cGUuZm9yRWFjaChtZXRob2ROYW1lID0+IHtcclxuICAod2luZG93Lk1TRlRDb25zZW50IGFzIGFueSlbbWV0aG9kTmFtZV0gPSAoLi4uYXJnczogYW55W10pOiB2b2lkID0+IHtcclxuICAgIHNlbmRNZXNzYWdlKG1ldGhvZE5hbWUsIGFyZ3MpO1xyXG4gIH07XHJcbn0pO1xyXG5cclxubWV0aG9kc1dpdGhSZXR1cm5UeXBlLmZvckVhY2gobWV0aG9kTmFtZSA9PiB7XHJcbiAgKHdpbmRvdy5NU0ZUQ29uc2VudCBhcyBhbnkpW21ldGhvZE5hbWVdID0gKC4uLmFyZ3M6IGFueVtdKTogUHJvbWlzZTxhbnk+ID0+IHtcclxuICAgIHJldHVybiBjYWxsTWV0aG9kKG1ldGhvZE5hbWUsIGFyZ3MpO1xyXG4gIH07XHJcbn0pO1xyXG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0lBTUE7UUFBQTtTQVVDO1FBVGUsbUJBQVEsR0FBdEI7WUFDRSxJQUFNLEtBQUssR0FBRyxFQUFrQixDQUFDO1lBQ2pDLEtBQUssQ0FBQyxPQUFPLEdBQUcsSUFBSSxPQUFPLENBQUksVUFBQyxHQUFHLEVBQUUsR0FBRztnQkFDdEMsS0FBSyxDQUFDLE9BQU8sR0FBRyxHQUFHLENBQUM7Z0JBQ3BCLEtBQUssQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFDO2FBQ3BCLENBQUMsQ0FBQztZQUVILE9BQU8sS0FBSyxDQUFDO1NBQ2Q7UUFDSCxpQkFBQztJQUFELENBQUM7O0lDZEQsSUFBTSxVQUFVLEdBQXNDLEVBQUUsQ0FBQztJQUVsRCxJQUFNLFdBQVcsR0FBRyxVQUN6QixNQUFjLEVBQ2QsSUFBVyxFQUNYLFVBQW1CO1FBRW5CLElBQUksTUFBTSxFQUFFO1lBQ1YsTUFBTSxDQUFDLFdBQVcsQ0FDaEIsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLFVBQVUsWUFBQSxFQUFFLEVBQzNELFFBQVEsQ0FBQyxNQUFNLENBQ2hCLENBQUM7U0FDSDtJQUNILENBQUMsQ0FBQztJQUVLLElBQU0sVUFBVSxHQUFHLFVBQUMsTUFBYyxFQUFFLElBQVc7UUFDcEQsSUFBTSxVQUFVLEdBQUcsVUFBRyxNQUFNLGNBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBRSxDQUFDO1FBQ3ZELElBQU0sUUFBUSxHQUFHLFVBQVUsQ0FBQyxRQUFRLEVBQU8sQ0FBQztRQUM1QyxVQUFVLENBQUMsVUFBVSxDQUFDLEdBQUcsUUFBUSxDQUFDO1FBQ2xDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBQ3RDLE9BQU8s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
