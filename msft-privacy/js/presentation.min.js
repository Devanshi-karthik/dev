(function () {
    'use strict';

    /******************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
    /* global Reflect, Promise */

    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };

    function __extends(d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }

    var __assign = function() {
        __assign = Object.assign || function __assign(t) {
            for (var s, i = 1, n = arguments.length; i < n; i++) {
                s = arguments[i];
                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
            }
            return t;
        };
        return __assign.apply(this, arguments);
    };

    function __awaiter(thisArg, _arguments, P, generator) {
        function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
        return new (P || (P = Promise))(function (resolve, reject) {
            function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
            function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
            function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
            step((generator = generator.apply(thisArg, _arguments || [])).next());
        });
    }

    function __generator(thisArg, body) {
        var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
        return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
        function verb(n) { return function (v) { return step([n, v]); }; }
        function step(op) {
            if (f) throw new TypeError("Generator is already executing.");
            while (_) try {
                if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
                if (y = 0, t) op = [op[0] & 2, t.value];
                switch (op[0]) {
                    case 0: case 1: t = op; break;
                    case 4: _.label++; return { value: op[1], done: false };
                    case 5: _.label++; y = op[1]; op = [0]; continue;
                    case 7: op = _.ops.pop(); _.trys.pop(); continue;
                    default:
                        if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                        if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                        if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                        if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                        if (t[2]) _.ops.pop();
                        _.trys.pop(); continue;
                }
                op = body.call(thisArg, _);
            } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
            if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
        }
    }

    function __read(o, n) {
        var m = typeof Symbol === "function" && o[Symbol.iterator];
        if (!m) return o;
        var i = m.call(o), r, ar = [], e;
        try {
            while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
        }
        catch (error) { e = { error: error }; }
        finally {
            try {
                if (r && !r.done && (m = i["return"])) m.call(i);
            }
            finally { if (e) throw e.error; }
        }
        return ar;
    }

    function __spreadArray(to, from, pack) {
        if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
            if (ar || !(i in from)) {
                if (!ar) ar = Array.prototype.slice.call(from, 0, i);
                ar[i] = from[i];
            }
        }
        return to.concat(ar || Array.prototype.slice.call(from));
    }

    var ConsentModelType;
    (function (ConsentModelType) {
        ConsentModelType["Explicit"] = "Explicit";
        ConsentModelType["Implicit"] = "Implicit";
    })(ConsentModelType || (ConsentModelType = {}));
    var PublicEvents;
    (function (PublicEvents) {
        PublicEvents["ConsentChanged"] = "ConsentChanged";
        PublicEvents["ShowConsentNotice"] = "ShowConsentNotice";
        PublicEvents["ShowFirstPage"] = "ShowFirstPage";
        PublicEvents["CloseConsentNotice"] = "CloseConsentNotice";
        PublicEvents["AcceptAll"] = "AcceptAll";
        PublicEvents["RejectAll"] = "RejectAll";
        PublicEvents["ShowTemplate"] = "ShowTemplate";
        PublicEvents["CloseTemplate"] = "CloseTemplate";
        PublicEvents["UpdateConsent"] = "UpdateConsent";
        PublicEvents["AnchorTagClicked"] = "AnchorTagClicked";
        PublicEvents["FetchConfig"] = "FetchConfig";
        PublicEvents["QuestionsFormSubmitWithoutMetaData"] = "QuestionsFormSubmitWithoutMetaData";
        PublicEvents["QuestionsFormSubmit"] = "QuestionsFormSubmit";
        PublicEvents["ShowPreferences"] = "ShowPreferences";
    })(PublicEvents || (PublicEvents = {}));
    var Events;
    (function (Events) {
        Events["Init"] = "Init";
        Events["CoreConsentModelSelected"] = "CoreConsentModelSelected";
        Events["ConfigReady"] = "ConfigReady";
    })(Events || (Events = {}));
    var SDKMode;
    (function (SDKMode) {
        SDKMode["Default"] = "Default";
        SDKMode["HeadLess"] = "HeadLess";
    })(SDKMode || (SDKMode = {}));
    var StyleType;
    (function (StyleType) {
        StyleType["Url"] = "Url";
        StyleType["Text"] = "Text";
    })(StyleType || (StyleType = {}));
    var Preference;
    (function (Preference) {
        Preference["OFF"] = "0";
        Preference["ON"] = "1";
    })(Preference || (Preference = {}));
    var Cookie;
    (function (Cookie) {
        Cookie["Consent"] = "msft-consent";
    })(Cookie || (Cookie = {}));
    var RegisteredDivType;
    (function (RegisteredDivType) {
        RegisteredDivType["Script"] = "script";
        RegisteredDivType["IFrame"] = "iframe";
    })(RegisteredDivType || (RegisteredDivType = {}));
    var NoticeType;
    (function (NoticeType) {
        NoticeType["TrackerCategory"] = "trackerCategory";
        NoticeType["Questions"] = "Questions";
    })(NoticeType || (NoticeType = {}));
    var ErrorStrings;
    (function (ErrorStrings) {
        ErrorStrings["TemplateError"] = "<b>There is something wrong with template. Please check logs.</b>";
    })(ErrorStrings || (ErrorStrings = {}));
    var IntervalUnits;
    (function (IntervalUnits) {
        IntervalUnits["day"] = "day";
        IntervalUnits["week"] = "week";
        IntervalUnits["month"] = "month";
        IntervalUnits["year"] = "year";
    })(IntervalUnits || (IntervalUnits = {}));
    var QuestionType;
    (function (QuestionType) {
        QuestionType["Text"] = "Text";
        QuestionType["Email"] = "Email";
        QuestionType["Radio"] = "Radio";
        QuestionType["MultiSelect"] = "MultiSelect";
        QuestionType["Select"] = "Select";
        QuestionType["Date"] = "Date";
        QuestionType["PhoneNumber"] = "PhoneNumber";
        QuestionType["CreditCard"] = "CreditCard";
        QuestionType["Number"] = "Number";
        QuestionType["MultiLineText"] = "multiLineText";
    })(QuestionType || (QuestionType = {}));
    var QuestionValidation;
    (function (QuestionValidation) {
        QuestionValidation["Required"] = "Required";
    })(QuestionValidation || (QuestionValidation = {}));
    var QuestionField;
    (function (QuestionField) {
        QuestionField["Question"] = "question";
        QuestionField["Placeholder"] = "placeholder";
        QuestionField["Options"] = "options";
    })(QuestionField || (QuestionField = {}));
    var ModelKind;
    (function (ModelKind) {
        ModelKind["WebConsentModel"] = "WebConsentModel";
        ModelKind["QuestionModel"] = "DSRSubmissionModel";
    })(ModelKind || (ModelKind = {}));
    var PackageKind;
    (function (PackageKind) {
        PackageKind["WebConsentPackage"] = " WebConsentPackage";
        PackageKind["FIDESPackage"] = "FIDESPackage";
        PackageKind["DSRSubmissionPackage"] = "DSRSubmissionPackage";
    })(PackageKind || (PackageKind = {}));
    var Template;
    (function (Template) {
        Template["Preferences"] = "Preferences";
    })(Template || (Template = {}));

    var ObjectUtils = /** @class */ (function () {
        function ObjectUtils() {
        }
        ObjectUtils.isObject = function (item) {
            return item && typeof item === 'object' && !Array.isArray(item);
        };
        ObjectUtils.mergeDeep = function (target) {
            var _a, _b;
            var sources = [];
            for (var _i = 1; _i < arguments.length; _i++) {
                sources[_i - 1] = arguments[_i];
            }
            if (!sources.length)
                return target;
            var source = sources.shift();
            if (this.isObject(target) && this.isObject(source)) {
                for (var key in source) {
                    if (this.isObject(source[key])) {
                        if (!target[key])
                            Object.assign(target, (_a = {}, _a[key] = {}, _a));
                        this.mergeDeep(target[key], source[key]);
                    }
                    else {
                        Object.assign(target, (_b = {}, _b[key] = source[key], _b));
                    }
                }
            }
            return this.mergeDeep.apply(this, __spreadArray([target], __read(sources), false));
        };
        return ObjectUtils;
    }());

    var SDKModules;
    (function (SDKModules) {
        SDKModules["PRESENTATION"] = "presentation";
        SDKModules["PREVIEW"] = "preview";
        SDKModules["CONFIG"] = "config";
        SDKModules["HANDLEBAR"] = "handlebar";
        SDKModules["PROXY"] = "proxy";
        SDKModules["DSR"] = "dsr";
    })(SDKModules || (SDKModules = {}));
    var SDKModulesPath;
    (function (SDKModulesPath) {
        SDKModulesPath["PRESENTATION"] = "$jsRootPath/msft-privacy/js/presentation.min.js";
        SDKModulesPath["PREVIEW"] = "$jsRootPath/msft-privacy/js/preview.min.js";
        SDKModulesPath["HANDLEBAR"] = "$jsRootPath/msft-privacy/js/vendor/handlebars.min.js";
        SDKModulesPath["PROXY"] = "$jsRootPath/msft-privacy/js/proxy.min.js";
        SDKModulesPath["DSR"] = "$jsRootPath/msft-privacy/js/dsr.min.js";
    })(SDKModulesPath || (SDKModulesPath = {}));
    var SDKModulesSourceVariable;
    (function (SDKModulesSourceVariable) {
        SDKModulesSourceVariable["PRESENTATION"] = "msft-presentation.js";
        SDKModulesSourceVariable["HANDLEBAR"] = "msft-handlebars.js";
        SDKModulesSourceVariable["PROXY"] = "msft-proxy.js";
        SDKModulesSourceVariable["DSR"] = "dsr.js";
    })(SDKModulesSourceVariable || (SDKModulesSourceVariable = {}));
    var ModuleSourceType;
    (function (ModuleSourceType) {
        ModuleSourceType["PATH"] = "path";
        ModuleSourceType["VARIABLE"] = "variable";
    })(ModuleSourceType || (ModuleSourceType = {}));

    var State = /** @class */ (function () {
        function State(state) {
            this.state = state || {
                config: {},
                debug: {
                    logs: [],
                    events: [],
                },
                custom: {},
            };
        }
        return State;
    }());

    var Getters = /** @class */ (function (_super) {
        __extends(Getters, _super);
        function Getters(state) {
            return _super.call(this, state) || this;
        }
        Object.defineProperty(Getters.prototype, "debugInfo", {
            get: function () {
                return this.state.debug;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "config", {
            get: function () {
                return this.state.config;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "userConsent", {
            get: function () {
                return this.state.custom.userConsent;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "isHeadless", {
            // TODO: Implement below getters
            get: function () {
                return false;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "isPreviewMode", {
            get: function () {
                var _a;
                return ((_a = this.state.config.initConfig) === null || _a === void 0 ? void 0 : _a.preview) || false;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "isActionDisabled", {
            get: function () {
                var _a;
                return ((_a = this.state.config.initConfig) === null || _a === void 0 ? void 0 : _a.disableActions) || false;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "isLivePreviewMode", {
            get: function () {
                var _a;
                return ((_a = window.parent) === null || _a === void 0 ? void 0 : _a.name) === 'ConsentLivePreview';
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "presentationVariable", {
            get: function () {
                return SDKModulesSourceVariable.PRESENTATION;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "handlebarVariable", {
            get: function () {
                return SDKModulesSourceVariable.HANDLEBAR;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "proxyVariable", {
            get: function () {
                return SDKModulesSourceVariable.PROXY;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "dsrVariable", {
            get: function () {
                return SDKModulesSourceVariable.DSR;
            },
            enumerable: false,
            configurable: true
        });
        return Getters;
    }(State));

    var Reducers = /** @class */ (function (_super) {
        __extends(Reducers, _super);
        function Reducers(state) {
            return _super.call(this, state) || this;
        }
        Reducers.prototype.saveDebugInfo = function (_a) {
            var event = _a.event, log = _a.log;
            if (event) {
                this.state.debug.events.push(event);
            }
            if (log) {
                this.state.debug.logs.push(log);
            }
        };
        Reducers.prototype.setUserConsent = function (consent) {
            this.state.custom.userConsent = consent;
        };
        Reducers.prototype.setInitConfig = function (initConfig) {
            this.state.config.initConfig = initConfig;
        };
        return Reducers;
    }(State));

    var state = new State().state;
    var getter = new Getters(state);
    var reducer = new Reducers(state);
    var Store = {
        getters: getter,
        reducers: reducer,
        addReducers: function (reducers) {
            this.reducers = ObjectUtils.mergeDeep(this.reducers, reducers);
        },
        addGetters: function (getters) {
            Object.defineProperties(this.getters, Object.getOwnPropertyDescriptors(getters.prototype));
        },
    };

    var LogLevels;
    (function (LogLevels) {
        LogLevels[LogLevels["INFO"] = 0] = "INFO";
        LogLevels[LogLevels["WARN"] = 1] = "WARN";
        LogLevels[LogLevels["ERROR"] = 2] = "ERROR";
    })(LogLevels || (LogLevels = {}));

    var ConsoleLogger = /** @class */ (function () {
        function ConsoleLogger() {
        }
        /**
         * Browser's console logger plugin.
         *
         * @param {LogLevels} level Log level
         * @param {string} message Log message
         */
        ConsoleLogger.log = function (level, message) {
            switch (level) {
                case LogLevels.WARN:
                    console.warn(message);
                    break;
                case LogLevels.ERROR:
                    console.error(message);
                    break;
                default:
                    {
                        console.log(message);
                    }
                    break;
            }
        };
        return ConsoleLogger;
    }());

    /**
     * @typedef {import("core/types/interfaces").IGenericObject} IGenericObject
     */
    var Logger = /** @class */ (function () {
        function Logger() {
        }
        /**
         * Info logs
         *
         * @param {string} message Logger message
         * @param {IGenericObject} data Additional details to log
         */
        Logger.info = function (message, data) {
            Logger.log(LogLevels.INFO, message, data);
        };
        /**
         * Warning logs
         *
         * @param {string} message Logger message
         * @param {IGenericObject} data Additional details to log
         */
        Logger.warn = function (message, data) {
            Logger.log(LogLevels.WARN, message, data);
        };
        /**
         * Error logs
         *
         * @param {string} message Logger message
         * @param {IGenericObject} data Additional details to log
         */
        Logger.error = function (message, data) {
            Logger.log(LogLevels.ERROR, message, data);
        };
        /**
         * Logs the message using the plugin based in level.
         *
         * @param {LogLevels} logLevel Log level
         * @param {string} message Logger message
         * @param {IGenericObject} data Additional details to log
         */
        Logger.log = function (logLevel, message, data) {
            var formattedMessage = Logger.formatLogMessage(logLevel, message, data);
            Store.reducers.saveDebugInfo({ log: formattedMessage });
            ConsoleLogger.log(logLevel, formattedMessage);
        };
        /**
         * Formats the logger message.
         *
         * @param {LogLevels} logLevel Log level
         * @param {string} message Logger message
         * @param {IGenericObject} data Additional details to log
         * @returns {string} Formatted logger message
         */
        Logger.formatLogMessage = function (logLevel, message, data) {
            var stringifiedData = data ? "| ".concat(JSON.stringify(data)) : '';
            return "[".concat(LogLevels[logLevel], "] ").concat(message, " ").concat(stringifiedData);
        };
        return Logger;
    }());

    var registerHeplers = function () {
        if (window.Handlebars) {
            window.Handlebars.registerHelper('toLowerCase', function (type) {
                return type.toLowerCase();
            });
            window.Handlebars.registerHelper('equals', function (param1, param2) {
                return param1.toLowerCase() === param2.toLowerCase();
            });
        }
    };

    var TemplateHandler = /** @class */ (function () {
        function TemplateHandler() {
            TemplateHandler.registerShowTemplateHandlers();
        }
        /**
         * Register event handlers to open/close different templates
         */
        TemplateHandler.registerShowTemplateHandlers = function () {
            window.__MSFT_SDK.EventBus.on(window.__MSFT_SDK.enums.PublicEvents.ShowConsentNotice, TemplateHandler.showFirstPage);
            window.__MSFT_SDK.EventBus.on(window.__MSFT_SDK.enums.PublicEvents.CloseConsentNotice, TemplateHandler.hideConsentNotice);
            window.__MSFT_SDK.EventBus.on(window.__MSFT_SDK.enums.Events.Init, TemplateHandler.saveStylesOnInit);
            window.__MSFT_SDK.EventBus.on(window.__MSFT_SDK.enums.PublicEvents.ShowTemplate, TemplateHandler.showTemplate);
            window.__MSFT_SDK.EventBus.on(window.__MSFT_SDK.enums.PublicEvents.CloseTemplate, TemplateHandler.closeTemplate);
            window.__MSFT_SDK.EventBus.on(window.__MSFT_SDK.enums.Events.ConfigReady, TemplateHandler.init);
            window.__MSFT_SDK.EventBus.on(window.__MSFT_SDK.enums.PublicEvents.ShowPreferences, TemplateHandler.showPreferences);
        };
        TemplateHandler.showPreferences = function () {
            try {
                TemplateHandler.showTemplate({ templateId: Template.Preferences });
            }
            catch (e) {
                TemplateHandler.showFirstPage();
            }
        };
        /**
         * Show template
         *
         * @param  {import("core/types/interfaces").IGenericObject} payload payload data
         */
        TemplateHandler.showTemplate = function (_a) {
            var templateId = _a.templateId;
            if (window.__MSFT_SDK.Store.getters.components &&
                window.__MSFT_SDK.Store.getters.components[templateId]) {
                var consentModel = window.__MSFT_SDK.Store.getters.currentModel;
                TemplateHandler.showTemplateInIFrame(window.__MSFT_SDK.Store.getters.components[templateId], templateId, [
                    {
                        type: StyleType.Text,
                        value: (consentModel === null || consentModel === void 0 ? void 0 : consentModel.layout.ui.css) || '',
                    },
                ], TemplateHandler.getParentElement(templateId));
            }
            else {
                throw new Error("Template : ".concat(templateId, " not found."));
            }
        };
        /**
         * Hide template
         *
         * @param  {import("core/types/interfaces").IGenericObject} payload payload data
         */
        TemplateHandler.closeTemplate = function (_a) {
            var templateId = _a.templateId;
            TemplateHandler.closeIFrame(templateId);
        };
        /**
         * Save styles passed by user in window.__MSFT_SDK.Store
         *
         * @param  {import("core/types/interfaces").IInitConfig} config init config
         */
        TemplateHandler.saveStylesOnInit = function (config) {
            if (config.styles) {
                window.__MSFT_SDK.Logger.info('user provided styles persisted to window.__MSFT_SDK.Store.');
                window.__MSFT_SDK.Store.reducers.setStyles(config.styles);
            }
        };
        TemplateHandler.validationArrayToObject = function (validations) {
            return validations.reduce(function (previous, current) {
                var _a;
                return __assign(__assign({}, previous), (_a = {}, _a[current] = true, _a));
            }, {});
        };
        TemplateHandler.getTemplateData = function (consentModel) {
            var _this = this;
            var groupedTranslations = window.__MSFT_SDK.Store.getters.translations;
            var questions = window.__MSFT_SDK.Store.getters.questions;
            var modelId = consentModel.id;
            var data = {};
            var questionWithOptions = {};
            data[NoticeType.TrackerCategory] = [];
            data[NoticeType.Questions] = [];
            var trackerCategories = new Map();
            var questionsMap = new Map();
            var addedQuestions = new Set();
            var addedTrackerCategories = new Set();
            if (consentModel.kind === ModelKind.WebConsentModel) {
                consentModel.trackerCategories.forEach(function (category) {
                    trackerCategories.set(category.id, category);
                });
            }
            else if (consentModel.kind === ModelKind.QuestionModel) {
                questions.forEach(function (question) {
                    questionsMap.set(question.name, question);
                });
                data.captcha = consentModel.captcha;
            }
            groupedTranslations.forEach(function (groupedTranslation) {
                return Object.keys(groupedTranslation).forEach(function (namespace) {
                    var _a;
                    var _b, _c, _d, _e;
                    if (namespace === modelId) {
                        data = __assign(__assign({}, data), groupedTranslation[namespace]);
                    }
                    else if (questionsMap.has(namespace) &&
                        !addedQuestions.has(namespace)) {
                        questionWithOptions = __assign(__assign(__assign({}, groupedTranslation[namespace]), questionsMap.get(namespace)), { validations: _this.validationArrayToObject(((_b = questionsMap.get(namespace)) === null || _b === void 0 ? void 0 : _b.validations) || []) });
                        questionWithOptions.validations = __assign(__assign({}, questionWithOptions.validations), _this.validationArrayToObject(((_c = consentModel.questions.find(function (question) { return question.questionName == namespace; })) === null || _c === void 0 ? void 0 : _c.validations) || []));
                        data[NoticeType.Questions].push(questionWithOptions);
                        addedQuestions.add(namespace);
                    }
                    else if (consentModel.kind === ModelKind.QuestionModel) {
                        data = __assign(__assign({}, data), (_a = {}, _a[namespace] = groupedTranslation[namespace], _a));
                    }
                    else if (trackerCategories.has(namespace) &&
                        !addedTrackerCategories.has(namespace)) {
                        var categoryTranslation = __assign(__assign({}, groupedTranslation[namespace]), { name: (_d = trackerCategories.get(namespace)) === null || _d === void 0 ? void 0 : _d.categoryName, isEssential: (_e = trackerCategories.get(namespace)) === null || _e === void 0 ? void 0 : _e.isEssential });
                        data[NoticeType.TrackerCategory].push(categoryTranslation);
                        addedTrackerCategories.add(namespace);
                    }
                });
            });
            data[NoticeType.TrackerCategory] = __spreadArray(__spreadArray([], __read(data[NoticeType.TrackerCategory].filter(function (category) { return category.isEssential; })), false), __read(data[NoticeType.TrackerCategory].filter(function (category) { return !category.isEssential; })), false);
            data['msft-script-open'] = '<script>';
            data['msft-script-close'] = '</script>';
            Logger.info('getTemplate data invoked', { consentModel: consentModel, data: data });
            return __assign(__assign({}, data), window.__MSFT_SDK.Store.getters.templateData);
        };
        /**
         * Perform all necessary steps like replacing placeholders in
         * templates during init.
         */
        TemplateHandler.init = function () {
            registerHeplers();
            if (window.__MSFT_SDK.Store.getters.currentModel === undefined ||
                window.__MSFT_SDK.Store.getters.template === undefined) {
                window.__MSFT_SDK.Logger.warn('Cannot call init before config is ready.');
                return;
            }
            var consentModel = window.__MSFT_SDK.Store.getters.currentModel;
            var template = window.__MSFT_SDK.Store.getters.template;
            var data = TemplateHandler.getTemplateData(consentModel);
            template.pages.forEach(function (page) {
                var _a;
                var templateString;
                try {
                    var template_1 = window.Handlebars.compile(page.content);
                    templateString = template_1(data);
                }
                catch (e) {
                    window.__MSFT_SDK.Logger.error(e.message, e);
                    templateString = ErrorStrings.TemplateError;
                }
                window.__MSFT_SDK.Store.reducers.setComponents(__assign(__assign({}, window.__MSFT_SDK.Store.getters.components), (_a = {}, _a[page.name] = templateString, _a)));
            });
            window.__MSFT_SDK.Logger.info('Components updated');
            TemplateHandler.initialized = true;
            window.__MSFT_SDK.EventBus.on(window.__MSFT_SDK.enums.PublicEvents.ShowFirstPage, TemplateHandler.showFirstPage);
        };
        /**
         * Show Consent notice template
         */
        TemplateHandler.showFirstPage = function () {
            var _a, _b;
            if (!TemplateHandler.initialized) {
                TemplateHandler.init();
            }
            var consentModel = window.__MSFT_SDK.Store.getters.currentModel;
            if (consentModel === undefined) {
                window.__MSFT_SDK.Logger.warn('Cannot call init before consent model is selected.');
                return;
            }
            var mode = consentModel.layout.ui.mode;
            var initComponent = (_b = (_a = window.__MSFT_SDK.Store.getters.template) === null || _a === void 0 ? void 0 : _a.modes.find(function (m) { return m.name === mode; })) === null || _b === void 0 ? void 0 : _b.initPage;
            if (window.__MSFT_SDK.Store.getters.components === undefined ||
                initComponent === undefined ||
                window.__MSFT_SDK.Store.getters.components[initComponent] === undefined) {
                window.__MSFT_SDK.Logger.error('Notice template not found.');
                return;
            }
            var template = window.__MSFT_SDK.Store.getters.components[initComponent];
            TemplateHandler.showTemplateInIFrame(template, initComponent, [
                {
                    type: StyleType.Text,
                    value: consentModel.layout.ui.css || '',
                },
            ], TemplateHandler.getParentElement(initComponent));
        };
        TemplateHandler.getParentElement = function (templateId) {
            var _a;
            var parentElementId = (((_a = window.__MSFT_SDK.Store.getters.config.initConfig) === null || _a === void 0 ? void 0 : _a.componentParentMap) ||
                window.__MSFT_SDK.Store.getters.templateParentMap)[templateId];
            if (parentElementId) {
                return document.getElementById(parentElementId);
            }
            return null;
        };
        /**
         * Adds template to iframe and append it to dom
         *
         * @param  {string} template template to add
         * @param  {string} iframeId iframe id
         * @param  {IStyle[]} styles styles
         * @param  {HTMLElement|null} parentElement if iframe should be added to a specific element instead of body
         */
        TemplateHandler.showTemplateInIFrame = function (template, iframeId, styles, parentElement) {
            var _a;
            if (styles === void 0) { styles = []; }
            var iframeElement = document.getElementById(iframeId);
            if (iframeElement) {
                Logger.info("Template: ".concat(iframeId, " is already open."));
            }
            else {
                if (template === ErrorStrings.TemplateError &&
                    (!window.__MSFT_SDK.Store.getters.isLivePreviewMode ||
                        !window.__MSFT_SDK.Store.getters.isPreviewMode)) {
                    return;
                }
                var data = {
                    origin: window.origin,
                };
                template =
                    "<script>var msftData = ".concat(JSON.stringify(data), "</script>") + template;
                if (!((_a = window.__MSFT_SDK.Store.getters.config.initConfig) === null || _a === void 0 ? void 0 : _a.renderTemplateWithoutIframe)) {
                    template =
                        "<script>".concat(window.__MSFT_SDK.Store.getters.proxyJS, "</script>") +
                            template;
                }
                window.__MSFT_SDK.Utils.IFrameUtils.createIFrame(template, iframeId, parentElement, __spreadArray(__spreadArray([], __read(styles), false), __read((window.__MSFT_SDK.Store.getters.styles || [])), false));
            }
        };
        /**
         * Hide consent notice iframe
         */
        TemplateHandler.hideConsentNotice = function () {
            var _a, _b;
            var consentModel = window.__MSFT_SDK.Store.getters.currentModel;
            if (consentModel === undefined) {
                window.__MSFT_SDK.Logger.warn('Cannot call hideConsentNotice before consent model is selected.');
                return;
            }
            var mode = consentModel.layout.ui.mode;
            var initComponent = (_b = (_a = window.__MSFT_SDK.Store.getters.template) === null || _a === void 0 ? void 0 : _a.modes.find(function (m) { return m.name === mode; })) === null || _b === void 0 ? void 0 : _b.initPage;
            initComponent && TemplateHandler.closeIFrame(initComponent);
        };
        /**
         * Set iframe display to none
         *
         * @param  {string} iframeId id of iframe element
         */
        TemplateHandler.closeIFrame = function (iframeId) {
            var _a;
            var iframeElement = document.getElementById(iframeId);
            (_a = iframeElement === null || iframeElement === void 0 ? void 0 : iframeElement.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(iframeElement);
        };
        TemplateHandler.initialized = false;
        return TemplateHandler;
    }());

    window.onmessage = function (e) { return __awaiter(void 0, void 0, void 0, function () {
        var response;
        var _a;
        var _b;
        return __generator(this, function (_c) {
            switch (_c.label) {
                case 0:
                    if (!(e.origin === 'null')) return [3 /*break*/, 3];
                    if (window.__MSFT_SDK.Store.getters.isActionDisabled &&
                        e.data.method === 'trigger') {
                        return [2 /*return*/];
                    }
                    response = (_a = window.MSFTConsent)[e.data.method].apply(_a, __spreadArray([], __read(e.data.params), false));
                    if (!(response instanceof Promise)) return [3 /*break*/, 2];
                    return [4 /*yield*/, response];
                case 1:
                    response = _c.sent();
                    _c.label = 2;
                case 2:
                    if (e.data.responseId) {
                        (_b = e.source) === null || _b === void 0 ? void 0 : _b.postMessage(__assign(__assign({}, e.data), { response: response }), { targetOrigin: '*' });
                    }
                    _c.label = 3;
                case 3: return [2 /*return*/];
            }
        });
    }); };
    window.__MSFT_SDK.EventBus.on(PublicEvents.AnchorTagClicked, function (_a) {
        var attributes = _a.attributes;
        var aTag = document.createElement('a');
        Object.keys(attributes).forEach(function (attrName) {
            aTag.setAttribute(attrName, attributes[attrName]);
        });
        aTag.click();
    });
    new TemplateHandler();

}());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJlc2VudGF0aW9uLm1pbi5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIi4uLy4uLy4uLy4uLy4uL1NESy9zcmMvY29yZS9jb25zdGFudHMvZW51bXMudHMiLCIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL2NvcmUvdXRpbHMvT2JqZWN0VXRpbHMudHMiLCIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL2NvcmUvZGVwZW5kZW5jeU1hbmFnZXIvZW51bS9tb2R1bGVzLnRzIiwiLi4vLi4vLi4vLi4vLi4vU0RLL3NyYy9jb3JlL3N0b3JlL1N0YXRlLnRzIiwiLi4vLi4vLi4vLi4vLi4vU0RLL3NyYy9jb3JlL3N0b3JlL0dldHRlcnMudHMiLCIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL2NvcmUvc3RvcmUvUmVkdWNlcnMudHMiLCIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL2NvcmUvc3RvcmUvaW5kZXgudHMiLCIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL2NvcmUvbG9nZ2VyL2VudW0udHMiLCIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL2NvcmUvbG9nZ2VyL3BsdWdpbnMvQ29uc29sZUxvZ2dlci50cyIsIi4uLy4uLy4uLy4uLy4uL1NESy9zcmMvY29yZS9sb2dnZXIvaW5kZXgudHMiLCIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL3ByZXNlbnRhdGlvbi9oYW5kbGViYXJIZWxwZXJzLnRzIiwiLi4vLi4vLi4vLi4vLi4vU0RLL3NyYy9wcmVzZW50YXRpb24vVGVtcGxhdGVIYW5kbGVyLnRzIiwiLi4vLi4vLi4vLi4vLi4vU0RLL3NyYy9wcmVzZW50YXRpb24vaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fY3JlYXRlQmluZGluZyA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XHJcbiAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xyXG4gICAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpO1xyXG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIG9bazJdID0gbVtrXTtcclxufSk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIG8pIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobywgcCkpIF9fY3JlYXRlQmluZGluZyhvLCBtLCBwKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gXCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiIDogXCJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuLyoqIEBkZXByZWNhdGVkICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuLyoqIEBkZXByZWNhdGVkICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5cygpIHtcclxuICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxyXG4gICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxyXG4gICAgICAgICAgICByW2tdID0gYVtqXTtcclxuICAgIHJldHVybiByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheSh0bywgZnJvbSwgcGFjaykge1xyXG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XHJcbiAgICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XHJcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xyXG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xyXG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgc3RhdGUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIGdldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIGtpbmQgPT09IFwibVwiID8gZiA6IGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyKSA6IGYgPyBmLnZhbHVlIDogc3RhdGUuZ2V0KHJlY2VpdmVyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRTZXQocmVjZWl2ZXIsIHN0YXRlLCB2YWx1ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwibVwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBtZXRob2QgaXMgbm90IHdyaXRhYmxlXCIpO1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiAoa2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIsIHZhbHVlKSA6IGYgPyBmLnZhbHVlID0gdmFsdWUgOiBzdGF0ZS5zZXQocmVjZWl2ZXIsIHZhbHVlKSksIHZhbHVlO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEluKHN0YXRlLCByZWNlaXZlcikge1xyXG4gICAgaWYgKHJlY2VpdmVyID09PSBudWxsIHx8ICh0eXBlb2YgcmVjZWl2ZXIgIT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHJlY2VpdmVyICE9PSBcImZ1bmN0aW9uXCIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHVzZSAnaW4nIG9wZXJhdG9yIG9uIG5vbi1vYmplY3RcIik7XHJcbiAgICByZXR1cm4gdHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciA9PT0gc3RhdGUgOiBzdGF0ZS5oYXMocmVjZWl2ZXIpO1xyXG59XHJcbiIsImV4cG9ydCBlbnVtIENvbnNlbnRNb2RlbFR5cGUge1xyXG4gIEV4cGxpY2l0ID0gJ0V4cGxpY2l0JyxcclxuICBJbXBsaWNpdCA9ICdJbXBsaWNpdCcsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFB1YmxpY0V2ZW50cyB7XHJcbiAgQ29uc2VudENoYW5nZWQgPSAnQ29uc2VudENoYW5nZWQnLFxyXG4gIFNob3dDb25zZW50Tm90aWNlID0gJ1Nob3dDb25zZW50Tm90aWNlJyxcclxuICBTaG93Rmlyc3RQYWdlID0gJ1Nob3dGaXJzdFBhZ2UnLFxyXG4gIENsb3NlQ29uc2VudE5vdGljZSA9ICdDbG9zZUNvbnNlbnROb3RpY2UnLFxyXG4gIEFjY2VwdEFsbCA9ICdBY2NlcHRBbGwnLFxyXG4gIFJlamVjdEFsbCA9ICdSZWplY3RBbGwnLFxyXG4gIFNob3dUZW1wbGF0ZSA9ICdTaG93VGVtcGxhdGUnLFxyXG4gIENsb3NlVGVtcGxhdGUgPSAnQ2xvc2VUZW1wbGF0ZScsXHJcbiAgVXBkYXRlQ29uc2VudCA9ICdVcGRhdGVDb25zZW50JyxcclxuICBBbmNob3JUYWdDbGlja2VkID0gJ0FuY2hvclRhZ0NsaWNrZWQnLFxyXG4gIEZldGNoQ29uZmlnID0gJ0ZldGNoQ29uZmlnJyxcclxuICBRdWVzdGlvbnNGb3JtU3VibWl0V2l0aG91dE1ldGFEYXRhID0gJ1F1ZXN0aW9uc0Zvcm1TdWJtaXRXaXRob3V0TWV0YURhdGEnLFxyXG4gIFF1ZXN0aW9uc0Zvcm1TdWJtaXQgPSAnUXVlc3Rpb25zRm9ybVN1Ym1pdCcsXHJcbiAgU2hvd1ByZWZlcmVuY2VzID0gJ1Nob3dQcmVmZXJlbmNlcycsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIEV2ZW50cyB7XHJcbiAgSW5pdCA9ICdJbml0JyxcclxuICBDb3JlQ29uc2VudE1vZGVsU2VsZWN0ZWQgPSAnQ29yZUNvbnNlbnRNb2RlbFNlbGVjdGVkJyxcclxuICBDb25maWdSZWFkeSA9ICdDb25maWdSZWFkeScsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFNES01vZGUge1xyXG4gIERlZmF1bHQgPSAnRGVmYXVsdCcsXHJcbiAgSGVhZExlc3MgPSAnSGVhZExlc3MnLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBTdHlsZVR5cGUge1xyXG4gIFVybCA9ICdVcmwnLFxyXG4gIFRleHQgPSAnVGV4dCcsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFByZWZlcmVuY2Uge1xyXG4gIE9GRiA9ICcwJyxcclxuICBPTiA9ICcxJyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gQ29va2llIHtcclxuICBDb25zZW50ID0gJ21zZnQtY29uc2VudCcsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFJlZ2lzdGVyZWREaXZUeXBlIHtcclxuICBTY3JpcHQgPSAnc2NyaXB0JyxcclxuICBJRnJhbWUgPSAnaWZyYW1lJyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gTm90aWNlVHlwZSB7XHJcbiAgVHJhY2tlckNhdGVnb3J5ID0gJ3RyYWNrZXJDYXRlZ29yeScsXHJcbiAgUXVlc3Rpb25zID0gJ1F1ZXN0aW9ucycsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIEVycm9yU3RyaW5ncyB7XHJcbiAgVGVtcGxhdGVFcnJvciA9ICc8Yj5UaGVyZSBpcyBzb21ldGhpbmcgd3Jvbmcgd2l0aCB0ZW1wbGF0ZS4gUGxlYXNlIGNoZWNrIGxvZ3MuPC9iPicsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIEludGVydmFsVW5pdHMge1xyXG4gIGRheSA9ICdkYXknLFxyXG4gIHdlZWsgPSAnd2VlaycsXHJcbiAgbW9udGggPSAnbW9udGgnLFxyXG4gIHllYXIgPSAneWVhcicsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFF1ZXN0aW9uVHlwZSB7XHJcbiAgVGV4dCA9ICdUZXh0JyxcclxuICBFbWFpbCA9ICdFbWFpbCcsXHJcbiAgUmFkaW8gPSAnUmFkaW8nLFxyXG4gIE11bHRpU2VsZWN0ID0gJ011bHRpU2VsZWN0JyxcclxuICBTZWxlY3QgPSAnU2VsZWN0JyxcclxuICBEYXRlID0gJ0RhdGUnLFxyXG4gIFBob25lTnVtYmVyID0gJ1Bob25lTnVtYmVyJyxcclxuICBDcmVkaXRDYXJkID0gJ0NyZWRpdENhcmQnLFxyXG4gIE51bWJlciA9ICdOdW1iZXInLFxyXG4gIE11bHRpTGluZVRleHQgPSAnbXVsdGlMaW5lVGV4dCcsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFF1ZXN0aW9uVmFsaWRhdGlvbiB7XHJcbiAgUmVxdWlyZWQgPSAnUmVxdWlyZWQnLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBRdWVzdGlvbkZpZWxkIHtcclxuICBRdWVzdGlvbiA9ICdxdWVzdGlvbicsXHJcbiAgUGxhY2Vob2xkZXIgPSAncGxhY2Vob2xkZXInLFxyXG4gIE9wdGlvbnMgPSAnb3B0aW9ucycsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIE1vZGVsS2luZCB7XHJcbiAgV2ViQ29uc2VudE1vZGVsID0gJ1dlYkNvbnNlbnRNb2RlbCcsXHJcbiAgUXVlc3Rpb25Nb2RlbCA9ICdEU1JTdWJtaXNzaW9uTW9kZWwnLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBQYWNrYWdlS2luZCB7XHJcbiAgV2ViQ29uc2VudFBhY2thZ2UgPSAnIFdlYkNvbnNlbnRQYWNrYWdlJyxcclxuICBGSURFU1BhY2thZ2UgPSAnRklERVNQYWNrYWdlJyxcclxuICBEU1JTdWJtaXNzaW9uUGFja2FnZSA9ICdEU1JTdWJtaXNzaW9uUGFja2FnZScsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFRlbXBsYXRlIHtcclxuICBQcmVmZXJlbmNlcyA9ICdQcmVmZXJlbmNlcycsXHJcbn1cclxuIiwiY2xhc3MgT2JqZWN0VXRpbHMge1xyXG4gIHB1YmxpYyBzdGF0aWMgaXNPYmplY3QoaXRlbTogYW55KSB7XHJcbiAgICByZXR1cm4gaXRlbSAmJiB0eXBlb2YgaXRlbSA9PT0gJ29iamVjdCcgJiYgIUFycmF5LmlzQXJyYXkoaXRlbSk7XHJcbiAgfVxyXG4gIHB1YmxpYyBzdGF0aWMgbWVyZ2VEZWVwKHRhcmdldDogYW55LCAuLi5zb3VyY2VzOiBhbnkpOiBhbnkge1xyXG4gICAgaWYgKCFzb3VyY2VzLmxlbmd0aCkgcmV0dXJuIHRhcmdldDtcclxuICAgIGNvbnN0IHNvdXJjZSA9IHNvdXJjZXMuc2hpZnQoKTtcclxuXHJcbiAgICBpZiAodGhpcy5pc09iamVjdCh0YXJnZXQpICYmIHRoaXMuaXNPYmplY3Qoc291cmNlKSkge1xyXG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBzb3VyY2UpIHtcclxuICAgICAgICBpZiAodGhpcy5pc09iamVjdChzb3VyY2Vba2V5XSkpIHtcclxuICAgICAgICAgIGlmICghdGFyZ2V0W2tleV0pIE9iamVjdC5hc3NpZ24odGFyZ2V0LCB7IFtrZXldOiB7fSB9KTtcclxuICAgICAgICAgIHRoaXMubWVyZ2VEZWVwKHRhcmdldFtrZXldLCBzb3VyY2Vba2V5XSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIE9iamVjdC5hc3NpZ24odGFyZ2V0LCB7IFtrZXldOiBzb3VyY2Vba2V5XSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLm1lcmdlRGVlcCh0YXJnZXQsIC4uLnNvdXJjZXMpO1xyXG4gIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBPYmplY3RVdGlscztcclxuIiwiZXhwb3J0IGVudW0gU0RLTW9kdWxlcyB7XHJcbiAgUFJFU0VOVEFUSU9OID0gJ3ByZXNlbnRhdGlvbicsXHJcbiAgUFJFVklFVyA9ICdwcmV2aWV3JyxcclxuICBDT05GSUcgPSAnY29uZmlnJyxcclxuICBIQU5ETEVCQVIgPSAnaGFuZGxlYmFyJyxcclxuICBQUk9YWSA9ICdwcm94eScsXHJcbiAgRFNSID0gJ2RzcicsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFNES01vZHVsZXNQYXRoIHtcclxuICBQUkVTRU5UQVRJT04gPSAnJGpzUm9vdFBhdGgvbXNmdC1wcml2YWN5L2pzL3ByZXNlbnRhdGlvbi5taW4uanMnLFxyXG4gIFBSRVZJRVcgPSAnJGpzUm9vdFBhdGgvbXNmdC1wcml2YWN5L2pzL3ByZXZpZXcubWluLmpzJyxcclxuICBIQU5ETEVCQVIgPSAnJGpzUm9vdFBhdGgvbXNmdC1wcml2YWN5L2pzL3ZlbmRvci9oYW5kbGViYXJzLm1pbi5qcycsXHJcbiAgUFJPWFkgPSAnJGpzUm9vdFBhdGgvbXNmdC1wcml2YWN5L2pzL3Byb3h5Lm1pbi5qcycsXHJcbiAgRFNSID0gJyRqc1Jvb3RQYXRoL21zZnQtcHJpdmFjeS9qcy9kc3IubWluLmpzJyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gU0RLTW9kdWxlc1NvdXJjZVZhcmlhYmxlIHtcclxuICBQUkVTRU5UQVRJT04gPSAnbXNmdC1wcmVzZW50YXRpb24uanMnLFxyXG4gIEhBTkRMRUJBUiA9ICdtc2Z0LWhhbmRsZWJhcnMuanMnLFxyXG4gIFBST1hZID0gJ21zZnQtcHJveHkuanMnLFxyXG4gIERTUiA9ICdkc3IuanMnLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBNb2R1bGVTb3VyY2VUeXBlIHtcclxuICBQQVRIID0gJ3BhdGgnLFxyXG4gIFZBUklBQkxFID0gJ3ZhcmlhYmxlJyxcclxufVxyXG4iLCJpbXBvcnQgeyBJU3RhdGUgfSBmcm9tICcuL3R5cGVzJztcclxuXHJcbmNsYXNzIFN0YXRlIHtcclxuICBwdWJsaWMgc3RhdGU6IElTdGF0ZTtcclxuXHJcbiAgY29uc3RydWN0b3Ioc3RhdGU/OiBJU3RhdGUpIHtcclxuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZSB8fCB7XHJcbiAgICAgIGNvbmZpZzoge30sXHJcbiAgICAgIGRlYnVnOiB7XHJcbiAgICAgICAgbG9nczogW10sXHJcbiAgICAgICAgZXZlbnRzOiBbXSxcclxuICAgICAgfSxcclxuICAgICAgY3VzdG9tOiB7fSxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IFN0YXRlO1xyXG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzICovXHJcbmltcG9ydCB7IFNES01vZHVsZXNTb3VyY2VWYXJpYWJsZSB9IGZyb20gJ2NvcmUvZGVwZW5kZW5jeU1hbmFnZXIvZW51bS9tb2R1bGVzJztcclxuaW1wb3J0IFN0YXRlIGZyb20gJy4vU3RhdGUnO1xyXG5pbXBvcnQgeyBJQ29uZmlnU3RhdGUsIElEZWJ1Z1N0YXRlLCBJU3RhdGUgfSBmcm9tICcuL3R5cGVzJztcclxuXHJcbmludGVyZmFjZSBHZXR0ZXJzIGV4dGVuZHMgSVN0b3JlLklHZXR0ZXIge1xyXG4gIFt4OiBzdHJpbmddOiBhbnk7XHJcbn1cclxuY2xhc3MgR2V0dGVycyBleHRlbmRzIFN0YXRlIHtcclxuICBjb25zdHJ1Y3RvcihzdGF0ZTogSVN0YXRlKSB7XHJcbiAgICBzdXBlcihzdGF0ZSk7XHJcbiAgfVxyXG4gIGdldCBkZWJ1Z0luZm8oKTogSURlYnVnU3RhdGUge1xyXG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuZGVidWc7XHJcbiAgfVxyXG5cclxuICBnZXQgY29uZmlnKCk6IElDb25maWdTdGF0ZSB7XHJcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5jb25maWc7XHJcbiAgfVxyXG4gIGdldCB1c2VyQ29uc2VudCgpOiBJVXNlckNvbnNlbnQge1xyXG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuY3VzdG9tLnVzZXJDb25zZW50O1xyXG4gIH1cclxuXHJcbiAgLy8gVE9ETzogSW1wbGVtZW50IGJlbG93IGdldHRlcnNcclxuICBnZXQgaXNIZWFkbGVzcygpOiBib29sZWFuIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIGdldCBpc1ByZXZpZXdNb2RlKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuY29uZmlnLmluaXRDb25maWc/LnByZXZpZXcgfHwgZmFsc2U7XHJcbiAgfVxyXG5cclxuICBnZXQgaXNBY3Rpb25EaXNhYmxlZCgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLnN0YXRlLmNvbmZpZy5pbml0Q29uZmlnPy5kaXNhYmxlQWN0aW9ucyB8fCBmYWxzZTtcclxuICB9XHJcblxyXG4gIGdldCBpc0xpdmVQcmV2aWV3TW9kZSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB3aW5kb3cucGFyZW50Py5uYW1lID09PSAnQ29uc2VudExpdmVQcmV2aWV3JztcclxuICB9XHJcblxyXG4gIGdldCBwcmVzZW50YXRpb25WYXJpYWJsZSgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIFNES01vZHVsZXNTb3VyY2VWYXJpYWJsZS5QUkVTRU5UQVRJT047XHJcbiAgfVxyXG5cclxuICBnZXQgaGFuZGxlYmFyVmFyaWFibGUoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBTREtNb2R1bGVzU291cmNlVmFyaWFibGUuSEFORExFQkFSO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHByb3h5VmFyaWFibGUoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBTREtNb2R1bGVzU291cmNlVmFyaWFibGUuUFJPWFk7XHJcbiAgfVxyXG5cclxuICBnZXQgZHNyVmFyaWFibGUoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBTREtNb2R1bGVzU291cmNlVmFyaWFibGUuRFNSO1xyXG4gIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBHZXR0ZXJzO1xyXG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzICovXHJcbmltcG9ydCBTdGF0ZSBmcm9tICcuL1N0YXRlJztcclxuaW1wb3J0IHsgSVN0YXRlIH0gZnJvbSAnLi90eXBlcyc7XHJcblxyXG5pbnRlcmZhY2UgUmVkdWNlcnMgZXh0ZW5kcyBJU3RvcmUuSVJlZHVjZXIge1xyXG4gIFt4OiBzdHJpbmddOiBhbnk7XHJcbn1cclxuY2xhc3MgUmVkdWNlcnMgZXh0ZW5kcyBTdGF0ZSB7XHJcbiAgY29uc3RydWN0b3Ioc3RhdGU6IElTdGF0ZSkge1xyXG4gICAgc3VwZXIoc3RhdGUpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNhdmVEZWJ1Z0luZm8oeyBldmVudCwgbG9nIH06IHsgZXZlbnQ/OiBzdHJpbmc7IGxvZz86IHN0cmluZyB9KSB7XHJcbiAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgdGhpcy5zdGF0ZS5kZWJ1Zy5ldmVudHMucHVzaChldmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGxvZykge1xyXG4gICAgICB0aGlzLnN0YXRlLmRlYnVnLmxvZ3MucHVzaChsb2cpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldFVzZXJDb25zZW50KGNvbnNlbnQ6IElVc2VyQ29uc2VudCkge1xyXG4gICAgdGhpcy5zdGF0ZS5jdXN0b20udXNlckNvbnNlbnQgPSBjb25zZW50O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldEluaXRDb25maWcoaW5pdENvbmZpZzogSUluaXRDb25maWcpIHtcclxuICAgIHRoaXMuc3RhdGUuY29uZmlnLmluaXRDb25maWcgPSBpbml0Q29uZmlnO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUmVkdWNlcnM7XHJcbiIsImltcG9ydCBPYmplY3RVdGlscyBmcm9tICcuLi91dGlscy9PYmplY3RVdGlscyc7XHJcbmltcG9ydCBHZXR0ZXJzIGZyb20gJy4vR2V0dGVycyc7XHJcbmltcG9ydCBSZWR1Y2VycyBmcm9tICcuL1JlZHVjZXJzJztcclxuaW1wb3J0IFN0YXRlIGZyb20gJy4vU3RhdGUnO1xyXG5cclxuY29uc3QgeyBzdGF0ZSB9ID0gbmV3IFN0YXRlKCk7XHJcbmNvbnN0IGdldHRlciA9IG5ldyBHZXR0ZXJzKHN0YXRlKTtcclxuY29uc3QgcmVkdWNlciA9IG5ldyBSZWR1Y2VycyhzdGF0ZSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgZ2V0dGVyczogZ2V0dGVyLFxyXG4gIHJlZHVjZXJzOiByZWR1Y2VyLFxyXG4gIGFkZFJlZHVjZXJzOiBmdW5jdGlvbiAocmVkdWNlcnM6IGFueSkge1xyXG4gICAgdGhpcy5yZWR1Y2VycyA9IE9iamVjdFV0aWxzLm1lcmdlRGVlcCh0aGlzLnJlZHVjZXJzLCByZWR1Y2Vycyk7XHJcbiAgfSxcclxuICBhZGRHZXR0ZXJzOiBmdW5jdGlvbiAoZ2V0dGVyczogYW55KSB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhcclxuICAgICAgdGhpcy5nZXR0ZXJzLFxyXG4gICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhnZXR0ZXJzLnByb3RvdHlwZSksXHJcbiAgICApO1xyXG4gIH0sXHJcbn07XHJcbiIsImV4cG9ydCBlbnVtIExvZ0xldmVscyB7XHJcbiAgSU5GTyxcclxuICBXQVJOLFxyXG4gIEVSUk9SLFxyXG59XHJcbiIsImltcG9ydCB7IExvZ0xldmVscyB9IGZyb20gJy4uL2VudW0nO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29uc29sZUxvZ2dlciB7XHJcbiAgLyoqXHJcbiAgICogQnJvd3NlcidzIGNvbnNvbGUgbG9nZ2VyIHBsdWdpbi5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7TG9nTGV2ZWxzfSBsZXZlbCBMb2cgbGV2ZWxcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBMb2cgbWVzc2FnZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgbG9nKGxldmVsOiBMb2dMZXZlbHMsIG1lc3NhZ2U6IHN0cmluZykge1xyXG4gICAgc3dpdGNoIChsZXZlbCkge1xyXG4gICAgICBjYXNlIExvZ0xldmVscy5XQVJOOlxyXG4gICAgICAgIGNvbnNvbGUud2FybihtZXNzYWdlKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBMb2dMZXZlbHMuRVJST1I6XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFN0b3JlIGZyb20gJy4uL3N0b3JlJztcclxuaW1wb3J0IHsgTG9nTGV2ZWxzIH0gZnJvbSAnLi9lbnVtJztcclxuaW1wb3J0IENvbnNvbGVMb2dnZXIgZnJvbSAnLi9wbHVnaW5zL0NvbnNvbGVMb2dnZXInO1xyXG5cclxuLyoqXHJcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCJjb3JlL3R5cGVzL2ludGVyZmFjZXNcIikuSUdlbmVyaWNPYmplY3R9IElHZW5lcmljT2JqZWN0XHJcbiAqL1xyXG5jbGFzcyBMb2dnZXIge1xyXG4gIC8qKlxyXG4gICAqIEluZm8gbG9nc1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgTG9nZ2VyIG1lc3NhZ2VcclxuICAgKiBAcGFyYW0ge0lHZW5lcmljT2JqZWN0fSBkYXRhIEFkZGl0aW9uYWwgZGV0YWlscyB0byBsb2dcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGluZm8obWVzc2FnZTogc3RyaW5nLCBkYXRhPzogSUdlbmVyaWNPYmplY3QpIHtcclxuICAgIExvZ2dlci5sb2coTG9nTGV2ZWxzLklORk8sIG1lc3NhZ2UsIGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogV2FybmluZyBsb2dzXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBMb2dnZXIgbWVzc2FnZVxyXG4gICAqIEBwYXJhbSB7SUdlbmVyaWNPYmplY3R9IGRhdGEgQWRkaXRpb25hbCBkZXRhaWxzIHRvIGxvZ1xyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgd2FybihtZXNzYWdlOiBzdHJpbmcsIGRhdGE/OiBJR2VuZXJpY09iamVjdCkge1xyXG4gICAgTG9nZ2VyLmxvZyhMb2dMZXZlbHMuV0FSTiwgbWVzc2FnZSwgZGF0YSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBFcnJvciBsb2dzXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBMb2dnZXIgbWVzc2FnZVxyXG4gICAqIEBwYXJhbSB7SUdlbmVyaWNPYmplY3R9IGRhdGEgQWRkaXRpb25hbCBkZXRhaWxzIHRvIGxvZ1xyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZXJyb3IobWVzc2FnZTogc3RyaW5nLCBkYXRhPzogSUdlbmVyaWNPYmplY3QpIHtcclxuICAgIExvZ2dlci5sb2coTG9nTGV2ZWxzLkVSUk9SLCBtZXNzYWdlLCBkYXRhKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIExvZ3MgdGhlIG1lc3NhZ2UgdXNpbmcgdGhlIHBsdWdpbiBiYXNlZCBpbiBsZXZlbC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7TG9nTGV2ZWxzfSBsb2dMZXZlbCBMb2cgbGV2ZWxcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBMb2dnZXIgbWVzc2FnZVxyXG4gICAqIEBwYXJhbSB7SUdlbmVyaWNPYmplY3R9IGRhdGEgQWRkaXRpb25hbCBkZXRhaWxzIHRvIGxvZ1xyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIGxvZyhcclxuICAgIGxvZ0xldmVsOiBMb2dMZXZlbHMsXHJcbiAgICBtZXNzYWdlOiBzdHJpbmcsXHJcbiAgICBkYXRhPzogSUdlbmVyaWNPYmplY3QsXHJcbiAgKSB7XHJcbiAgICBjb25zdCBmb3JtYXR0ZWRNZXNzYWdlID0gTG9nZ2VyLmZvcm1hdExvZ01lc3NhZ2UobG9nTGV2ZWwsIG1lc3NhZ2UsIGRhdGEpO1xyXG5cclxuICAgIFN0b3JlLnJlZHVjZXJzLnNhdmVEZWJ1Z0luZm8oeyBsb2c6IGZvcm1hdHRlZE1lc3NhZ2UgfSk7XHJcbiAgICBDb25zb2xlTG9nZ2VyLmxvZyhsb2dMZXZlbCwgZm9ybWF0dGVkTWVzc2FnZSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGb3JtYXRzIHRoZSBsb2dnZXIgbWVzc2FnZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7TG9nTGV2ZWxzfSBsb2dMZXZlbCBMb2cgbGV2ZWxcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBMb2dnZXIgbWVzc2FnZVxyXG4gICAqIEBwYXJhbSB7SUdlbmVyaWNPYmplY3R9IGRhdGEgQWRkaXRpb25hbCBkZXRhaWxzIHRvIGxvZ1xyXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IEZvcm1hdHRlZCBsb2dnZXIgbWVzc2FnZVxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIGZvcm1hdExvZ01lc3NhZ2UoXHJcbiAgICBsb2dMZXZlbDogTG9nTGV2ZWxzLFxyXG4gICAgbWVzc2FnZTogc3RyaW5nLFxyXG4gICAgZGF0YT86IElHZW5lcmljT2JqZWN0LFxyXG4gICk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBzdHJpbmdpZmllZERhdGEgPSBkYXRhID8gYHwgJHtKU09OLnN0cmluZ2lmeShkYXRhKX1gIDogJyc7XHJcbiAgICByZXR1cm4gYFske0xvZ0xldmVsc1tsb2dMZXZlbF19XSAke21lc3NhZ2V9ICR7c3RyaW5naWZpZWREYXRhfWA7XHJcbiAgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IExvZ2dlcjtcclxuIiwiZXhwb3J0IGNvbnN0IHJlZ2lzdGVySGVwbGVycyA9ICgpID0+IHtcclxuICBpZiAod2luZG93LkhhbmRsZWJhcnMpIHtcclxuICAgIHdpbmRvdy5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCd0b0xvd2VyQ2FzZScsIGZ1bmN0aW9uICh0eXBlOiBzdHJpbmcpIHtcclxuICAgICAgcmV0dXJuIHR5cGUudG9Mb3dlckNhc2UoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHdpbmRvdy5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKFxyXG4gICAgICAnZXF1YWxzJyxcclxuICAgICAgZnVuY3Rpb24gKHBhcmFtMTogc3RyaW5nLCBwYXJhbTI6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiBwYXJhbTEudG9Mb3dlckNhc2UoKSA9PT0gcGFyYW0yLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgIH0sXHJcbiAgICApO1xyXG4gIH1cclxufTtcclxuIiwiaW1wb3J0IExvZ2dlciBmcm9tICdjb3JlL2xvZ2dlcic7XHJcbmltcG9ydCB7XHJcbiAgRXJyb3JTdHJpbmdzLFxyXG4gIE1vZGVsS2luZCxcclxuICBOb3RpY2VUeXBlLFxyXG4gIFF1ZXN0aW9uVmFsaWRhdGlvbixcclxuICBTdHlsZVR5cGUsXHJcbiAgVGVtcGxhdGUsXHJcbn0gZnJvbSAnY29yZS9jb25zdGFudHMvZW51bXMnO1xyXG5pbXBvcnQgeyByZWdpc3RlckhlcGxlcnMgfSBmcm9tICcuL2hhbmRsZWJhckhlbHBlcnMnO1xyXG5cclxuY2xhc3MgVGVtcGxhdGVIYW5kbGVyIHtcclxuICBwcml2YXRlIHN0YXRpYyBpbml0aWFsaXplZCA9IGZhbHNlO1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XHJcbiAgICBUZW1wbGF0ZUhhbmRsZXIucmVnaXN0ZXJTaG93VGVtcGxhdGVIYW5kbGVycygpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVnaXN0ZXIgZXZlbnQgaGFuZGxlcnMgdG8gb3Blbi9jbG9zZSBkaWZmZXJlbnQgdGVtcGxhdGVzXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgcmVnaXN0ZXJTaG93VGVtcGxhdGVIYW5kbGVycygpIHtcclxuICAgIHdpbmRvdy5fX01TRlRfU0RLLkV2ZW50QnVzLm9uKFxyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NESy5lbnVtcy5QdWJsaWNFdmVudHMuU2hvd0NvbnNlbnROb3RpY2UsXHJcbiAgICAgIFRlbXBsYXRlSGFuZGxlci5zaG93Rmlyc3RQYWdlLFxyXG4gICAgKTtcclxuICAgIHdpbmRvdy5fX01TRlRfU0RLLkV2ZW50QnVzLm9uKFxyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NESy5lbnVtcy5QdWJsaWNFdmVudHMuQ2xvc2VDb25zZW50Tm90aWNlLFxyXG4gICAgICBUZW1wbGF0ZUhhbmRsZXIuaGlkZUNvbnNlbnROb3RpY2UsXHJcbiAgICApO1xyXG4gICAgd2luZG93Ll9fTVNGVF9TREsuRXZlbnRCdXMub24oXHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLLmVudW1zLkV2ZW50cy5Jbml0LFxyXG4gICAgICBUZW1wbGF0ZUhhbmRsZXIuc2F2ZVN0eWxlc09uSW5pdCxcclxuICAgICk7XHJcbiAgICB3aW5kb3cuX19NU0ZUX1NESy5FdmVudEJ1cy5vbihcclxuICAgICAgd2luZG93Ll9fTVNGVF9TREsuZW51bXMuUHVibGljRXZlbnRzLlNob3dUZW1wbGF0ZSxcclxuICAgICAgVGVtcGxhdGVIYW5kbGVyLnNob3dUZW1wbGF0ZSxcclxuICAgICk7XHJcbiAgICB3aW5kb3cuX19NU0ZUX1NESy5FdmVudEJ1cy5vbihcclxuICAgICAgd2luZG93Ll9fTVNGVF9TREsuZW51bXMuUHVibGljRXZlbnRzLkNsb3NlVGVtcGxhdGUsXHJcbiAgICAgIFRlbXBsYXRlSGFuZGxlci5jbG9zZVRlbXBsYXRlLFxyXG4gICAgKTtcclxuICAgIHdpbmRvdy5fX01TRlRfU0RLLkV2ZW50QnVzLm9uKFxyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NESy5lbnVtcy5FdmVudHMuQ29uZmlnUmVhZHksXHJcbiAgICAgIFRlbXBsYXRlSGFuZGxlci5pbml0LFxyXG4gICAgKTtcclxuICAgIHdpbmRvdy5fX01TRlRfU0RLLkV2ZW50QnVzLm9uKFxyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NESy5lbnVtcy5QdWJsaWNFdmVudHMuU2hvd1ByZWZlcmVuY2VzLFxyXG4gICAgICBUZW1wbGF0ZUhhbmRsZXIuc2hvd1ByZWZlcmVuY2VzLFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3RhdGljIHNob3dQcmVmZXJlbmNlcygpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIFRlbXBsYXRlSGFuZGxlci5zaG93VGVtcGxhdGUoeyB0ZW1wbGF0ZUlkOiBUZW1wbGF0ZS5QcmVmZXJlbmNlcyB9KTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgVGVtcGxhdGVIYW5kbGVyLnNob3dGaXJzdFBhZ2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNob3cgdGVtcGxhdGVcclxuICAgKlxyXG4gICAqIEBwYXJhbSAge2ltcG9ydChcImNvcmUvdHlwZXMvaW50ZXJmYWNlc1wiKS5JR2VuZXJpY09iamVjdH0gcGF5bG9hZCBwYXlsb2FkIGRhdGFcclxuICAgKi9cclxuICBwcml2YXRlIHN0YXRpYyBzaG93VGVtcGxhdGUoeyB0ZW1wbGF0ZUlkIH06IElHZW5lcmljT2JqZWN0KTogdm9pZCB7XHJcbiAgICBpZiAoXHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLLlN0b3JlLmdldHRlcnMuY29tcG9uZW50cyAmJlxyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NESy5TdG9yZS5nZXR0ZXJzLmNvbXBvbmVudHNbdGVtcGxhdGVJZF1cclxuICAgICkge1xyXG4gICAgICBjb25zdCBjb25zZW50TW9kZWwgPSB3aW5kb3cuX19NU0ZUX1NESy5TdG9yZS5nZXR0ZXJzLmN1cnJlbnRNb2RlbDtcclxuICAgICAgVGVtcGxhdGVIYW5kbGVyLnNob3dUZW1wbGF0ZUluSUZyYW1lKFxyXG4gICAgICAgIHdpbmRvdy5fX01TRlRfU0RLLlN0b3JlLmdldHRlcnMuY29tcG9uZW50c1t0ZW1wbGF0ZUlkXSxcclxuICAgICAgICB0ZW1wbGF0ZUlkLFxyXG4gICAgICAgIFtcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgdHlwZTogU3R5bGVUeXBlLlRleHQsXHJcbiAgICAgICAgICAgIHZhbHVlOiBjb25zZW50TW9kZWw/LmxheW91dC51aS5jc3MgfHwgJycsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgVGVtcGxhdGVIYW5kbGVyLmdldFBhcmVudEVsZW1lbnQodGVtcGxhdGVJZCksXHJcbiAgICAgICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRlbXBsYXRlIDogJHt0ZW1wbGF0ZUlkfSBub3QgZm91bmQuYCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBIaWRlIHRlbXBsYXRlXHJcbiAgICpcclxuICAgKiBAcGFyYW0gIHtpbXBvcnQoXCJjb3JlL3R5cGVzL2ludGVyZmFjZXNcIikuSUdlbmVyaWNPYmplY3R9IHBheWxvYWQgcGF5bG9hZCBkYXRhXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgY2xvc2VUZW1wbGF0ZSh7IHRlbXBsYXRlSWQgfTogSUdlbmVyaWNPYmplY3QpOiB2b2lkIHtcclxuICAgIFRlbXBsYXRlSGFuZGxlci5jbG9zZUlGcmFtZSh0ZW1wbGF0ZUlkKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNhdmUgc3R5bGVzIHBhc3NlZCBieSB1c2VyIGluIHdpbmRvdy5fX01TRlRfU0RLLlN0b3JlXHJcbiAgICpcclxuICAgKiBAcGFyYW0gIHtpbXBvcnQoXCJjb3JlL3R5cGVzL2ludGVyZmFjZXNcIikuSUluaXRDb25maWd9IGNvbmZpZyBpbml0IGNvbmZpZ1xyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIHNhdmVTdHlsZXNPbkluaXQoY29uZmlnOiBhbnkpIHtcclxuICAgIGlmIChjb25maWcuc3R5bGVzKSB7XHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLLkxvZ2dlci5pbmZvKFxyXG4gICAgICAgICd1c2VyIHByb3ZpZGVkIHN0eWxlcyBwZXJzaXN0ZWQgdG8gd2luZG93Ll9fTVNGVF9TREsuU3RvcmUuJyxcclxuICAgICAgKTtcclxuICAgICAgd2luZG93Ll9fTVNGVF9TREsuU3RvcmUucmVkdWNlcnMuc2V0U3R5bGVzKGNvbmZpZy5zdHlsZXMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdGF0aWMgdmFsaWRhdGlvbkFycmF5VG9PYmplY3QodmFsaWRhdGlvbnM6IFF1ZXN0aW9uVmFsaWRhdGlvbltdKSB7XHJcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMucmVkdWNlKChwcmV2aW91cywgY3VycmVudCkgPT4ge1xyXG4gICAgICByZXR1cm4geyAuLi5wcmV2aW91cywgW2N1cnJlbnRdOiB0cnVlIH07XHJcbiAgICB9LCB7fSk7XHJcbiAgfVxyXG4gIHByaXZhdGUgc3RhdGljIGdldFRlbXBsYXRlRGF0YShjb25zZW50TW9kZWw6IElNb2RlbCkge1xyXG4gICAgY29uc3QgZ3JvdXBlZFRyYW5zbGF0aW9ucyA9IHdpbmRvdy5fX01TRlRfU0RLLlN0b3JlLmdldHRlcnMudHJhbnNsYXRpb25zO1xyXG4gICAgY29uc3QgcXVlc3Rpb25zID0gd2luZG93Ll9fTVNGVF9TREsuU3RvcmUuZ2V0dGVycy5xdWVzdGlvbnM7XHJcbiAgICBjb25zdCB7IGlkOiBtb2RlbElkIH0gPSBjb25zZW50TW9kZWw7XHJcbiAgICBsZXQgZGF0YTogYW55ID0ge307XHJcbiAgICBsZXQgcXVlc3Rpb25XaXRoT3B0aW9uczogYW55ID0ge307XHJcbiAgICBkYXRhW05vdGljZVR5cGUuVHJhY2tlckNhdGVnb3J5XSA9IFtdO1xyXG4gICAgZGF0YVtOb3RpY2VUeXBlLlF1ZXN0aW9uc10gPSBbXTtcclxuICAgIGNvbnN0IHRyYWNrZXJDYXRlZ29yaWVzID0gbmV3IE1hcDxzdHJpbmcsIElNb2RlbFRyYWNrZXJDYXRlZ29yeT4oKTtcclxuICAgIGNvbnN0IHF1ZXN0aW9uc01hcCA9IG5ldyBNYXA8c3RyaW5nLCBJUXVlc3Rpb24+KCk7XHJcbiAgICBjb25zdCBhZGRlZFF1ZXN0aW9ucyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xyXG4gICAgY29uc3QgYWRkZWRUcmFja2VyQ2F0ZWdvcmllcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xyXG4gICAgaWYgKGNvbnNlbnRNb2RlbC5raW5kID09PSBNb2RlbEtpbmQuV2ViQ29uc2VudE1vZGVsKSB7XHJcbiAgICAgIChjb25zZW50TW9kZWwgYXMgSUNvbnNlbnRNb2RlbCkudHJhY2tlckNhdGVnb3JpZXMuZm9yRWFjaChjYXRlZ29yeSA9PiB7XHJcbiAgICAgICAgdHJhY2tlckNhdGVnb3JpZXMuc2V0KGNhdGVnb3J5LmlkLCBjYXRlZ29yeSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIGlmIChjb25zZW50TW9kZWwua2luZCA9PT0gTW9kZWxLaW5kLlF1ZXN0aW9uTW9kZWwpIHtcclxuICAgICAgcXVlc3Rpb25zLmZvckVhY2gocXVlc3Rpb24gPT4ge1xyXG4gICAgICAgIHF1ZXN0aW9uc01hcC5zZXQocXVlc3Rpb24ubmFtZSwgcXVlc3Rpb24pO1xyXG4gICAgICB9KTtcclxuICAgICAgZGF0YS5jYXB0Y2hhID0gKGNvbnNlbnRNb2RlbCBhcyBJUXVlc3Rpb25Nb2RlbCkuY2FwdGNoYTtcclxuICAgIH1cclxuICAgIGdyb3VwZWRUcmFuc2xhdGlvbnMuZm9yRWFjaChncm91cGVkVHJhbnNsYXRpb24gPT5cclxuICAgICAgT2JqZWN0LmtleXMoZ3JvdXBlZFRyYW5zbGF0aW9uKS5mb3JFYWNoKG5hbWVzcGFjZSA9PiB7XHJcbiAgICAgICAgaWYgKG5hbWVzcGFjZSA9PT0gbW9kZWxJZCkge1xyXG4gICAgICAgICAgZGF0YSA9IHsgLi4uZGF0YSwgLi4uZ3JvdXBlZFRyYW5zbGF0aW9uW25hbWVzcGFjZV0gfTtcclxuICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgcXVlc3Rpb25zTWFwLmhhcyhuYW1lc3BhY2UpICYmXHJcbiAgICAgICAgICAhYWRkZWRRdWVzdGlvbnMuaGFzKG5hbWVzcGFjZSlcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHF1ZXN0aW9uV2l0aE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIC4uLmdyb3VwZWRUcmFuc2xhdGlvbltuYW1lc3BhY2VdLFxyXG4gICAgICAgICAgICAuLi5xdWVzdGlvbnNNYXAuZ2V0KG5hbWVzcGFjZSksXHJcbiAgICAgICAgICAgIHZhbGlkYXRpb25zOiB0aGlzLnZhbGlkYXRpb25BcnJheVRvT2JqZWN0KFxyXG4gICAgICAgICAgICAgIHF1ZXN0aW9uc01hcC5nZXQobmFtZXNwYWNlKT8udmFsaWRhdGlvbnMgfHwgW10sXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgIHF1ZXN0aW9uV2l0aE9wdGlvbnMudmFsaWRhdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIC4uLnF1ZXN0aW9uV2l0aE9wdGlvbnMudmFsaWRhdGlvbnMsXHJcbiAgICAgICAgICAgIC4uLnRoaXMudmFsaWRhdGlvbkFycmF5VG9PYmplY3QoXHJcbiAgICAgICAgICAgICAgKGNvbnNlbnRNb2RlbCBhcyBJUXVlc3Rpb25Nb2RlbCkucXVlc3Rpb25zLmZpbmQoXHJcbiAgICAgICAgICAgICAgICBxdWVzdGlvbiA9PiBxdWVzdGlvbi5xdWVzdGlvbk5hbWUgPT0gbmFtZXNwYWNlLFxyXG4gICAgICAgICAgICAgICk/LnZhbGlkYXRpb25zIHx8IFtdLFxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIGRhdGFbTm90aWNlVHlwZS5RdWVzdGlvbnNdLnB1c2gocXVlc3Rpb25XaXRoT3B0aW9ucyk7XHJcbiAgICAgICAgICBhZGRlZFF1ZXN0aW9ucy5hZGQobmFtZXNwYWNlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNvbnNlbnRNb2RlbC5raW5kID09PSBNb2RlbEtpbmQuUXVlc3Rpb25Nb2RlbCkge1xyXG4gICAgICAgICAgZGF0YSA9IHsgLi4uZGF0YSwgW25hbWVzcGFjZV06IGdyb3VwZWRUcmFuc2xhdGlvbltuYW1lc3BhY2VdIH07XHJcbiAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgIHRyYWNrZXJDYXRlZ29yaWVzLmhhcyhuYW1lc3BhY2UpICYmXHJcbiAgICAgICAgICAhYWRkZWRUcmFja2VyQ2F0ZWdvcmllcy5oYXMobmFtZXNwYWNlKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgY29uc3QgY2F0ZWdvcnlUcmFuc2xhdGlvbiA9IHtcclxuICAgICAgICAgICAgLi4uZ3JvdXBlZFRyYW5zbGF0aW9uW25hbWVzcGFjZV0sXHJcbiAgICAgICAgICAgIG5hbWU6IHRyYWNrZXJDYXRlZ29yaWVzLmdldChuYW1lc3BhY2UpPy5jYXRlZ29yeU5hbWUsXHJcbiAgICAgICAgICAgIGlzRXNzZW50aWFsOiB0cmFja2VyQ2F0ZWdvcmllcy5nZXQobmFtZXNwYWNlKT8uaXNFc3NlbnRpYWwsXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgZGF0YVtOb3RpY2VUeXBlLlRyYWNrZXJDYXRlZ29yeV0ucHVzaChjYXRlZ29yeVRyYW5zbGF0aW9uKTtcclxuICAgICAgICAgIGFkZGVkVHJhY2tlckNhdGVnb3JpZXMuYWRkKG5hbWVzcGFjZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KSxcclxuICAgICk7XHJcbiAgICBkYXRhW05vdGljZVR5cGUuVHJhY2tlckNhdGVnb3J5XSA9IFtcclxuICAgICAgLi4uZGF0YVtOb3RpY2VUeXBlLlRyYWNrZXJDYXRlZ29yeV0uZmlsdGVyKFxyXG4gICAgICAgIChjYXRlZ29yeTogYW55KSA9PiBjYXRlZ29yeS5pc0Vzc2VudGlhbCxcclxuICAgICAgKSxcclxuICAgICAgLi4uZGF0YVtOb3RpY2VUeXBlLlRyYWNrZXJDYXRlZ29yeV0uZmlsdGVyKFxyXG4gICAgICAgIChjYXRlZ29yeTogYW55KSA9PiAhY2F0ZWdvcnkuaXNFc3NlbnRpYWwsXHJcbiAgICAgICksXHJcbiAgICBdO1xyXG4gICAgZGF0YVsnbXNmdC1zY3JpcHQtb3BlbiddID0gJzxzY3JpcHQ+JztcclxuICAgIGRhdGFbJ21zZnQtc2NyaXB0LWNsb3NlJ10gPSAnPC9zY3JpcHQ+JztcclxuICAgIExvZ2dlci5pbmZvKCdnZXRUZW1wbGF0ZSBkYXRhIGludm9rZWQnLCB7IGNvbnNlbnRNb2RlbCwgZGF0YSB9KTtcclxuICAgIHJldHVybiB7IC4uLmRhdGEsIC4uLndpbmRvdy5fX01TRlRfU0RLLlN0b3JlLmdldHRlcnMudGVtcGxhdGVEYXRhIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBQZXJmb3JtIGFsbCBuZWNlc3Nhcnkgc3RlcHMgbGlrZSByZXBsYWNpbmcgcGxhY2Vob2xkZXJzIGluXHJcbiAgICogdGVtcGxhdGVzIGR1cmluZyBpbml0LlxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIGluaXQoKSB7XHJcbiAgICByZWdpc3RlckhlcGxlcnMoKTtcclxuICAgIGlmIChcclxuICAgICAgd2luZG93Ll9fTVNGVF9TREsuU3RvcmUuZ2V0dGVycy5jdXJyZW50TW9kZWwgPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NESy5TdG9yZS5nZXR0ZXJzLnRlbXBsYXRlID09PSB1bmRlZmluZWRcclxuICAgICkge1xyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NESy5Mb2dnZXIud2FybignQ2Fubm90IGNhbGwgaW5pdCBiZWZvcmUgY29uZmlnIGlzIHJlYWR5LicpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY29uc2VudE1vZGVsID0gd2luZG93Ll9fTVNGVF9TREsuU3RvcmUuZ2V0dGVycy5jdXJyZW50TW9kZWw7XHJcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IHdpbmRvdy5fX01TRlRfU0RLLlN0b3JlLmdldHRlcnMudGVtcGxhdGU7XHJcblxyXG4gICAgY29uc3QgZGF0YSA9IFRlbXBsYXRlSGFuZGxlci5nZXRUZW1wbGF0ZURhdGEoY29uc2VudE1vZGVsKTtcclxuICAgIHRlbXBsYXRlLnBhZ2VzLmZvckVhY2gocGFnZSA9PiB7XHJcbiAgICAgIGxldCB0ZW1wbGF0ZVN0cmluZzogc3RyaW5nO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gd2luZG93LkhhbmRsZWJhcnMuY29tcGlsZShwYWdlLmNvbnRlbnQpO1xyXG4gICAgICAgIHRlbXBsYXRlU3RyaW5nID0gdGVtcGxhdGUoZGF0YSk7XHJcbiAgICAgIH0gY2F0Y2ggKGU6IGFueSkge1xyXG4gICAgICAgIHdpbmRvdy5fX01TRlRfU0RLLkxvZ2dlci5lcnJvcihlLm1lc3NhZ2UsIGUpO1xyXG4gICAgICAgIHRlbXBsYXRlU3RyaW5nID0gRXJyb3JTdHJpbmdzLlRlbXBsYXRlRXJyb3I7XHJcbiAgICAgIH1cclxuICAgICAgd2luZG93Ll9fTVNGVF9TREsuU3RvcmUucmVkdWNlcnMuc2V0Q29tcG9uZW50cyh7XHJcbiAgICAgICAgLi4ud2luZG93Ll9fTVNGVF9TREsuU3RvcmUuZ2V0dGVycy5jb21wb25lbnRzLFxyXG4gICAgICAgIFtwYWdlLm5hbWVdOiB0ZW1wbGF0ZVN0cmluZyxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIHdpbmRvdy5fX01TRlRfU0RLLkxvZ2dlci5pbmZvKCdDb21wb25lbnRzIHVwZGF0ZWQnKTtcclxuICAgIFRlbXBsYXRlSGFuZGxlci5pbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICB3aW5kb3cuX19NU0ZUX1NESy5FdmVudEJ1cy5vbihcclxuICAgICAgd2luZG93Ll9fTVNGVF9TREsuZW51bXMuUHVibGljRXZlbnRzLlNob3dGaXJzdFBhZ2UsXHJcbiAgICAgIFRlbXBsYXRlSGFuZGxlci5zaG93Rmlyc3RQYWdlLFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNob3cgQ29uc2VudCBub3RpY2UgdGVtcGxhdGVcclxuICAgKi9cclxuICBwcml2YXRlIHN0YXRpYyBzaG93Rmlyc3RQYWdlKCkge1xyXG4gICAgaWYgKCFUZW1wbGF0ZUhhbmRsZXIuaW5pdGlhbGl6ZWQpIHtcclxuICAgICAgVGVtcGxhdGVIYW5kbGVyLmluaXQoKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGNvbnNlbnRNb2RlbCA9IHdpbmRvdy5fX01TRlRfU0RLLlN0b3JlLmdldHRlcnMuY3VycmVudE1vZGVsO1xyXG4gICAgaWYgKGNvbnNlbnRNb2RlbCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLLkxvZ2dlci53YXJuKFxyXG4gICAgICAgICdDYW5ub3QgY2FsbCBpbml0IGJlZm9yZSBjb25zZW50IG1vZGVsIGlzIHNlbGVjdGVkLicsXHJcbiAgICAgICk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBtb2RlID0gY29uc2VudE1vZGVsLmxheW91dC51aS5tb2RlO1xyXG4gICAgY29uc3QgaW5pdENvbXBvbmVudCA9IHdpbmRvdy5fX01TRlRfU0RLLlN0b3JlLmdldHRlcnMudGVtcGxhdGU/Lm1vZGVzLmZpbmQoXHJcbiAgICAgIG0gPT4gbS5uYW1lID09PSBtb2RlLFxyXG4gICAgKT8uaW5pdFBhZ2U7XHJcblxyXG4gICAgaWYgKFxyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NESy5TdG9yZS5nZXR0ZXJzLmNvbXBvbmVudHMgPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICBpbml0Q29tcG9uZW50ID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgd2luZG93Ll9fTVNGVF9TREsuU3RvcmUuZ2V0dGVycy5jb21wb25lbnRzW2luaXRDb21wb25lbnRdID09PSB1bmRlZmluZWRcclxuICAgICkge1xyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NESy5Mb2dnZXIuZXJyb3IoJ05vdGljZSB0ZW1wbGF0ZSBub3QgZm91bmQuJyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IHRlbXBsYXRlID0gd2luZG93Ll9fTVNGVF9TREsuU3RvcmUuZ2V0dGVycy5jb21wb25lbnRzW2luaXRDb21wb25lbnRdO1xyXG5cclxuICAgIFRlbXBsYXRlSGFuZGxlci5zaG93VGVtcGxhdGVJbklGcmFtZShcclxuICAgICAgdGVtcGxhdGUsXHJcbiAgICAgIGluaXRDb21wb25lbnQsXHJcbiAgICAgIFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICB0eXBlOiBTdHlsZVR5cGUuVGV4dCxcclxuICAgICAgICAgIHZhbHVlOiBjb25zZW50TW9kZWwubGF5b3V0LnVpLmNzcyB8fCAnJyxcclxuICAgICAgICB9LFxyXG4gICAgICBdLFxyXG4gICAgICBUZW1wbGF0ZUhhbmRsZXIuZ2V0UGFyZW50RWxlbWVudChpbml0Q29tcG9uZW50KSxcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHN0YXRpYyBnZXRQYXJlbnRFbGVtZW50KHRlbXBsYXRlSWQ6IHN0cmluZyk6IEhUTUxFbGVtZW50IHwgbnVsbCB7XHJcbiAgICBjb25zdCBwYXJlbnRFbGVtZW50SWQgPSAod2luZG93Ll9fTVNGVF9TREsuU3RvcmUuZ2V0dGVycy5jb25maWcuaW5pdENvbmZpZ1xyXG4gICAgICA/LmNvbXBvbmVudFBhcmVudE1hcCB8fFxyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NESy5TdG9yZS5nZXR0ZXJzLnRlbXBsYXRlUGFyZW50TWFwKVt0ZW1wbGF0ZUlkXTtcclxuICAgIGlmIChwYXJlbnRFbGVtZW50SWQpIHtcclxuICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBhcmVudEVsZW1lbnRJZCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZHMgdGVtcGxhdGUgdG8gaWZyYW1lIGFuZCBhcHBlbmQgaXQgdG8gZG9tXHJcbiAgICpcclxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IHRlbXBsYXRlIHRlbXBsYXRlIHRvIGFkZFxyXG4gICAqIEBwYXJhbSAge3N0cmluZ30gaWZyYW1lSWQgaWZyYW1lIGlkXHJcbiAgICogQHBhcmFtICB7SVN0eWxlW119IHN0eWxlcyBzdHlsZXNcclxuICAgKiBAcGFyYW0gIHtIVE1MRWxlbWVudHxudWxsfSBwYXJlbnRFbGVtZW50IGlmIGlmcmFtZSBzaG91bGQgYmUgYWRkZWQgdG8gYSBzcGVjaWZpYyBlbGVtZW50IGluc3RlYWQgb2YgYm9keVxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIHNob3dUZW1wbGF0ZUluSUZyYW1lKFxyXG4gICAgdGVtcGxhdGU6IHN0cmluZyxcclxuICAgIGlmcmFtZUlkOiBzdHJpbmcsXHJcbiAgICBzdHlsZXM6IElTdHlsZVtdID0gW10sXHJcbiAgICBwYXJlbnRFbGVtZW50PzogSFRNTEVsZW1lbnQgfCBudWxsLFxyXG4gICkge1xyXG4gICAgY29uc3QgaWZyYW1lRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlmcmFtZUlkKTtcclxuICAgIGlmIChpZnJhbWVFbGVtZW50KSB7XHJcbiAgICAgIExvZ2dlci5pbmZvKGBUZW1wbGF0ZTogJHtpZnJhbWVJZH0gaXMgYWxyZWFkeSBvcGVuLmApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIHRlbXBsYXRlID09PSBFcnJvclN0cmluZ3MuVGVtcGxhdGVFcnJvciAmJlxyXG4gICAgICAgICghd2luZG93Ll9fTVNGVF9TREsuU3RvcmUuZ2V0dGVycy5pc0xpdmVQcmV2aWV3TW9kZSB8fFxyXG4gICAgICAgICAgIXdpbmRvdy5fX01TRlRfU0RLLlN0b3JlLmdldHRlcnMuaXNQcmV2aWV3TW9kZSlcclxuICAgICAgKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgb3JpZ2luOiB3aW5kb3cub3JpZ2luLFxyXG4gICAgICB9O1xyXG4gICAgICB0ZW1wbGF0ZSA9XHJcbiAgICAgICAgYDxzY3JpcHQ+dmFyIG1zZnREYXRhID0gJHtKU09OLnN0cmluZ2lmeShkYXRhKX08L3NjcmlwdD5gICsgdGVtcGxhdGU7XHJcbiAgICAgIGlmIChcclxuICAgICAgICAhd2luZG93Ll9fTVNGVF9TREsuU3RvcmUuZ2V0dGVycy5jb25maWcuaW5pdENvbmZpZ1xyXG4gICAgICAgICAgPy5yZW5kZXJUZW1wbGF0ZVdpdGhvdXRJZnJhbWVcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGVtcGxhdGUgPVxyXG4gICAgICAgICAgYDxzY3JpcHQ+JHt3aW5kb3cuX19NU0ZUX1NESy5TdG9yZS5nZXR0ZXJzLnByb3h5SlN9PC9zY3JpcHQ+YCArXHJcbiAgICAgICAgICB0ZW1wbGF0ZTtcclxuICAgICAgfVxyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NESy5VdGlscy5JRnJhbWVVdGlscy5jcmVhdGVJRnJhbWUoXHJcbiAgICAgICAgdGVtcGxhdGUsXHJcbiAgICAgICAgaWZyYW1lSWQsXHJcbiAgICAgICAgcGFyZW50RWxlbWVudCxcclxuICAgICAgICBbLi4uc3R5bGVzLCAuLi4od2luZG93Ll9fTVNGVF9TREsuU3RvcmUuZ2V0dGVycy5zdHlsZXMgfHwgW10pXSxcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhpZGUgY29uc2VudCBub3RpY2UgaWZyYW1lXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgaGlkZUNvbnNlbnROb3RpY2UoKSB7XHJcbiAgICBjb25zdCBjb25zZW50TW9kZWwgPSB3aW5kb3cuX19NU0ZUX1NESy5TdG9yZS5nZXR0ZXJzLmN1cnJlbnRNb2RlbDtcclxuICAgIGlmIChjb25zZW50TW9kZWwgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NESy5Mb2dnZXIud2FybihcclxuICAgICAgICAnQ2Fubm90IGNhbGwgaGlkZUNvbnNlbnROb3RpY2UgYmVmb3JlIGNvbnNlbnQgbW9kZWwgaXMgc2VsZWN0ZWQuJyxcclxuICAgICAgKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG1vZGUgPSBjb25zZW50TW9kZWwubGF5b3V0LnVpLm1vZGU7XHJcbiAgICBjb25zdCBpbml0Q29tcG9uZW50ID0gd2luZG93Ll9fTVNGVF9TREsuU3RvcmUuZ2V0dGVycy50ZW1wbGF0ZT8ubW9kZXMuZmluZChcclxuICAgICAgbSA9PiBtLm5hbWUgPT09IG1vZGUsXHJcbiAgICApPy5pbml0UGFnZTtcclxuXHJcbiAgICBpbml0Q29tcG9uZW50ICYmIFRlbXBsYXRlSGFuZGxlci5jbG9zZUlGcmFtZShpbml0Q29tcG9uZW50KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldCBpZnJhbWUgZGlzcGxheSB0byBub25lXHJcbiAgICpcclxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IGlmcmFtZUlkIGlkIG9mIGlmcmFtZSBlbGVtZW50XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgY2xvc2VJRnJhbWUoaWZyYW1lSWQ6IHN0cmluZykge1xyXG4gICAgY29uc3QgaWZyYW1lRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlmcmFtZUlkKTtcclxuICAgIGlmcmFtZUVsZW1lbnQ/LnBhcmVudEVsZW1lbnQ/LnJlbW92ZUNoaWxkKGlmcmFtZUVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVGVtcGxhdGVIYW5kbGVyO1xyXG4iLCJpbXBvcnQgeyBQdWJsaWNFdmVudHMgfSBmcm9tICdjb3JlL2NvbnN0YW50cy9lbnVtcyc7XHJcbmltcG9ydCBUZW1wbGF0ZUhhbmRsZXIgZnJvbSAnLi9UZW1wbGF0ZUhhbmRsZXInO1xyXG5cclxud2luZG93Lm9ubWVzc2FnZSA9IGFzeW5jIGUgPT4ge1xyXG4gIGlmIChlLm9yaWdpbiA9PT0gJ251bGwnKSB7XHJcbiAgICBpZiAoXHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLLlN0b3JlLmdldHRlcnMuaXNBY3Rpb25EaXNhYmxlZCAmJlxyXG4gICAgICBlLmRhdGEubWV0aG9kID09PSAndHJpZ2dlcidcclxuICAgICkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBsZXQgcmVzcG9uc2UgPSAod2luZG93Lk1TRlRDb25zZW50IGFzIGFueSlbZS5kYXRhLm1ldGhvZF0oLi4uZS5kYXRhLnBhcmFtcyk7XHJcbiAgICBpZiAocmVzcG9uc2UgaW5zdGFuY2VvZiBQcm9taXNlKSB7XHJcbiAgICAgIHJlc3BvbnNlID0gYXdhaXQgcmVzcG9uc2U7XHJcbiAgICB9XHJcbiAgICBpZiAoZS5kYXRhLnJlc3BvbnNlSWQpIHtcclxuICAgICAgZS5zb3VyY2U/LnBvc3RNZXNzYWdlKHsgLi4uZS5kYXRhLCByZXNwb25zZSB9LCB7IHRhcmdldE9yaWdpbjogJyonIH0pO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcbndpbmRvdy5fX01TRlRfU0RLLkV2ZW50QnVzLm9uKFxyXG4gIFB1YmxpY0V2ZW50cy5BbmNob3JUYWdDbGlja2VkLFxyXG4gICh7IGF0dHJpYnV0ZXMgfSkgPT4ge1xyXG4gICAgY29uc3QgYVRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2goYXR0ck5hbWUgPT4ge1xyXG4gICAgICBhVGFnLnNldEF0dHJpYnV0ZShhdHRyTmFtZSwgYXR0cmlidXRlc1thdHRyTmFtZV0pO1xyXG4gICAgfSk7XHJcbiAgICBhVGFnLmNsaWNrKCk7XHJcbiAgfSxcclxuKTtcclxuXHJcbm5ldyBUZW1wbGF0ZUhhbmRsZXIoKTtcclxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztJQUFBO0lBQ0E7QUFDQTtJQUNBO0lBQ0E7QUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtBQUNBO0lBQ0EsSUFBSSxhQUFhLEdBQUcsU0FBUyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ25DLElBQUksYUFBYSxHQUFHLE1BQU0sQ0FBQyxjQUFjO0lBQ3pDLFNBQVMsRUFBRSxTQUFTLEVBQUUsRUFBRSxFQUFFLFlBQVksS0FBSyxJQUFJLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUNwRixRQUFRLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEtBQUssSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUMxRyxJQUFJLE9BQU8sYUFBYSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUMvQixDQUFDLENBQUM7QUFDRjtJQUNPLFNBQVMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7SUFDaEMsSUFBSSxJQUFJLE9BQU8sQ0FBQyxLQUFLLFVBQVUsSUFBSSxDQUFDLEtBQUssSUFBSTtJQUM3QyxRQUFRLE1BQU0sSUFBSSxTQUFTLENBQUMsc0JBQXNCLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLCtCQUErQixDQUFDLENBQUM7SUFDbEcsSUFBSSxhQUFhLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3hCLElBQUksU0FBUyxFQUFFLEdBQUcsRUFBRSxJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQyxFQUFFO0lBQzNDLElBQUksQ0FBQyxDQUFDLFNBQVMsR0FBRyxDQUFDLEtBQUssSUFBSSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUMsU0FBUyxFQUFFLElBQUksRUFBRSxFQUFFLENBQUMsQ0FBQztJQUN6RixDQUFDO0FBQ0Q7SUFDTyxJQUFJLFFBQVEsR0FBRyxXQUFXO0lBQ2pDLElBQUksUUFBUSxHQUFHLE1BQU0sQ0FBQyxNQUFNLElBQUksU0FBUyxRQUFRLENBQUMsQ0FBQyxFQUFFO0lBQ3JELFFBQVEsS0FBSyxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxTQUFTLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7SUFDN0QsWUFBWSxDQUFDLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzdCLFlBQVksS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDekYsU0FBUztJQUNULFFBQVEsT0FBTyxDQUFDLENBQUM7SUFDakIsTUFBSztJQUNMLElBQUksT0FBTyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxTQUFTLENBQUMsQ0FBQztJQUMzQyxFQUFDO0FBNEJEO0lBQ08sU0FBUyxTQUFTLENBQUMsT0FBTyxFQUFFLFVBQVUsRUFBRSxDQUFDLEVBQUUsU0FBUyxFQUFFO0lBQzdELElBQUksU0FBUyxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsT0FBTyxLQUFLLFlBQVksQ0FBQyxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUMsQ0FBQyxVQUFVLE9BQU8sRUFBRSxFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFO0lBQ2hILElBQUksT0FBTyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsT0FBTyxDQUFDLEVBQUUsVUFBVSxPQUFPLEVBQUUsTUFBTSxFQUFFO0lBQy9ELFFBQVEsU0FBUyxTQUFTLENBQUMsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtJQUNuRyxRQUFRLFNBQVMsUUFBUSxDQUFDLEtBQUssRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtJQUN0RyxRQUFRLFNBQVMsSUFBSSxDQUFDLE1BQU0sRUFBRSxFQUFFLE1BQU0sQ0FBQyxJQUFJLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsUUFBUSxDQUFDLENBQUMsRUFBRTtJQUN0SCxRQUFRLElBQUksQ0FBQyxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxVQUFVLElBQUksRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztJQUM5RSxLQUFLLENBQUMsQ0FBQztJQUNQLENBQUM7QUFDRDtJQUNPLFNBQVMsV0FBVyxDQUFDLE9BQU8sRUFBRSxJQUFJLEVBQUU7SUFDM0MsSUFBSSxJQUFJLENBQUMsR0FBRyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3JILElBQUksT0FBTyxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLE9BQU8sTUFBTSxLQUFLLFVBQVUsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFHLFdBQVcsRUFBRSxPQUFPLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDN0osSUFBSSxTQUFTLElBQUksQ0FBQyxDQUFDLEVBQUUsRUFBRSxPQUFPLFVBQVUsQ0FBQyxFQUFFLEVBQUUsT0FBTyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRTtJQUN0RSxJQUFJLFNBQVMsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUN0QixRQUFRLElBQUksQ0FBQyxFQUFFLE1BQU0sSUFBSSxTQUFTLENBQUMsaUNBQWlDLENBQUMsQ0FBQztJQUN0RSxRQUFRLE9BQU8sQ0FBQyxFQUFFLElBQUk7SUFDdEIsWUFBWSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN6SyxZQUFZLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDcEQsWUFBWSxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDekIsZ0JBQWdCLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLE1BQU07SUFDOUMsZ0JBQWdCLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsQ0FBQztJQUN4RSxnQkFBZ0IsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUztJQUNqRSxnQkFBZ0IsS0FBSyxDQUFDLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsU0FBUztJQUNqRSxnQkFBZ0I7SUFDaEIsb0JBQW9CLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUU7SUFDaEksb0JBQW9CLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUU7SUFDMUcsb0JBQW9CLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxD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
